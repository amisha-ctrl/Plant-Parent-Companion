/*! For license information please see 772.js.LICENSE.txt */
"use strict";(self.webpackChunkforest_atlas_template=self.webpackChunkforest_atlas_template||[]).push([[772],{4991:(e,t,r)=>{r.d(t,{A:()=>g});var i,n=r(82392),s=r(20857),o=r(20879),a=r(3438),l=r(14755),u=r(84977),c=r(81482),p=(r(6273),r(80861),r(67498),r(25376)),d=r(26325),h=r(38648),m=r(36979),y=r(93122);let f=i=class extends((0,l.O)(u.oY)){constructor(e){super(e),this.barrierType=null,this.costs=null,this.geometry=null,this.name=null,this.objectId=null,this.popupTemplate=null,this.scaleFactor=null,this.symbol=null,this.type="polyline-barrier"}readCosts(e,t){return(0,m.lh)(t.attributes,"Attr_")}static fromGraphic(e){return new i({barrierType:null!=e.attributes.BarrierType?y.iM.fromJSON(e.attributes.BarrierType):null,costs:null!=e.attributes.Costs?(0,m.aZ)(JSON.parse(e.attributes.Costs)):null,geometry:e.geometry,name:e.attributes.Name??null,objectId:e.attributes.ObjectID??e.attributes.__OBJECTID,popupTemplate:e.popupTemplate,scaleFactor:e.attributes.ScaleFactor??null,symbol:e.symbol})}toGraphic(){const e={ObjectID:this.objectId,BarrierType:null!=this.barrierType?y.iM.toJSON(this.barrierType):null,Costs:null!=this.costs?JSON.stringify((0,m.nA)(this.costs)):null,Name:this.name,ScaleFactor:this.scaleFactor};return new s.A({geometry:this.geometry,attributes:e,symbol:this.symbol,popupTemplate:this.popupTemplate})}};f.fields=[{name:"ObjectID",alias:"ObjectID",type:"esriFieldTypeOID"},{name:"BarrierType",alias:"Barrier Type",type:"esriFieldTypeInteger"},{name:"Costs",alias:"Costs",type:"esriFieldTypeString"},{name:"Name",alias:"Name",type:"esriFieldTypeString"},{name:"ScaleFactor",alias:"Scale Factor",type:"esriFieldTypeDouble"}],(0,n._)([(0,c.MZ)({type:y.iM.apiValues,json:{read:{source:"attributes.BarrierType",reader:y.iM.read}}})],f.prototype,"barrierType",void 0),(0,n._)([(0,c.MZ)()],f.prototype,"costs",void 0),(0,n._)([(0,p.w)("costs",["attributes"])],f.prototype,"readCosts",null),(0,n._)([(0,c.MZ)({type:h.A,json:{write:!0}})],f.prototype,"geometry",void 0),(0,n._)([(0,c.MZ)({json:{name:"attributes.Name"}})],f.prototype,"name",void 0),(0,n._)([(0,c.MZ)({json:{name:"attributes.ObjectID"}})],f.prototype,"objectId",void 0),(0,n._)([(0,c.MZ)({type:o.A})],f.prototype,"popupTemplate",void 0),(0,n._)([(0,c.MZ)()],f.prototype,"scaleFactor",void 0),(0,n._)([(0,c.MZ)({types:a.Es})],f.prototype,"symbol",void 0),(0,n._)([(0,c.MZ)({readOnly:!0,json:{read:!1}})],f.prototype,"type",void 0),f=i=(0,n._)([(0,d.$)("esri.rest.support.PolylineBarrier")],f);const g=f},15958:(e,t,r)=>{r.r(t),r.d(t,{default:()=>B});var i=r(6480),n=r(82392),s=r(32083),o=r(38116),a=r(62991),l=r(57888),u=r(92840),c=r(15565),p=r(21750),d=r(37623),h=r(19759),m=r(81482),y=(r(6273),r(80861),r(26325)),f=(r(39553),r(67498),r(52239)),g=r(9737),v=r(33510),_=r(2153),w=r(2110),b=r(56931),T=r(13033);const S="esri-identity-modal",A={base:S,info:`${S}__info`,notice:`${S}__notice`};let I=class extends f.A{constructor(e,t){super(e,t),this.container=document.createElement("div"),this.error=null,this.oAuthPrompt=!1,this.open=!1,this.signingIn=!1,this.server=null,this.resource=null,this._usernameInputNode=null,this._passwordInputNode=null,document.body.appendChild(this.container)}loadDependencies(){return(0,g.W)({button:()=>Promise.all([r.e(541),r.e(535)]).then(r.bind(r,45399)),dialog:()=>Promise.all([r.e(541),r.e(535),r.e(449),r.e(866)]).then(r.bind(r,15866)),input:()=>Promise.all([r.e(541),r.e(535),r.e(569)]).then(r.bind(r,21512)),label:()=>Promise.all([r.e(541),r.e(535)]).then(r.bind(r,31507)),notice:()=>Promise.all([r.e(541),r.e(535)]).then(r.bind(r,80710))})}get title(){return this.commonMessages?.auth.signIn}render(){const{open:e,title:t,messages:r,signingIn:i,oAuthPrompt:n,server:s,resource:o,error:a}=this,{info:l,oAuthInfo:u,lblItem:c,invalidUser:p,noAuthService:d,lblUser:h,lblPwd:m,lblCancel:y,lblSigning:f,lblOk:g}=r;return(0,w.K)("div",{class:this.classes(A.base,(0,b.fJ)())},(0,w.K)("form",{bind:this,onsubmit:this._submit},(0,w.K)("calcite-dialog",{bind:this,heading:t,modal:!0,open:e,outsideCloseDisabled:!0,scale:"s",widthScale:"s",onCalciteDialogClose:this._cancel,onCalciteDialogOpen:this._focusUsernameInput},(0,w.K)("div",{class:A.info},(0,T.V)(n?u:l,{server:s&&/\.arcgis\.com/i.test(s)?"ArcGIS Online":s,resource:`(${o||c})`})),a?(0,w.K)("calcite-notice",{class:A.notice,icon:"exclamation-mark-triangle",kind:"danger",open:!0},(0,w.K)("div",{slot:"message"},a.details?.httpStatus?p:d)):null,n?null:[(0,w.K)("calcite-label",null,h,(0,w.K)("calcite-input",{afterCreate:e=>this._usernameInputNode=e,autocomplete:"off",bind:this,name:"username",required:!0,spellcheck:!1,type:"text",value:""})),(0,w.K)("calcite-label",null,m,(0,w.K)("calcite-input",{afterCreate:e=>this._passwordInputNode=e,bind:this,name:"password",required:!0,type:"password",value:""}))],(0,w.K)("calcite-button",{appearance:"outline",bind:this,onclick:this._cancel,slot:"footer-end",type:"button"},y),(0,w.K)("calcite-button",{loading:!!i,slot:"footer-end",type:"submit"},i?f:g))))}_focusUsernameInput(){return(0,v.Z6)((()=>this._usernameInputNode))}_cancel(){this._set("signingIn",!1),this.open=!1,this._usernameInputNode&&(this._usernameInputNode.value=""),this._passwordInputNode&&(this._passwordInputNode.value=""),this.emit("cancel")}_submit(e){e.preventDefault(),this._set("signingIn",!0);const t=this.oAuthPrompt?{}:{username:this._usernameInputNode?.value,password:this._passwordInputNode?.value};this.emit("submit",t)}};(0,n._)([(0,m.MZ)({readOnly:!0})],I.prototype,"container",void 0),(0,n._)([(0,m.MZ)(),(0,_.G)("esri/t9n/common")],I.prototype,"commonMessages",void 0),(0,n._)([(0,m.MZ)()],I.prototype,"error",void 0),(0,n._)([(0,m.MZ)(),(0,_.G)("esri/identity/t9n/identity")],I.prototype,"messages",void 0),(0,n._)([(0,m.MZ)()],I.prototype,"oAuthPrompt",void 0),(0,n._)([(0,m.MZ)()],I.prototype,"open",void 0),(0,n._)([(0,m.MZ)()],I.prototype,"signingIn",void 0),(0,n._)([(0,m.MZ)()],I.prototype,"server",void 0),(0,n._)([(0,m.MZ)({readOnly:!0})],I.prototype,"title",null),(0,n._)([(0,m.MZ)()],I.prototype,"resource",void 0),I=(0,n._)([(0,y.$)("esri.identity.IdentityModal")],I);const M=I,O="esriJSAPIOAuth";class D{constructor(e,t){this.oAuthInfo=null,this.storage=null,this.appId=null,this.codeVerifier=null,this.expires=null,this.refreshToken=null,this.ssl=null,this.stateUID=null,this.token=null,this.userId=null,this.oAuthInfo=e,this.storage=t,this._init()}isValid(){let e=!1;if(this.oAuthInfo&&this.userId&&(this.refreshToken||this.token))if(null==this.expires&&this.refreshToken)e=!0;else if(this.expires){const t=Date.now();this.expires>t&&(this.expires-t)/1e3>60*this.oAuthInfo.minTimeUntilExpiration&&(e=!0)}return e}save(){if(!this.storage)return!1;const e=this._load(),t=this.oAuthInfo;if(t?.authNamespace&&t.portalUrl){let r=e[t.authNamespace];r||(r=e[t.authNamespace]={}),this.appId||(this.appId=t.appId),r[t.portalUrl]={appId:this.appId,codeVerifier:this.codeVerifier,expires:this.expires,refreshToken:this.refreshToken,ssl:this.ssl,stateUID:this.stateUID,token:this.token,userId:this.userId};try{this.storage.setItem(O,JSON.stringify(e))}catch(e){return console.warn(e),!1}return!0}return!1}destroy(){const e=this._load(),t=this.oAuthInfo;if(t?.appId&&t?.portalUrl&&(null==this.expires||this.expires>Date.now())&&(this.refreshToken||this.token)){const e=t.portalUrl.replace(/^http:/i,"https:")+"/sharing/rest/oauth2/revokeToken",r=new FormData;if(r.append("f","json"),r.append("auth_token",this.refreshToken||this.token),r.append("client_id",t.appId),r.append("token_type_hint",this.refreshToken?"refresh_token":"access_token"),"function"==typeof navigator.sendBeacon)navigator.sendBeacon(e,r);else{const t=new XMLHttpRequest;t.open("POST",e),t.send(r)}}if(t?.authNamespace&&t.portalUrl&&this.storage){const r=e[t.authNamespace];if(r){delete r[t.portalUrl];try{this.storage.setItem(O,JSON.stringify(e))}catch(e){console.log(e)}}}t&&(t._oAuthCred=null,this.oAuthInfo=null)}_init(){const e=this._load(),t=this.oAuthInfo;if(t?.authNamespace&&t.portalUrl){let r=e[t.authNamespace];r&&(r=r[t.portalUrl],r&&(this.appId=r.appId,this.codeVerifier=r.codeVerifier,this.expires=r.expires,this.refreshToken=r.refreshToken,this.ssl=r.ssl,this.stateUID=r.stateUID,this.token=r.token,this.userId=r.userId))}}_load(){let e={};if(this.storage){const t=this.storage.getItem(O);if(t)try{e=JSON.parse(t)}catch(e){console.warn(e)}}return e}}D.prototype.declaredClass="esri.identity.OAuthCredential";var C,k=r(84977);let x=C=class extends k.oY{constructor(e){super(e),this._oAuthCred=null,this.appId=null,this.authNamespace="/",this.expiration=20160,this.flowType="auto",this.forceLogin=!1,this.forceUserId=!1,this.locale=null,this.minTimeUntilExpiration=30,this.popup=!1,this.popupCallbackUrl="oauth-callback.html",this.popupWindowFeatures="height=490,width=800,resizable,scrollbars,status",this.portalUrl="https://www.arcgis.com",this.preserveUrlHash=!1,this.userId=null}clone(){return C.fromJSON(this.toJSON())}};(0,n._)([(0,m.MZ)({json:{write:!0}})],x.prototype,"appId",void 0),(0,n._)([(0,m.MZ)({json:{write:!0}})],x.prototype,"authNamespace",void 0),(0,n._)([(0,m.MZ)({json:{write:!0}})],x.prototype,"expiration",void 0),(0,n._)([(0,m.MZ)({json:{write:!0}})],x.prototype,"flowType",void 0),(0,n._)([(0,m.MZ)({json:{write:!0}})],x.prototype,"forceLogin",void 0),(0,n._)([(0,m.MZ)({json:{write:!0}})],x.prototype,"forceUserId",void 0),(0,n._)([(0,m.MZ)({json:{write:!0}})],x.prototype,"locale",void 0),(0,n._)([(0,m.MZ)({json:{write:!0}})],x.prototype,"minTimeUntilExpiration",void 0),(0,n._)([(0,m.MZ)({json:{write:!0}})],x.prototype,"popup",void 0),(0,n._)([(0,m.MZ)({json:{write:!0}})],x.prototype,"popupCallbackUrl",void 0),(0,n._)([(0,m.MZ)({json:{write:!0}})],x.prototype,"popupWindowFeatures",void 0),(0,n._)([(0,m.MZ)({json:{write:!0}})],x.prototype,"portalUrl",void 0),(0,n._)([(0,m.MZ)({json:{write:!0}})],x.prototype,"preserveUrlHash",void 0),(0,n._)([(0,m.MZ)({json:{write:!0}})],x.prototype,"userId",void 0),x=C=(0,n._)([(0,y.$)("esri.identity.OAuthInfo")],x);const j=x;let U=class extends k.oY{constructor(e){super(e),this.adminTokenServiceUrl=null,this.currentVersion=null,this.hasPortal=null,this.hasServer=null,this.owningSystemUrl=null,this.owningTenant=null,this.server=null,this.shortLivedTokenValidity=null,this.tokenServiceUrl=null,this.webTierAuth=null}};(0,n._)([(0,m.MZ)({json:{write:!0}})],U.prototype,"adminTokenServiceUrl",void 0),(0,n._)([(0,m.MZ)({json:{write:!0}})],U.prototype,"currentVersion",void 0),(0,n._)([(0,m.MZ)({json:{write:!0}})],U.prototype,"hasPortal",void 0),(0,n._)([(0,m.MZ)({json:{write:!0}})],U.prototype,"hasServer",void 0),(0,n._)([(0,m.MZ)({json:{write:!0}})],U.prototype,"owningSystemUrl",void 0),(0,n._)([(0,m.MZ)({json:{write:!0}})],U.prototype,"owningTenant",void 0),(0,n._)([(0,m.MZ)({json:{write:!0}})],U.prototype,"server",void 0),(0,n._)([(0,m.MZ)({json:{write:!0}})],U.prototype,"shortLivedTokenValidity",void 0),(0,n._)([(0,m.MZ)({json:{write:!0}})],U.prototype,"tokenServiceUrl",void 0),(0,n._)([(0,m.MZ)({json:{write:!0}})],U.prototype,"webTierAuth",void 0),U=(0,n._)([(0,y.$)("esri.identity.ServerInfo")],U);const P=U;var N=r(9856);const F={},R=e=>{const t=new h.s0(e.owningSystemUrl).host,r=new h.s0(e.server).host,i=/.+\.arcgis\.com$/i;return i.test(t)&&i.test(r)},E=(e,t)=>!!(R(e)&&t&&t.some((t=>t.test(e.server))));let Z=null,$=null;try{Z=window.localStorage,$=window.sessionStorage}catch{}class W extends l.A{constructor(){super(),this._portalConfig=globalThis.esriGeowConfig,this.serverInfos=[],this.oAuthInfos=[],this.credentials=[],this._soReqs=[],this._xoReqs=[],this._portals=[],this._defaultOAuthInfo=null,this._defaultTokenValidity=60,this.dialog=null,this.tokenValidity=null,this.normalizeWebTierAuth=!1,this._appOrigin="null"!==window.origin?window.origin:window.location.origin,this._appUrlObj=(0,h.An)(window.location.href),this._busy=null,this._rejectOnPersistedPageShow=!1,this._oAuthLocationParams=null,this._gwTokenUrl="/sharing/rest/generateToken",this._agsRest="/rest/services",this._agsPortal=/\/sharing(\/|$)/i,this._agsAdmin=/(https?:\/\/[^/]+\/[^/]+)\/admin\/?(\/.*)?$/i,this._adminSvcs=/\/rest\/admin\/services(\/|$)/i,this._gwDomains=[{regex:/^https?:\/\/www\.arcgis\.com/i,customBaseUrl:"maps.arcgis.com",tokenServiceUrl:"https://www.arcgis.com/sharing/rest/generateToken"},{regex:/^https?:\/\/(?:dev|[a-z\d-]+\.mapsdev)\.arcgis\.com/i,customBaseUrl:"mapsdev.arcgis.com",tokenServiceUrl:"https://dev.arcgis.com/sharing/rest/generateToken"},{regex:/^https?:\/\/(?:devext|[a-z\d-]+\.mapsdevext)\.arcgis\.com/i,customBaseUrl:"mapsdevext.arcgis.com",tokenServiceUrl:"https://devext.arcgis.com/sharing/rest/generateToken"},{regex:/^https?:\/\/(?:qaext|[a-z\d-]+\.mapsqa)\.arcgis\.com/i,customBaseUrl:"mapsqa.arcgis.com",tokenServiceUrl:"https://qaext.arcgis.com/sharing/rest/generateToken"},{regex:/^https?:\/\/[a-z\d-]+\.maps\.arcgis\.com/i,customBaseUrl:"maps.arcgis.com",tokenServiceUrl:"https://www.arcgis.com/sharing/rest/generateToken"}],this._legacyFed=[],this._regexSDirUrl=/http.+\/rest\/services\/?/gi,this._regexServerType=/(\/(FeatureServer|GPServer|GeoDataServer|GeocodeServer|GeoenrichmentServer|GeometryServer|GlobeServer|ImageServer|KnowledgeGraphServer|MapServer|MissionServer|MobileServer|NAServer|NetworkDiagramServer|OGCFeatureServer|ParcelFabricServer|RelationalCatalogServer|SceneServer|StreamServer|UtilityNetworkServer|ValidationServer|VectorTileServer|VersionManagementServer|VideoServer)).*/gi,this._gwUser=/http.+\/users\/([^/]+).*/i,this._gwItem=/http.+\/items\/([^/]+).*/i,this._gwGroup=/http.+\/groups\/([^/]+).*/i,this._rePortalTokenSvc=/\/sharing(\/rest)?\/generatetoken/i,this._createDefaultOAuthInfo=!0,this._hasTestedIfAppIsOnPortal=!1,this._getPlatformSelfError=null,this._getOAuthLocationParams(),window.addEventListener("pageshow",(e=>{this._pageShowHandler(e)}))}registerServers(e){const t=this.serverInfos;t?(e=e.filter((e=>!this.findServerInfo(e.server))),this.serverInfos=t.concat(e)):this.serverInfos=e,e.forEach((e=>{e.owningSystemUrl&&this._portals.push(e.owningSystemUrl),e.hasPortal&&this._portals.push(e.server)}))}registerOAuthInfos(e){const t=this.oAuthInfos;if(t){for(const r of e){const e=this.findOAuthInfo(r.portalUrl);e&&t.splice(t.indexOf(e),1)}this.oAuthInfos=t.concat(e)}else this.oAuthInfos=e}registerToken(e){e={...e};const t=this._sanitizeUrl(e.server),r=this._isServerRsrc(t);let i,n=this.findServerInfo(t),s=!0;n||(n=new P,n.server=this._getServerInstanceRoot(t),r?n.hasServer=!0:(n.tokenServiceUrl=this._getTokenSvcUrl(t),n.hasPortal=!0),this.registerServers([n])),i=this._findCredential(t),i?(delete e.server,Object.assign(i,e),s=!1):(i=new J({userId:e.userId,server:n.server??void 0,token:e.token,expires:e.expires,ssl:e.ssl,scope:r?"server":"portal"}),i.resources=[t],this.credentials.push(i)),i.emitTokenChange(!1),s||i.refreshServerTokens()}toJSON(){return(0,c.oy)({serverInfos:this.serverInfos.map((e=>e.toJSON())),oAuthInfos:this.oAuthInfos.map((e=>e.toJSON())),credentials:this.credentials.map((e=>e.toJSON()))})}initialize(e){if(!e)return;"string"==typeof e&&(e=JSON.parse(e));const t=e.serverInfos,r=e.oAuthInfos,i=e.credentials;if(t){const e=[];t.forEach((t=>{t.server&&t.tokenServiceUrl&&e.push(t.declaredClass?t:new P(t))})),e.length&&this.registerServers(e)}if(r){const e=[];r.forEach((t=>{t.appId&&e.push(t.declaredClass?t:new j(t))})),e.length&&this.registerOAuthInfos(e)}i&&i.forEach((e=>{e.server&&e.token&&e.expires&&e.expires>Date.now()&&((e=e.declaredClass?e:new J(e)).emitTokenChange(),this.credentials.push(e))}))}findServerInfo(e){let t;e=this._sanitizeUrl(e);for(const r of this.serverInfos)if(this._hasSameServerInstance(r.server,e)){t=r;break}return t}findOAuthInfo(e){let t;e=this._sanitizeUrl(e);for(const r of this.oAuthInfos)if(this._hasSameServerInstance(r.portalUrl,e)){t=r;break}return t}findCredential(e,t){if(!e)return;let r;e=this._sanitizeUrl(e);const i=this._isServerRsrc(e)?"server":"portal";if(t){for(const n of this.credentials)if(this._hasSameServerInstance(n.server,e)&&t===n.userId&&n.scope===i){r=n;break}}else for(const t of this.credentials)if(this._hasSameServerInstance(t.server,e)&&-1!==this._getIdenticalSvcIdx(e,t)&&t.scope===i){r=t;break}return r}getCredential(e,t){let r,i,n=!0;t&&(r=!!t.token,i=t.error,n=!1!==t.prompt),t={...t},e=this._sanitizeUrl(e);const s=new AbortController,o=(0,d.Tw)();if(t.signal&&(0,d.u7)(t.signal,(()=>{s.abort()})),(0,d.u7)(s,(()=>{o.reject(new a.A("identity-manager:user-aborted","ABORTED"))})),(0,d.G4)(s))return o.promise;t.signal=s.signal;const l=this._isAdminResource(e),u=r?this.findCredential(e):null;let c;if(u&&i&&i.details&&498===i.details.httpStatus)u.destroy();else if(u)return c=new a.A("identity-manager:not-authorized","You are currently signed in as: '"+u.userId+"'. You do not have access to this resource: "+e,{error:i}),o.reject(c),o.promise;const p=this._findCredential(e,t);if(p)return o.resolve(p),o.promise;let m=this.findServerInfo(e);if(m)!m.hasPortal&&m.server&&m.owningSystemUrl&&this._hasSameServerInstance(m.server,m.owningSystemUrl)&&(m.hasPortal=!0),!m.hasServer&&this._isServerRsrc(e)&&(m._restInfoPms=this._getTokenSvcUrl(e),m.hasServer=!0);else{const t=this._getTokenSvcUrl(e);if(!t)return c=new a.A("identity-manager:unknown-resource","Unknown resource - could not find token service endpoint."),o.reject(c),o.promise;m=new P,m.server=this._getServerInstanceRoot(e),"string"==typeof t?(m.tokenServiceUrl=t,m.hasPortal=!0):(m._restInfoPms=t,m.hasServer=!0),this.registerServers([m])}return m.hasPortal&&void 0===m._selfReq&&(n||(0,h.FX)(m.tokenServiceUrl,this._appOrigin)||this._gwDomains.some((e=>e.tokenServiceUrl===m.tokenServiceUrl)))&&(m._selfReq={owningTenant:t?.owningTenant,selfDfd:this._getPortalSelf(m.tokenServiceUrl.replace(this._rePortalTokenSvc,"/sharing/rest/portals/self"),e)}),this._enqueue(e,m,t,o,l)}getResourceName(e){return this._isRESTService(e)?e.replace(this._regexSDirUrl,"").replace(this._regexServerType,"")||"":this._gwUser.test(e)&&e.replace(this._gwUser,"$1")||this._gwItem.test(e)&&e.replace(this._gwItem,"$1")||this._gwGroup.test(e)&&e.replace(this._gwGroup,"$1")||""}generateToken(e,t,r){const i=this._rePortalTokenSvc.test(e.tokenServiceUrl),n=new h.s0(this._appOrigin),s=e.shortLivedTokenValidity;let l,u,c,p,d,m,y,f;t&&(f=this.tokenValidity||s||this._defaultTokenValidity,f>s&&s>0&&(f=s)),r&&(l=r.isAdmin,u=r.serverUrl,c=r.token,m=r.signal,y=r.ssl,e.customParameters=r.customParameters),l?p=e.adminTokenServiceUrl:(p=e.tokenServiceUrl,d=new h.s0(p.toLowerCase()),e.webTierAuth&&r?.serverUrl&&!y&&"http"===n.scheme&&((0,h.FX)(n.uri,p,!0)||"https"===d.scheme&&n.host===d.host&&"7080"===n.port&&"7443"===d.port)&&(p=p.replace(/^https:/i,"http:").replace(/:7443/i,":7080")));const g={query:{request:"getToken",username:t?.username,password:t?.password,serverUrl:u,token:c,expiration:f,referer:l||i?this._appOrigin:null,client:l?"referer":null,f:"json",...e.customParameters},method:"post",authMode:"anonymous",useProxy:this._useProxy(e,r),signal:m,...r?.ioArgs};return i||(g.withCredentials=!1),(0,o.A)(p,g).then((r=>{const i=r.data;if(!i?.token)return new a.A("identity-manager:authentication-failed","Unable to generate token");const n=e.server;return F[n]||(F[n]={}),t&&(F[n][t.username]=t.password),i.validity=f,i}))}isBusy(){return!!this._busy}async checkSignInStatus(e){return(await this.checkAppAccess(e,"")).credential}checkAppAccess(e,t,r){let i=!1;return this.getCredential(e,{prompt:!1}).then((n=>{let s;const l={f:"json"};if("portal"===n.scope)if(t&&(this._doPortalSignIn(e)||r?.force))s=n.server+"/sharing/rest/oauth2/validateAppAccess",l.client_id=t;else{if(!n.token)return{credential:n};s=n.server+"/sharing/rest"}else{if(!n.token)return{credential:n};s=n.server+"/rest/services"}return n.token&&(l.token=n.token),(0,o.A)(s,{query:l,authMode:"anonymous"}).then((e=>{if(!1===e.data.valid)throw new a.A("identity-manager:not-authorized",`You are currently signed in as: '${n.userId}'.`,e.data);return i=!!e.data.viewOnlyUserTypeApp,{credential:n}})).catch((e=>{if("identity-manager:not-authorized"===e.name)throw e;const t=e.details?.httpStatus;if(498===t)throw n.destroy(),new a.A("identity-manager:not-authenticated","User is not signed in.");if(400===t)throw new a.A("identity-manager:invalid-request");return{credential:n}}))})).then((e=>({credential:e.credential,viewOnly:i})))}setOAuthResponseHash(e){e&&("#"===e.charAt(0)&&(e=e.slice(1)),this._processOAuthPopupParams((0,h.zf)(e)))}setOAuthRedirectionHandler(e){this._oAuthRedirectFunc=e}setProtocolErrorHandler(e){this._protocolFunc=e}signIn(e,t,r={}){const i=(0,d.Tw)(),n=()=>{l?.remove(),u?.remove(),this.dialog?.destroy(),this.dialog=l=u=null},s=()=>{n(),this._oAuthDfd=null,i.reject(new a.A("identity-manager:user-aborted","ABORTED"))};r.signal&&(0,d.u7)(r.signal,(()=>{s()}));const o=new M({open:!0,resource:this.getResourceName(e),server:t.server});this.dialog=o,this.emit("dialog-create");let l=o.on("cancel",s),u=o.on("submit",(e=>{this.generateToken(t,e,{isAdmin:r.isAdmin,signal:r.signal}).then((s=>{n();const o=new J({userId:e.username,server:t.server??void 0,token:s.token,expires:null!=s.expires?Number(s.expires):null,ssl:!!s.ssl,isAdmin:r.isAdmin,validity:s.validity});i.resolve(o)})).catch((e=>{o.error=e,o.signingIn=!1}))}));return i.promise}oAuthSignIn(e,t,r,i){this._oAuthDfd=(0,d.Tw)();const n=this._oAuthDfd;let s;i?.signal&&(0,d.u7)(i.signal,(()=>{const e=this._oAuthDfd&&this._oAuthDfd.oAuthWin_;e&&!e.closed?e.close():this.dialog&&c()})),n.resUrl_=e,n.sinfo_=t,n.oinfo_=r;const o=r._oAuthCred;if(o.storage&&("authorization-code"===r.flowType||"auto"===r.flowType&&t.currentVersion>=8.4)){let e=crypto.getRandomValues(new Uint8Array(32));s=(0,h.$1)(e),o.codeVerifier=s,e=crypto.getRandomValues(new Uint8Array(32)),o.stateUID=(0,h.$1)(e),o.save()||(o.codeVerifier=s=null)}else o.codeVerifier=null;let l,u;this._getCodeChallenge(s).then((n=>{const s=!i||!1!==i.oAuthPopupConfirmation;if(!r.popup||!s)return void this._doOAuthSignIn(e,t,r,n);const o=new M({oAuthPrompt:!0,server:t.server,open:!0});this.dialog=o,this.emit("dialog-create"),l=o.on("cancel",c),u=o.on("submit",(()=>{p(),this._doOAuthSignIn(e,t,r,n)}))}));const c=()=>{p(),this._oAuthDfd=null,n.reject(new a.A("identity-manager:user-aborted","ABORTED"))},p=()=>{l?.remove(),u?.remove(),this.dialog?.destroy(),this.dialog=null};return n.promise}destroyCredentials(){this.credentials&&this.credentials.slice().forEach((e=>{e.destroy()})),this.emit("credentials-destroy")}enablePostMessageAuth(e="https://www.arcgis.com/sharing/rest"){this._postMessageAuthHandle&&this._postMessageAuthHandle.remove(),this._postMessageAuthHandle=(0,u.on)(window,"message",(t=>{if((t.origin===this._appOrigin||t.origin.endsWith(".arcgis.com"))&&"arcgis:auth:requestCredential"===t.data?.type){const r=t.source;this.getCredential(e).then((e=>{r.postMessage({type:"arcgis:auth:credential",credential:{expires:e.expires,server:e.server,ssl:e.ssl,token:e.token,userId:e.userId}},t.origin)})).catch((e=>{r.postMessage({type:"arcgis:auth:error",error:{name:e.name,message:e.message}},t.origin)}))}}))}disablePostMessageAuth(){this._postMessageAuthHandle&&(this._postMessageAuthHandle.remove(),this._postMessageAuthHandle=null)}_getOAuthLocationParams(){let e=window.location.hash;if(e){"#"===e.charAt(0)&&(e=e.slice(1));const t=(0,h.zf)(e);let r=!1;if(t.access_token&&t.expires_in&&t.state&&t.hasOwnProperty("username"))try{t.state=JSON.parse(t.state),t.state.portalUrl&&(this._oAuthLocationParams=t,r=!0)}catch{}else if(t.error&&t.error_description&&(console.log("IdentityManager OAuth Error: ",t.error," - ",t.error_description),"access_denied"===t.error&&(r=!0,t.state)))try{t.state=JSON.parse(t.state)}catch{}r&&(window.location.hash=t.state?.hash||"")}let t=window.location.search;if(t){"?"===t.charAt(0)&&(t=t.slice(1));const e=(0,h.zf)(t);let r=!1;if(e.code&&e.state)try{e.state=JSON.parse(e.state),e.state.portalUrl&&e.state.uid&&(this._oAuthLocationParams=e,r=!0)}catch{}else if(e.error&&e.error_description&&(console.log("IdentityManager OAuth Error: ",e.error," - ",e.error_description),"access_denied"===e.error&&(r=!0,e.state)))try{e.state=JSON.parse(e.state)}catch{}if(r){const t={...e};["code","error","error_description","message_code","persist","state"].forEach((e=>{delete t[e]}));const r=(0,h.x0)(t),i=window.location.pathname+(r?`?${r}`:"")+(e.state?.hash||"");window.history.replaceState(window.history.state,"",i)}}}_getOAuthToken(e,t,r,i,n){return e=e.replace(/^http:/i,"https:"),(0,o.A)(`${e}/sharing/rest/oauth2/token`,{authMode:"anonymous",method:"post",query:i&&n?{grant_type:"authorization_code",code:t,redirect_uri:i,client_id:r,code_verifier:n}:{grant_type:"refresh_token",refresh_token:t,client_id:r}}).then((e=>e.data))}async _getCodeChallenge(e){if(e&&globalThis.isSecureContext){const t=(new TextEncoder).encode(e),r=await crypto.subtle.digest("SHA-256",t);return(0,h.$1)(new Uint8Array(r))}return null}_pageShowHandler(e){if(e.persisted&&this.isBusy()&&this._rejectOnPersistedPageShow){const e=new a.A("identity-manager:user-aborted","ABORTED");this._errbackFunc(e)}}_findCredential(e,t){let r,i,n,s,o=-1;const a=t?.token,l=t?.resource,u=this._isServerRsrc(e)?"server":"portal",c=this.credentials.filter((t=>this._hasSameServerInstance(t.server,e)&&t.scope===u));if(e=l||e,c.length)if(1===c.length){if(r=c[0],n=this.findServerInfo(r.server),i=n?.owningSystemUrl,s=i?this.findCredential(i,r.userId):void 0,o=this._getIdenticalSvcIdx(e,r),!a)return-1===o&&r.resources.push(e),this._addResource(e,s),r;-1!==o&&(r.resources.splice(o,1),this._removeResource(e,s))}else{let t,r;if(c.some((a=>(r=this._getIdenticalSvcIdx(e,a),-1!==r&&(t=a,n=this.findServerInfo(t.server),i=n?.owningSystemUrl,s=i?this.findCredential(i,t.userId):void 0,o=r,!0)))),a)t&&(t.resources.splice(o,1),this._removeResource(e,s));else if(t)return this._addResource(e,s),t}}_findOAuthInfo(e){let t=this.findOAuthInfo(e);if(!t)for(const r of this.oAuthInfos)if(this._isIdProvider(r.portalUrl,e)){t=r;break}return t}_addResource(e,t){t&&-1===this._getIdenticalSvcIdx(e,t)&&t.resources.push(e)}_removeResource(e,t){let r=-1;t&&(r=this._getIdenticalSvcIdx(e,t),r>-1&&t.resources.splice(r,1))}_useProxy(e,t){return t?.isAdmin&&!(0,h.FX)(e.adminTokenServiceUrl,this._appOrigin)||!this._isPortalDomain(e.tokenServiceUrl)&&"10.1"===String(e.currentVersion)&&!(0,h.FX)(e.tokenServiceUrl,this._appOrigin)}_getOrigin(e){const t=new h.s0(e);return t.scheme+"://"+t.host+(null!=t.port?":"+t.port:"")}_getServerInstanceRoot(e){const t=e.toLowerCase();let r=t.indexOf(this._agsRest);return-1===r&&this._isAdminResource(e)&&(r=this._agsAdmin.test(e)?e.replace(this._agsAdmin,"$1").length:e.search(this._adminSvcs)),-1!==r||(0,N.$E)(t)||(r=t.indexOf("/sharing")),-1===r&&t.endsWith("/")&&(r=t.length-1),r>-1?e.slice(0,r):e}_hasSameServerInstance(e,t){return e.endsWith("/")&&(e=e.slice(0,-1)),e=e.toLowerCase(),t=this._getServerInstanceRoot(t).toLowerCase(),e=(0,N.qG)(e),t=(0,N.qG)(t),(e=e.slice(Math.max(0,e.indexOf(":"))))===t.slice(Math.max(0,t.indexOf(":")))}_sanitizeUrl(e){const t=(s.A.request.proxyUrl||"").toLowerCase(),r=t?e.toLowerCase().indexOf(t+"?"):-1;return-1!==r&&(e=e.slice(r+t.length+1)),e=(0,h.S8)(e),(0,h.An)(e).path}_isRESTService(e){return e.includes(this._agsRest)}_isAdminResource(e){return this._agsAdmin.test(e)||this._adminSvcs.test(e)}_isServerRsrc(e){return this._isRESTService(e)||this._isAdminResource(e)}_isIdenticalService(e,t){let r=!1;if(this._isRESTService(e)&&this._isRESTService(t)){const i=this._getSuffix(e).toLowerCase(),n=this._getSuffix(t).toLowerCase();if(r=i===n,!r){const e=/(.*)\/(MapServer|FeatureServer|UtilityNetworkServer).*/gi;r=i.replaceAll(e,"$1")===n.replaceAll(e,"$1")}}else this._isAdminResource(e)&&this._isAdminResource(t)?r=!0:this._isServerRsrc(e)||this._isServerRsrc(t)||!this._isPortalDomain(e)||(r=!0);return r}_isPortalDomain(e){const t=new h.s0(e.toLowerCase()),r=this._portalConfig;let i=this._gwDomains.some((e=>e.regex.test(t.uri)));return!i&&r&&(i=this._hasSameServerInstance(this._getServerInstanceRoot(r.restBaseUrl),t.uri)),i||s.A.portalUrl&&(i=(0,h.FX)(t,s.A.portalUrl,!0)),i||(i=this._portals.some((e=>this._hasSameServerInstance(e,t.uri)))),i=i||this._agsPortal.test(t.path),i}_isIdProvider(e,t){let r=-1,i=-1;this._gwDomains.forEach(((n,s)=>{-1===r&&n.regex.test(e)&&(r=s),-1===i&&n.regex.test(t)&&(i=s)}));let n=!1;if(r>-1&&i>-1&&(0===r||4===r?0!==i&&4!==i||(n=!0):1===r?1!==i&&2!==i||(n=!0):2===r?2===i&&(n=!0):3===r&&3===i&&(n=!0)),!n){const r=this.findServerInfo(t),i=r?.owningSystemUrl;i&&R(r)&&this._isPortalDomain(i)&&this._isIdProvider(e,i)&&(n=!0)}return n}_getIdenticalSvcIdx(e,t){let r=-1;for(let i=0;i<t.resources.length;i++){const n=t.resources[i];if(this._isIdenticalService(e,n)){r=i;break}}return r}_getSuffix(e){return e.replace(this._regexSDirUrl,"").replace(this._regexServerType,"$1")}_getTokenSvcUrl(e){let t,r,i;if(this._isRESTService(e)||this._isAdminResource(e)){const i=this._getServerInstanceRoot(e);return t=i+"/admin/generateToken",r=(0,o.A)(e=i+"/rest/info",{query:{f:"json"}}).then((e=>e.data)),{adminUrl:t,promise:r}}if(this._isPortalDomain(e)){let t="";if(this._gwDomains.some((r=>(r.regex.test(e)&&(t=r.tokenServiceUrl),!!t))),t||this._portals.some((r=>(this._hasSameServerInstance(r,e)&&(t=r+this._gwTokenUrl),!!t))),t||(i=e.toLowerCase().indexOf("/sharing"),-1!==i&&(t=e.slice(0,i)+this._gwTokenUrl)),t||(t=this._getOrigin(e)+this._gwTokenUrl),t){const r=new h.s0(e).port;/^http:\/\//i.test(e)&&"7080"===r&&(t=t.replace(/:7080/i,":7443")),t=t.replace(/http:/i,"https:")}return t}}_processOAuthResponseParams(e,t,r){const i=t._oAuthCred;if(e.code){const n=i.codeVerifier;return i.codeVerifier=null,i.stateUID=null,i.save(),this._getOAuthToken(r.server,e.code,t.appId,this._getRedirectURI(t,!0),n).then((n=>{const s=new J({userId:n.username,server:r.server??void 0,token:n.access_token,expires:Date.now()+1e3*n.expires_in,ssl:n.ssl,oAuthState:e.state,_oAuthCred:i});return t.userId=s.userId,i.storage=n.persist?Z:$,i.refreshToken=n.refresh_token,i.token=null,i.expires=n.refresh_token_expires_in?Date.now()+1e3*n.refresh_token_expires_in:null,i.userId=s.userId,i.ssl=s.ssl,i.save(),s}))}const n=new J({userId:e.username,server:r.server??void 0,token:e.access_token,expires:Date.now()+1e3*Number(e.expires_in),ssl:"true"===e.ssl,oAuthState:e.state,_oAuthCred:i});return t.userId=n.userId,i.storage=e.persist?Z:$,i.refreshToken=null,i.token=n.token,i.expires=n.expires,i.userId=n.userId,i.ssl=n.ssl,i.save(),Promise.resolve(n)}_processOAuthPopupParams(e){const t=this._oAuthDfd;if(this._oAuthDfd=null,t)if(clearInterval(this._oAuthIntervalId),this._oAuthOnPopupHandle?.remove(),e.error){const r="access_denied"===e.error,i=new a.A(r?"identity-manager:user-aborted":"identity-manager:authentication-failed",r?"ABORTED":"OAuth: "+e.error+" - "+e.error_description);t.reject(i)}else this._processOAuthResponseParams(e,t.oinfo_,t.sinfo_).then((e=>{t.resolve(e)})).catch((e=>{t.reject(e)}))}_setOAuthResponseQueryString(e){e&&("?"===e.charAt(0)&&(e=e.slice(1)),this._processOAuthPopupParams((0,h.zf)(e)))}async _exchangeToken(e,t,r){return(await(0,o.A)(`${e}/sharing/rest/oauth2/exchangeToken`,{authMode:"anonymous",method:"post",query:{f:"json",client_id:t,token:r}})).data.token}async _getPlatformSelf(e,t){if(this._getPlatformSelfError&&Date.now()-this._getPlatformSelfError[1]<1e3)throw this._getPlatformSelfError[0];e=e.replace(/^http:/i,"https:");try{const r=await(0,o.A)(`${e}/sharing/rest/oauth2/platformSelf`,{authMode:"anonymous",headers:{"X-Esri-Auth-Client-Id":t,"X-Esri-Auth-Redirect-Uri":window.location.href.replace(/#.*$/,"")},method:"post",query:{f:"json",expiration:30},withCredentials:!0});return this._getPlatformSelfError=null,r.data}catch(e){throw"OAUTH_0066"===e.details?.messageCode&&(this._getPlatformSelfError=[e,Date.now()]),e}}_getPortalSelf(e,t){let r;return this._gwDomains.some((t=>(t.regex.test(e)&&(r=t.customBaseUrl),!!r))),r?Promise.resolve({allSSL:!0,currentVersion:"8.4",customBaseUrl:r,portalMode:"multitenant",supportsOAuth:!0}):(this._appOrigin.startsWith("https:")?e=e.replace(/^http:/i,"https:").replace(/:7080/i,":7443"):/^http:/i.test(t)&&(e=e.replace(/^https:/i,"http:").replace(/:7443/i,":7080")),(0,o.A)(e,{query:{f:"json"},authMode:"anonymous",withCredentials:!0}).then((e=>e.data)))}_doPortalSignIn(e){const t=this._portalConfig,r=window.location.href,i=this.findServerInfo(e);return!(!t&&!this._isPortalDomain(r)||!(i?i.hasPortal||i.owningSystemUrl&&this._isPortalDomain(i.owningSystemUrl):this._isPortalDomain(e))||!(this._isIdProvider(r,e)||t&&(this._hasSameServerInstance(this._getServerInstanceRoot(t.restBaseUrl),e)||this._isIdProvider(t.restBaseUrl,e))||(0,h.FX)(r,e,!0)))}_checkProtocol(e,t,r,i){let n=!0;const s=i?t.adminTokenServiceUrl:t.tokenServiceUrl;return s.trim().toLowerCase().startsWith("https:")&&!this._appOrigin.startsWith("https:")&&(0,h.zs)(s)&&(n=!!this._protocolFunc&&!!this._protocolFunc({resourceUrl:e,serverInfo:t}),!n)&&r(new a.A("identity-manager:aborted","Aborted the Sign-In process to avoid sending password over insecure connection.")),n}_enqueue(e,t,r,i,n,s){return i||(i=(0,d.Tw)()),i.resUrl_=e,i.sinfo_=t,i.options_=r,i.admin_=n,i.refresh_=s,this._busy?this._hasSameServerInstance(this._getServerInstanceRoot(e),this._busy.resUrl_)?(this._oAuthDfd&&this._oAuthDfd.oAuthWin_&&this._oAuthDfd.oAuthWin_.focus(),this._soReqs.push(i)):this._xoReqs.push(i):this._doSignIn(i),i.promise}_doSignIn(e){this._busy=e,this._rejectOnPersistedPageShow=!1;const t=t=>{const r=e.options_?.resource,i=e.resUrl_,n=e.refresh_;let s=!1;this.credentials.includes(t)||(n&&this.credentials.includes(n)?(n.userId=t.userId,n.token=t.token,n.expires=t.expires,n.validity=t.validity,n.ssl=t.ssl,n.creationTime=t.creationTime,s=!0,t=n):this.credentials.push(t)),t.resources||(t.resources=[]),t.resources.includes(r||i)||t.resources.push(r||i),t.scope=this._isServerRsrc(i)?"server":"portal",t.emitTokenChange();const o=this._soReqs,a={};this._soReqs=[],o.forEach((e=>{if(!this._isIdenticalService(i,e.resUrl_)){const r=this._getSuffix(e.resUrl_);a[r]||(a[r]=!0,t.resources.push(e.resUrl_))}})),e.resolve(t),o.forEach((e=>{this._hasSameServerInstance(this._getServerInstanceRoot(i),e.resUrl_)?e.resolve(t):this._soReqs.push(e)})),this._busy=e.resUrl_=e.sinfo_=e.refresh_=null,s||this.emit("credential-create",{credential:t}),this._soReqs.length?this._doSignIn(this._soReqs.shift()):this._xoReqs.length&&this._doSignIn(this._xoReqs.shift())},r=t=>{e.reject(t),this._busy=e.resUrl_=e.sinfo_=e.refresh_=null,this._soReqs.length?this._doSignIn(this._soReqs.shift()):this._xoReqs.length&&this._doSignIn(this._xoReqs.shift())},i=(n,s,o,l)=>{const c=e.sinfo_,p=!e.options_||!1!==e.options_.prompt,m=c.hasPortal&&this._findOAuthInfo(e.resUrl_);let y,f;if(n)t(new J({userId:n,server:c.server??void 0,token:o??void 0,expires:null!=l?Number(l):null,ssl:!!s}));else if(window!==window.parent&&this._appUrlObj.query?.["arcgis-auth-origin"]&&this._appUrlObj.query?.["arcgis-auth-portal"]&&this._hasSameServerInstance(this._getServerInstanceRoot(this._appUrlObj.query["arcgis-auth-portal"]),e.resUrl_)){window.parent.postMessage({type:"arcgis:auth:requestCredential"},this._appUrlObj.query["arcgis-auth-origin"]);const i=(0,u.on)(window,"message",(e=>{e.source===window.parent&&e.data&&("arcgis:auth:credential"===e.data.type?(i.remove(),e.data.credential.expires<Date.now()?r(new a.A("identity-manager:credential-request-failed","Parent application's token has expired.")):t(new J(e.data.credential))):"arcgis:auth:error"===e.data.type&&(i.remove(),"tokenExpiredError"===e.data.error.name?r(new a.A("identity-manager:credential-request-failed","Parent application's token has expired.")):r(a.A.fromJSON(e.data.error))))}));(0,d.u7)(e.options_?.signal,(()=>{i.remove()}))}else if(m){let n=m._oAuthCred;if(!n){const e=new D(m,Z),t=new D(m,$);e.isValid()&&t.isValid()?e.expires>t.expires?(n=e,t.destroy()):(n=t,e.destroy()):n=e.isValid()?e:t,m._oAuthCred=n}if(n.isValid()){y=new J({userId:n.userId??void 0,server:c.server??void 0,token:n.token??void 0,expires:n.expires,ssl:n.ssl??void 0,_oAuthCred:n});const s=m.appId!==n.appId&&this._doPortalSignIn(e.resUrl_);s||n.refreshToken?(e._pendingDfd=n.refreshToken?this._getOAuthToken(c.server,n.refreshToken,n.appId).then((e=>(y.expires=Date.now()+1e3*e.expires_in,y.token=e.access_token,y))):Promise.resolve(y),e._pendingDfd.then((e=>s?this._exchangeToken(e.server,m.appId,e.token).then((t=>(e.token=t,e))).catch((()=>e)):e)).then((e=>{t(e)})).catch((e=>{const t=e.details?.httpStatus;t>0&&404!==t?(n.destroy(),i()):r(e)}))):t(y)}else if(this._oAuthLocationParams&&this._hasSameServerInstance(m.portalUrl,this._oAuthLocationParams.state.portalUrl)&&(this._oAuthLocationParams.access_token||this._oAuthLocationParams.code&&this._oAuthLocationParams.state.uid===n.stateUID&&n.codeVerifier)){const i=this._oAuthLocationParams;this._oAuthLocationParams=null,e._pendingDfd=this._processOAuthResponseParams(i,m,c).then((e=>{t(e)})).catch(r)}else{const i=()=>{p?e._pendingDfd=this.oAuthSignIn(e.resUrl_,c,m,e.options_).then(t,r):(f=new a.A("identity-manager:not-authenticated","User is not signed in."),r(f))};this._doPortalSignIn(e.resUrl_)?e._pendingDfd=this._getPlatformSelf(c.server,m.appId).then((e=>{(0,h.FX)(e.portalUrl,this._appOrigin,!0)?(y=new J({userId:e.username,server:c.server??void 0,expires:Date.now()+1e3*e.expires_in,token:e.token}),t(y)):i()})).catch(i):i()}}else if(p){if(this._checkProtocol(e.resUrl_,c,r,e.admin_)){let i=e.options_;e.admin_&&(i=i||{},i.isAdmin=!0),e._pendingDfd=this.signIn(e.resUrl_,c,i).then(t,r)}}else f=new a.A("identity-manager:not-authenticated","User is not signed in."),r(f)},n=()=>{const i=e.sinfo_,n=i.owningSystemUrl,s=e.options_;let o,a,l,u;if(s&&(o=s.token,a=s.error,l=s.prompt),u=this._findCredential(n,{token:o,resource:e.resUrl_}),!u)for(const e of this.credentials)if(this._isIdProvider(n,e.server)){u=e;break}if(u){const n=this.findCredential(e.resUrl_,u.userId);if(n)t(n);else if(E(i,this._legacyFed)){const e=u.toJSON();e.server=i.server,e.resources=null,t(new J(e))}else(e._pendingDfd=this.generateToken(this.findServerInfo(u.server),null,{serverUrl:e.resUrl_,token:u.token,signal:e.options_.signal,ssl:u.ssl})).then((r=>{t(new J({userId:u?.userId,server:i.server??void 0,token:r.token,expires:null!=r.expires?Number(r.expires):null,ssl:!!r.ssl,isAdmin:e.admin_,validity:r.validity}))}),r)}else this._busy=null,o&&(e.options_.token=null),(e._pendingDfd=this.getCredential(n.replace(/\/?$/,"/sharing"),{resource:e.resUrl_,owningTenant:i.owningTenant,signal:e.options_.signal,token:o,error:a,prompt:l})).then((()=>{this._enqueue(e.resUrl_,e.sinfo_,e.options_,e,e.admin_)}),(t=>{e.resUrl_=e.sinfo_=e.refresh_=null,e.reject(t)}))};this._errbackFunc=r;const s=e.sinfo_.owningSystemUrl,o=this._isServerRsrc(e.resUrl_),l=e.sinfo_._restInfoPms;l?l.promise.then((t=>{const r=e.sinfo_;if(r._restInfoPms){r.adminTokenServiceUrl=r._restInfoPms.adminUrl,r._restInfoPms=null,r.tokenServiceUrl=((0,p.wc)("authInfo.tokenServicesUrl",t)||(0,p.wc)("authInfo.tokenServiceUrl",t)||(0,p.wc)("tokenServiceUrl",t))??null,r.shortLivedTokenValidity=(0,p.wc)("authInfo.shortLivedTokenValidity",t)??null,r.currentVersion=t.currentVersion,r.owningTenant=t.owningTenant;const e=r.owningSystemUrl=t.owningSystemUrl;e&&this._portals.push(e)}o&&r.owningSystemUrl?n():i()}),(()=>{e.sinfo_._restInfoPms=null;const t=new a.A("identity-manager:server-identification-failed","Unknown resource - could not find token service endpoint.");r(t)})):o&&s?n():e.sinfo_._selfReq?e.sinfo_._selfReq.selfDfd.then((t=>{const r={};let i,n,s,o;return t&&(i=t.user?.username,r.username=i,r.allSSL=t.allSSL,n=t.supportsOAuth,o=parseFloat(t.currentVersion),"multitenant"===t.portalMode&&(s=t.customBaseUrl),e.sinfo_.currentVersion=o),e.sinfo_.webTierAuth=!!i,i&&this.normalizeWebTierAuth?this.generateToken(e.sinfo_,null,{ssl:r.allSSL}).catch((()=>null)).then((e=>(r.portalToken=e?.token,r.tokenExpiration=e?.expires,r))):!i&&n&&o>=4.4&&!this._findOAuthInfo(e.resUrl_)?this._generateOAuthInfo({portalUrl:e.sinfo_.server,customBaseUrl:s,owningTenant:e.sinfo_._selfReq.owningTenant}).catch((()=>null)).then((()=>r)):r})).catch((()=>null)).then((t=>{e.sinfo_._selfReq=null,t?i(t.username,t.allSSL,t.portalToken,t.tokenExpiration):i()})):i()}_generateOAuthInfo(e){let t,r=null,i=e.portalUrl;const n=e.customBaseUrl,s=e.owningTenant,a=!this._defaultOAuthInfo&&this._createDefaultOAuthInfo&&!this._hasTestedIfAppIsOnPortal;if(a){r=window.location.href;let e=r.indexOf("?");e>-1&&(r=r.slice(0,e)),e=r.search(/\/(apps|home)\//),r=e>-1?r.slice(0,e):null}return a&&r?(this._hasTestedIfAppIsOnPortal=!0,t=(0,o.A)(r+"/sharing/rest",{query:{f:"json"}}).then((()=>{this._defaultOAuthInfo=new j({appId:"arcgisonline",popupCallbackUrl:r+"/home/oauth-callback.html"})}))):t=Promise.resolve(),t.then((()=>{if(this._defaultOAuthInfo)return i=i.replace(/^http:/i,"https:"),(0,o.A)(i+"/sharing/rest/oauth2/validateRedirectUri",{query:{accountId:s,client_id:this._defaultOAuthInfo.appId,redirect_uri:(0,h.s2)(this._defaultOAuthInfo.popupCallbackUrl),f:"json"}}).then((e=>{if(e.data.valid){const t=this._defaultOAuthInfo.clone();e.data.urlKey&&n?t.portalUrl="https://"+e.data.urlKey.toLowerCase()+"."+n:t.portalUrl=i,t.popup=window!==window.top||!((0,h.FX)(i,this._appOrigin)||this._gwDomains.some((e=>e.regex.test(i)&&e.regex.test(this._appOrigin)))),this.oAuthInfos.push(t)}}))}))}_doOAuthSignIn(e,t,r,i){const n=r._oAuthCred,s={portalUrl:r.portalUrl};!r.popup&&r.preserveUrlHash&&window.location.hash&&(s.hash=window.location.hash),n.stateUID&&(s.uid=n.stateUID);const o={client_id:r.appId,response_type:n.codeVerifier?"code":"token",state:JSON.stringify(s),expiration:r.expiration,locale:r.locale,redirect_uri:this._getRedirectURI(r,!!n.codeVerifier)};r.forceLogin&&(o.force_login=!0),r.forceUserId&&r.userId&&(o.prepopulatedusername=r.userId),!r.popup&&this._doPortalSignIn(e)&&(o.redirectToUserOrgUrl=!0),n.codeVerifier&&(o.code_challenge=i||n.codeVerifier,o.code_challenge_method=i?"S256":"plain");const l=r.portalUrl.replace(/^http:/i,"https:")+"/sharing/oauth2/authorize",c=l+"?"+(0,h.x0)(o);if(r.popup){const e=window.open(c,"esriJSAPIOAuth",r.popupWindowFeatures);if(e)e.focus(),this._oAuthDfd.oAuthWin_=e,this._oAuthIntervalId=setInterval((()=>{if(e.closed){clearInterval(this._oAuthIntervalId),this._oAuthOnPopupHandle.remove();const e=this._oAuthDfd;if(e){const t=new a.A("identity-manager:user-aborted","ABORTED");e.reject(t)}}}),500),this._oAuthOnPopupHandle=(0,u.on)(window,["arcgis:auth:hash","arcgis:auth:location:search"],(e=>{"arcgis:auth:hash"===e.type?this.setOAuthResponseHash(e.detail):this._setOAuthResponseQueryString(e.detail)}));else{const e=new a.A("identity-manager:popup-blocked","ABORTED");this._oAuthDfd.reject(e)}}else this._rejectOnPersistedPageShow=!0,this._oAuthRedirectFunc?this._oAuthRedirectFunc({authorizeParams:o,authorizeUrl:l,resourceUrl:e,serverInfo:t,oAuthInfo:r}):window.location.href=c}_getRedirectURI(e,t){const r=window.location.href.replace(/#.*$/,"");if(e.popup)return(0,h.s2)(e.popupCallbackUrl);if(t){const e=(0,h.An)(r);return e.query&&["code","error","error_description","message_code","persist","state"].forEach((t=>{delete e.query[t]})),(0,h.a6)(e.path,e.query)}return r}}W.prototype.declaredClass="esri.identity.IdentityManagerBase";let J=class extends l.A.EventedAccessor{constructor(e){super(e),this._oAuthCred=null,this.tokenRefreshBuffer=2,e?._oAuthCred&&(this._oAuthCred=e._oAuthCred)}initialize(){this.resources=this.resources||[],null==this.creationTime&&(this.creationTime=Date.now())}refreshToken(){const e=i.id,t=e.findServerInfo(this.server),r=t?.owningSystemUrl,n=!!r&&"server"===this.scope,s=n&&E(t,e._legacyFed),o=t.webTierAuth,a=o&&e.normalizeWebTierAuth,l=F[this.server],u=l?.[this.userId];let c,p=this.resources&&this.resources[0],d=n?e.findServerInfo(r):null,h={username:this.userId,password:u};if(o&&!a)return;n&&!d&&e.serverInfos.some((t=>(e._isIdProvider(r,t.server)&&(d=t),!!d)));const m=d?e.findCredential(d.server,this.userId):null;if(!n||m){if(!s){if(n)c={serverUrl:p,token:m?.token,ssl:m?.ssl};else if(a)h=null,c={ssl:this.ssl};else{if(!u){let r;return p&&(p=e._sanitizeUrl(p),this._enqueued=1,r=e._enqueue(p,t,null,null,this.isAdmin,this),r.then((()=>{this._enqueued=0,this.refreshServerTokens()})).catch((()=>{this._enqueued=0}))),r}this.isAdmin&&(c={isAdmin:!0})}return e.generateToken(n?d:t,n?null:h,c).then((e=>{this.token=e.token,this.expires=null!=e.expires?Number(e.expires):null,this.creationTime=Date.now(),this.validity=e.validity,this.emitTokenChange(),this.refreshServerTokens()})).catch((()=>{}))}m?.refreshToken()}}refreshServerTokens(){if("portal"===this.scope){const e=i.id;e.credentials.forEach((t=>{const r=e.findServerInfo(t.server),i=r?.owningSystemUrl;t!==this&&t.userId===this.userId&&i&&"server"===t.scope&&(e._hasSameServerInstance(this.server,i)||e._isIdProvider(i,this.server))&&(E(r,e._legacyFed)?(t.token=this.token,t.expires=this.expires,t.creationTime=this.creationTime,t.validity=this.validity,t.emitTokenChange()):t.refreshToken())}))}}emitTokenChange(e){clearTimeout(this._refreshTimer);const t=i.id,r=this.server?t.findServerInfo(this.server):null,n=r?.owningSystemUrl,s=n?t.findServerInfo(n):null;!1===e||n&&"portal"!==this.scope&&(!s?.webTierAuth||t.normalizeWebTierAuth)||null==this.expires&&null==this.validity||this._startRefreshTimer(),this.emit("token-change")}destroy(){this.userId=this.server=this.token=this.expires=this.validity=this.resources=this.creationTime=null,this._oAuthCred&&(this._oAuthCred.destroy(),this._oAuthCred=null);const e=i.id,t=e.credentials.indexOf(this);t>-1&&e.credentials.splice(t,1),this.emitTokenChange(),this.emit("destroy")}toJSON(){const e=(0,c.oy)({userId:this.userId,server:this.server,token:this.token,expires:this.expires,validity:this.validity,ssl:this.ssl,isAdmin:this.isAdmin,creationTime:this.creationTime,scope:this.scope}),t=this.resources;return t&&t.length>0&&(e.resources=t.slice()),e}_startRefreshTimer(){clearTimeout(this._refreshTimer);const e=6e4*this.tokenRefreshBuffer,t=2**31-1;let r=(this.validity?this.creationTime+6e4*this.validity:this.expires)-Date.now();r<0?r=0:r>t&&(r=t),this._refreshTimer=setTimeout(this.refreshToken.bind(this),r>e?r-e:r)}};(0,n._)([(0,m.MZ)()],J.prototype,"creationTime",void 0),(0,n._)([(0,m.MZ)()],J.prototype,"expires",void 0),(0,n._)([(0,m.MZ)()],J.prototype,"isAdmin",void 0),(0,n._)([(0,m.MZ)()],J.prototype,"oAuthState",void 0),(0,n._)([(0,m.MZ)()],J.prototype,"resources",void 0),(0,n._)([(0,m.MZ)()],J.prototype,"scope",void 0),(0,n._)([(0,m.MZ)()],J.prototype,"server",void 0),(0,n._)([(0,m.MZ)()],J.prototype,"ssl",void 0),(0,n._)([(0,m.MZ)()],J.prototype,"token",void 0),(0,n._)([(0,m.MZ)()],J.prototype,"tokenRefreshBuffer",void 0),(0,n._)([(0,m.MZ)()],J.prototype,"userId",void 0),(0,n._)([(0,m.MZ)()],J.prototype,"validity",void 0),J=(0,n._)([(0,y.$)("esri.identity.Credential")],J);class L extends W{}L.prototype.declaredClass="esri.identity.IdentityManager";const B=new L;(0,i.Aq)(B)},20819:(e,t,r)=>{r.d(t,{A:()=>v});var i,n=r(82392),s=r(20857),o=r(20879),a=r(3438),l=r(14755),u=r(84977),c=r(81482),p=(r(6273),r(80861),r(67498),r(25376)),d=r(26325),h=r(48524),m=r(65648),y=r(36979),f=r(93122);let g=i=class extends((0,l.O)(u.oY)){constructor(e){super(e),this.barrierType=null,this.costs=null,this.geometry=null,this.name=null,this.objectId=null,this.popupTemplate=null,this.scaleFactor=null,this.symbol=null,this.type="polygon-barrier"}readCosts(e,t){return(0,y.lh)(t.attributes,"Attr_")}writeCosts(e,t){(0,y.p3)(e,t,"Attr_")}static fromGraphic(e){return new i({barrierType:null!=e.attributes.BarrierType?f.iM.fromJSON(e.attributes.BarrierType):null,costs:null!=e.attributes.Costs?(0,y.aZ)(JSON.parse(e.attributes.Costs)):null,geometry:e.geometry,name:e.attributes.Name??null,objectId:e.attributes.ObjectID??e.attributes.__OBJECTID,popupTemplate:e.popupTemplate,scaleFactor:e.attributes.ScaleFactor??null,symbol:e.symbol})}toGraphic(){const e={ObjectID:this.objectId,BarrierType:null!=this.barrierType?f.iM.toJSON(this.barrierType):null,Costs:null!=this.costs?JSON.stringify((0,y.nA)(this.costs)):null,Name:this.name??null,ScaleFactor:this.scaleFactor??null};return new s.A({geometry:this.geometry,attributes:e,symbol:this.symbol,popupTemplate:this.popupTemplate})}};g.fields=[{name:"ObjectID",alias:"ObjectID",type:"esriFieldTypeOID"},{name:"BarrierType",alias:"Barrier Type",type:"esriFieldTypeInteger"},{name:"Costs",alias:"Costs",type:"esriFieldTypeString"},{name:"Name",alias:"Name",type:"esriFieldTypeString"},{name:"ScaleFactor",alias:"Scale Factor",type:"esriFieldTypeDouble"}],(0,n._)([(0,c.MZ)({type:f.iM.apiValues,json:{name:"attributes.BarrierType",read:{reader:f.iM.read},write:{writer:f.iM.write}}})],g.prototype,"barrierType",void 0),(0,n._)([(0,c.MZ)()],g.prototype,"costs",void 0),(0,n._)([(0,p.w)("costs",["attributes"])],g.prototype,"readCosts",null),(0,n._)([(0,h.K)("costs")],g.prototype,"writeCosts",null),(0,n._)([(0,c.MZ)({type:m.A,json:{write:!0}})],g.prototype,"geometry",void 0),(0,n._)([(0,c.MZ)({json:{name:"attributes.Name"}})],g.prototype,"name",void 0),(0,n._)([(0,c.MZ)({json:{name:"attributes.ObjectID"}})],g.prototype,"objectId",void 0),(0,n._)([(0,c.MZ)({type:o.A})],g.prototype,"popupTemplate",void 0),(0,n._)([(0,c.MZ)()],g.prototype,"scaleFactor",void 0),(0,n._)([(0,c.MZ)({types:a.Es})],g.prototype,"symbol",void 0),(0,n._)([(0,c.MZ)({readOnly:!0,json:{read:!1}})],g.prototype,"type",void 0),g=i=(0,n._)([(0,d.$)("esri.rest.support.PolygonBarrier")],g);const v=g},24376:(e,t,r)=>{r.r(t),r.d(t,{default:()=>Y});var i,n=r(82392),s=(r(3313),r(20879)),o=(r(42957),r(8499),r(72502),r(2394),r(1318),r(46243),r(79645),r(1851),r(29221)),a=r(83015),l=r(38116),u=r(14755),c=r(62991),p=r(70214),d=r(15565),h=r(80861),m=r(67214),y=r(37623),f=r(81482),g=r(8636),v=r(25376),_=r(26325),w=r(54483),b=r(45449),T=r(30179),S=r(20923),A=r(27303),I=r(23091),M=r(71519),O=r(4648),D=r(60368),C=r(51177),k=r(22111),x=r(2960),j=r(9014),U=r(16948),P=r(45352),N=r(83693),F=r(46227),R=r(15724),E=r(6488),Z=r(84977);r(6273),r(67498);let $=i=class extends Z.oY{constructor(){super(...arguments),this.age=null,this.ageReceived=null,this.displayCount=null,this.maxObservations=1}clone(){return new i({age:this.age,ageReceived:this.ageReceived,displayCount:this.displayCount,maxObservations:this.maxObservations})}};(0,n._)([(0,f.MZ)({type:Number,json:{write:!0}})],$.prototype,"age",void 0),(0,n._)([(0,f.MZ)({type:Number,json:{write:!0}})],$.prototype,"ageReceived",void 0),(0,n._)([(0,f.MZ)({type:Number,json:{write:!0}})],$.prototype,"displayCount",void 0),(0,n._)([(0,f.MZ)({type:Number,json:{write:!0}})],$.prototype,"maxObservations",void 0),$=i=(0,n._)([(0,_.$)("esri.layers.support.PurgeOptions")],$);const W=$;var J=r(99650),L=r(33432),B=r(95610),z=r(44223),V=r(29759),X=r(44153),q=r(8e3);const G=(0,N.p)();function H(e,t){return new c.A("layer:unsupported",`Layer (${e.title}, ${e.id}) of type '${e.declaredClass}' ${t}`,{layer:e})}let K=class extends((0,M.J)((0,I.F)((0,S.dM)((0,x.e)((0,k.j)((0,C.J)((0,T.b)((0,O.q)((0,D.A)((0,m.P)((0,A.d)((0,u.O)(b.A))))))))))))){constructor(...e){super(...e),this.copyright=null,this.definitionExpression=null,this.displayField=null,this.elevationInfo=null,this.fields=null,this.fieldsIndex=null,this.geometryDefinition=null,this.geometryType=null,this.labelsVisible=!0,this.labelingInfo=null,this.legendEnabled=!0,this.maxReconnectionAttempts=0,this.maxReconnectionInterval=20,this.maxScale=0,this.minScale=0,this.objectIdField=null,this.operationalLayerType="ArcGISStreamLayer",this.outFields=["*"],this.popupEnabled=!0,this.popupTemplate=null,this.purgeOptions=new W,this.refreshInterval=0,this.screenSizePerspectiveEnabled=!0,this.sourceJSON=null,this.spatialReference=X.A.WGS84,this.type="stream",this.url=null,this.updateInterval=300,this.useViewTime=!0,this.webSocketUrl=null,this._debouncedSaveOperations=(0,y.sg)((async(e,t,i)=>{const{save:n,saveAs:s}=await r.e(102).then(r.bind(r,8380));switch(e){case V.X.SAVE:return n(this,t);case V.X.SAVE_AS:return s(this,i,t)}}))}normalizeCtorArgs(e,t){return"string"==typeof e?{url:e,...t}:e}load(e){if(!("WebSocket"in globalThis))return this.addResolvingPromise(Promise.reject(new c.A("stream-layer:websocket-unsupported","WebSocket is not supported in this browser. StreamLayer will not have real-time connection with the stream service."))),Promise.resolve(this);const t=null!=e?e.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Stream Service","Feed"]},e).catch(y.QP).then((()=>this._fetchService(t)))),Promise.resolve(this)}get defaultPopupTemplate(){return this.createPopupTemplate()}set featureReduction(e){const t=this._normalizeFeatureReduction(e);this._set("featureReduction",t)}set renderer(e){(0,F.yp)(e,this.fieldsIndex),this._set("renderer",e)}readRenderer(e,t,r){t=t.layerDefinition||t;const i=t.drawingInfo?.renderer;if(i){const e=(0,o.L)(i,t,r)||void 0;return e||h.A.getLogger(this).error("Failed to create renderer",{rendererDefinition:t.drawingInfo.renderer,layer:this,context:r}),e}return(0,U.PD)(t,r)}async connect(e){const[{createConnection:t}]=await Promise.all([r.e(102).then(r.bind(r,29155)),this.load()]),i=this.geometryType?w.g.toJSON(this.geometryType):null,{customParameters:n=null,definitionExpression:s=null,geometryDefinition:o=null,maxReconnectionAttempts:a=0,maxReconnectionInterval:l=20,spatialReference:u=this.spatialReference}=e||this.createConnectionParameters(),c=t(this.parsedUrl,this.spatialReference,u,i,s,o,a,l,n??void 0),d=(0,p.vE)([this.on("send-message-to-socket",(e=>c.sendMessageToSocket(e))),this.on("send-message-to-client",(e=>c.sendMessageToClient(e)))]);return c.once("destroy",d.remove),c}createConnectionParameters(){return{spatialReference:this.spatialReference,customParameters:this.customParameters,definitionExpression:this.definitionExpression,geometryDefinition:this.geometryDefinition,maxReconnectionAttempts:this.maxReconnectionAttempts,maxReconnectionInterval:this.maxReconnectionInterval}}createPopupTemplate(e){return(0,B.tn)(this,e)}createQuery(){const e=new L.A;return e.returnGeometry=!0,e.outFields=["*"],e.where=this.definitionExpression||"1=1",e}getFieldDomain(e,t){if(!this.fields)return null;let r=null;return this.fields.some((t=>(t.name===e&&(r=t.domain),!!r))),r}getField(e){return this.fieldsIndex.get(e)}serviceSupportsSpatialReference(e){return!0}sendMessageToSocket(e){this.emit("send-message-to-socket",e)}sendMessageToClient(e){this.emit("send-message-to-client",e)}async save(e){return this._debouncedSaveOperations(V.X.SAVE,e)}async saveAs(e,t){return this._debouncedSaveOperations(V.X.SAVE_AS,t,e)}write(e,t){const r=t?.messages;return this.webSocketUrl?(r?.push(H(this,"using a custom websocket connection cannot be written to web scenes and web maps")),null):this.parsedUrl?super.write(e,t):(r?.push(H(this,"using a client-side only connection without a url cannot be written to web scenes and web maps")),null)}async _fetchService(e){if(!this.webSocketUrl&&this.parsedUrl){if(!this.sourceJSON){const{data:t}=await(0,l.A)(this.parsedUrl.path,{query:{f:"json",...this.customParameters,...this.parsedUrl.query},responseType:"json",signal:e});this.sourceJSON=t}}else{if(!this.timeInfo?.trackIdField)throw new c.A("stream-layer:missing-metadata","The stream layer trackIdField must be specified.");if(!this.objectIdField){const e=this.fields.find((e=>"oid"===e.type))?.name;if(!e)throw new c.A("stream-layer:missing-metadata","The stream layer objectIdField must be specified.");this.objectIdField=e}if(!this.fields)throw new c.A("stream-layer:missing-metadata","The stream layer fields must be specified.");if(this.fields.some((e=>e.name===this.objectIdField))||this.fields.push(new P.A({name:this.objectIdField,alias:this.objectIdField,type:"oid"})),!this.geometryType)throw new c.A("stream-layer:missing-metadata","The stream layer geometryType must be specified.");this.webSocketUrl&&(this.url=this.webSocketUrl)}return this.read(this.sourceJSON,{origin:"service",portalItem:this.portalItem,portal:this.portalItem?.portal,url:this.parsedUrl}),(0,F.yp)(this.renderer,this.fieldsIndex),(0,F.sv)(this.timeInfo,this.fieldsIndex),this.objectIdField||(this.objectIdField="__esri_stream_id__"),(0,J.L)(this,{origin:"service"})}};(0,n._)([(0,f.MZ)({type:String})],K.prototype,"copyright",void 0),(0,n._)([(0,f.MZ)({readOnly:!0})],K.prototype,"defaultPopupTemplate",null),(0,n._)([(0,f.MZ)({type:String,json:{name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],K.prototype,"definitionExpression",void 0),(0,n._)([(0,f.MZ)({type:String})],K.prototype,"displayField",void 0),(0,n._)([(0,f.MZ)({type:z.A})],K.prototype,"elevationInfo",void 0),(0,n._)([(0,f.MZ)({json:{origins:{"web-map":{read:!1,write:!1},"portal-item":{read:!1,write:!1},"web-scene":{read:!1,write:!1}}}})],K.prototype,"featureReduction",null),(0,n._)([(0,f.MZ)(G.fields)],K.prototype,"fields",void 0),(0,n._)([(0,f.MZ)(G.fieldsIndex)],K.prototype,"fieldsIndex",void 0),(0,n._)([(0,f.MZ)({type:q.A,json:{name:"layerDefinition.definitionGeometry",write:!0}})],K.prototype,"geometryDefinition",void 0),(0,n._)([(0,f.MZ)({type:w.g.apiValues,json:{read:{reader:w.g.read}}})],K.prototype,"geometryType",void 0),(0,n._)([(0,f.MZ)(j.kF)],K.prototype,"labelsVisible",void 0),(0,n._)([(0,f.MZ)({type:[R.A],json:{name:"layerDefinition.drawingInfo.labelingInfo",read:{reader:E.w},write:!0}})],K.prototype,"labelingInfo",void 0),(0,n._)([(0,f.MZ)(j.fV)],K.prototype,"legendEnabled",void 0),(0,n._)([(0,f.MZ)({type:["show","hide"],json:{origins:{"portal-item":{read:!1,write:!1}}}})],K.prototype,"listMode",void 0),(0,n._)([(0,f.MZ)({type:g.jz})],K.prototype,"maxReconnectionAttempts",void 0),(0,n._)([(0,f.MZ)({type:g.jz})],K.prototype,"maxReconnectionInterval",void 0),(0,n._)([(0,f.MZ)(j.hG)],K.prototype,"maxScale",void 0),(0,n._)([(0,f.MZ)(j.hn)],K.prototype,"minScale",void 0),(0,n._)([(0,f.MZ)({type:String})],K.prototype,"objectIdField",void 0),(0,n._)([(0,f.MZ)({value:"ArcGISStreamLayer",type:["ArcGISStreamLayer"]})],K.prototype,"operationalLayerType",void 0),(0,n._)([(0,f.MZ)({readOnly:!0})],K.prototype,"outFields",void 0),(0,n._)([(0,f.MZ)(j.M6)],K.prototype,"popupEnabled",void 0),(0,n._)([(0,f.MZ)({type:s.A,json:{name:"popupInfo",write:!0}})],K.prototype,"popupTemplate",void 0),(0,n._)([(0,f.MZ)({type:W})],K.prototype,"purgeOptions",void 0),(0,n._)([(0,f.MZ)({json:{read:!1,write:!1}})],K.prototype,"refreshInterval",void 0),(0,n._)([(0,f.MZ)({types:a.H,json:{origins:{service:{write:{target:"drawingInfo.renderer",enabled:!1}},"web-scene":{name:"layerDefinition.drawingInfo.renderer",types:a.X,write:!0}},write:{target:"layerDefinition.drawingInfo.renderer"}}})],K.prototype,"renderer",null),(0,n._)([(0,v.w)("service","renderer",["drawingInfo.renderer","defaultSymbol"]),(0,v.w)("renderer",["layerDefinition.drawingInfo.renderer","layerDefinition.defaultSymbol"])],K.prototype,"readRenderer",null),(0,n._)([(0,f.MZ)((()=>{const e=(0,d.o8)(j.PY);return e.json.origins["portal-item"]={read:!1,write:!1},e})())],K.prototype,"screenSizePerspectiveEnabled",void 0),(0,n._)([(0,f.MZ)()],K.prototype,"sourceJSON",void 0),(0,n._)([(0,f.MZ)({type:X.A,json:{origins:{service:{read:{source:"spatialReference"}}}}})],K.prototype,"spatialReference",void 0),(0,n._)([(0,f.MZ)({json:{read:!1}})],K.prototype,"type",void 0),(0,n._)([(0,f.MZ)(j.OZ)],K.prototype,"url",void 0),(0,n._)([(0,f.MZ)({type:Number})],K.prototype,"updateInterval",void 0),(0,n._)([(0,f.MZ)({json:{read:!1,write:!1}})],K.prototype,"useViewTime",void 0),(0,n._)([(0,f.MZ)({type:String})],K.prototype,"webSocketUrl",void 0),K=(0,n._)([(0,_.$)("esri.layers.StreamLayer")],K);const Y=K},25577:(e,t,r)=>{r.d(t,{A:()=>h});var i=r(82392),n=r(14755),s=r(84977),o=r(81482),a=(r(6273),r(80861),r(67498),r(85716)),l=r(25376),u=r(26325),c=r(48524),p=r(93122);let d=class extends((0,n.O)(s.oY)){constructor(e){super(e),this.attributeParameterValues=null,this.description=null,this.distanceAttributeName=null,this.id=null,this.impedanceAttributeName=null,this.name=null,this.restrictionAttributeNames=null,this.simplificationTolerance=null,this.simplificationToleranceUnits=null,this.timeAttributeName=null,this.type=null,this.useHierarchy=null,this.uturnAtJunctions=null}readId(e,t){return t.id??t.itemId??null}readRestrictionAttributes(e,t){const{restrictionAttributeNames:r}=t;return null==r?null:r.map((e=>p.OC.fromJSON(e)))}writeRestrictionAttributes(e,t,r){null!=e&&(t[r]=e.map((e=>p.OC.toJSON(e))))}};(0,i._)([(0,o.MZ)({type:[Object],json:{write:!0}})],d.prototype,"attributeParameterValues",void 0),(0,i._)([(0,o.MZ)({type:String,json:{write:!0}})],d.prototype,"description",void 0),(0,i._)([(0,a.e)(p.dd,{ignoreUnknown:!1})],d.prototype,"distanceAttributeName",void 0),(0,i._)([(0,o.MZ)({type:String,json:{write:!0}})],d.prototype,"id",void 0),(0,i._)([(0,l.w)("id",["id","itemId"])],d.prototype,"readId",null),(0,i._)([(0,a.e)(p.et,{ignoreUnknown:!1})],d.prototype,"impedanceAttributeName",void 0),(0,i._)([(0,o.MZ)({type:String,json:{write:!0}})],d.prototype,"name",void 0),(0,i._)([(0,o.MZ)({type:[String],json:{write:!0}})],d.prototype,"restrictionAttributeNames",void 0),(0,i._)([(0,l.w)("restrictionAttributeNames")],d.prototype,"readRestrictionAttributes",null),(0,i._)([(0,c.K)("restrictionAttributeNames")],d.prototype,"writeRestrictionAttributes",null),(0,i._)([(0,o.MZ)({type:Number,json:{write:{allowNull:!0}}})],d.prototype,"simplificationTolerance",void 0),(0,i._)([(0,a.e)(p.hY)],d.prototype,"simplificationToleranceUnits",void 0),(0,i._)([(0,a.e)(p.Mm,{ignoreUnknown:!1})],d.prototype,"timeAttributeName",void 0),(0,i._)([(0,a.e)(p.ow)],d.prototype,"type",void 0),(0,i._)([(0,o.MZ)({type:Boolean,json:{write:!0}})],d.prototype,"useHierarchy",void 0),(0,i._)([(0,a.e)(p.hE)],d.prototype,"uturnAtJunctions",void 0),d=(0,i._)([(0,u.$)("esri.rest.support.TravelMode")],d);const h=d},33294:(e,t,r)=>{r.d(t,{A:()=>v});var i,n=r(82392),s=r(20857),o=r(20879),a=r(3438),l=r(14755),u=r(84977),c=r(81482),p=(r(6273),r(80861),r(67498),r(25376)),d=r(26325),h=r(48524),m=r(1912),y=r(36979),f=r(93122);let g=i=class extends((0,l.O)(u.oY)){constructor(e){super(e),this.arriveCurbApproach=null,this.arriveTime=null,this.arriveTimeOffset=null,this.bearing=null,this.bearingTol=null,this.cumulativeCosts=null,this.cumulativeDistance=null,this.cumulativeDuration=null,this.curbApproach=null,this.departCurbApproach=null,this.departTime=null,this.departTimeOffset=null,this.distanceToNetworkInMeters=null,this.geometry=null,this.lateDuration=null,this.locationType=null,this.name=null,this.navLatency=null,this.objectId=null,this.popupTemplate=null,this.posAlong=null,this.routeName=null,this.serviceCosts=null,this.serviceDistance=null,this.serviceDuration=null,this.sequence=null,this.sideOfEdge=null,this.snapX=null,this.snapY=null,this.snapZ=null,this.sourceId=null,this.sourceOid=null,this.status=null,this.symbol=null,this.timeWindowEnd=null,this.timeWindowEndOffset=null,this.timeWindowStart=null,this.timeWindowStartOffset=null,this.type="stop",this.violations=null,this.waitDuration=null,this.wait=null}readArriveTimeOffset(e,t){return(0,y.Zn)(t.attributes.ArriveTime,t.attributes.ArriveTimeUTC)}readCumulativeCosts(e,t){return(0,y.lh)(t.attributes,"Cumul_")}readDepartTimeOffset(e,t){return(0,y.Zn)(t.attributes.DepartTime,t.attributes.DepartTimeUTC)}readServiceCosts(e,t){return(0,y.lh)(t.attributes,"Attr_")}writeServiceCosts(e,t){(0,y.p3)(e,t,"Attr_")}writeTimeWindowEnd(e,t){null!=e&&(t.attributes||(t.attributes={}),t.attributes.TimeWindowEnd=e.getTime())}writeTimeWindowStart(e,t){null!=e&&(t.attributes||(t.attributes={}),t.attributes.TimeWindowStart=e.getTime())}readViolations(e,t){return(0,y.lh)(t.attributes,"Violation_")}readWait(e,t){return(0,y.lh)(t.attributes,"Wait_")}static fromGraphic(e){return new i({arriveCurbApproach:null!=e.attributes.ArrivalCurbApproach?f.JJ.fromJSON(e.attributes.ArrivalCurbApproach):null,arriveTime:null!=e.attributes.ArrivalTime?new Date(e.attributes.ArrivalTime):null,arriveTimeOffset:e.attributes.ArrivalUTCOffset,cumulativeCosts:null!=e.attributes.CumulativeCosts?(0,y.aZ)(JSON.parse(e.attributes.CumulativeCosts)):null,cumulativeDistance:e.attributes.CumulativeMeters??null,cumulativeDuration:e.attributes.CumulativeMinutes??null,curbApproach:null!=e.attributes.CurbApproach?f.JJ.fromJSON(e.attributes.CurbApproach):null,departCurbApproach:null!=e.attributes.DepartureCurbApproach?f.JJ.fromJSON(e.attributes.DepartureCurbApproach):null,departTime:null!=e.attributes.DepartureTime?new Date(e.attributes.DepartureTime):null,departTimeOffset:e.attributes.DepartureUTCOffset??null,geometry:e.geometry,lateDuration:e.attributes.LateMinutes??null,locationType:null!=e.attributes.LocationType?f.EM.fromJSON(e.attributes.LocationType):null,name:e.attributes.Name,objectId:e.attributes.ObjectID??e.attributes.__OBJECTID,popupTemplate:e.popupTemplate,routeName:e.attributes.RouteName,sequence:e.attributes.Sequence??null,serviceCosts:null!=e.attributes.ServiceCosts?(0,y.aZ)(JSON.parse(e.attributes.ServiceCosts)):null,serviceDistance:e.attributes.ServiceMeters??null,serviceDuration:e.attributes.ServiceMinutes??null,status:null!=e.attributes.Status?f.$r.fromJSON(e.attributes.Status):null,symbol:e.symbol,timeWindowEnd:null!=e.attributes.TimeWindowEnd?new Date(e.attributes.TimeWindowEnd):null,timeWindowEndOffset:e.attributes.TimeWindowEndUTCOffset??null,timeWindowStart:null!=e.attributes.TimeWindowStart?new Date(e.attributes.TimeWindowStart):null,timeWindowStartOffset:e.attributes.TimeWindowStartUTCOffset??null,waitDuration:e.attributes.WaitMinutes??null})}toGraphic(){const e={ObjectID:this.objectId,ArrivalCurbApproach:null!=this.arriveCurbApproach?f.JJ.toJSON(this.arriveCurbApproach):null,ArrivalTime:null!=this.arriveTime?this.arriveTime.getTime():null,ArrivalUTCOffset:this.arriveTimeOffset,CumulativeCosts:null!=this.cumulativeCosts?JSON.stringify((0,y.nA)(this.cumulativeCosts)):null,CumulativeMeters:this.cumulativeDistance,CumulativeMinutes:this.cumulativeDuration,CurbApproach:null!=this.curbApproach?f.JJ.toJSON(this.curbApproach):null,DepartureCurbApproach:null!=this.departCurbApproach?f.JJ.toJSON(this.departCurbApproach):null,DepartureTime:null!=this.departTime?this.departTime.getTime():null,DepartureUTCOffset:this.departTimeOffset,LateMinutes:this.lateDuration,LocationType:null!=this.locationType?f.EM.toJSON(this.locationType):null,Name:this.name,RouteName:this.routeName,Sequence:this.sequence,ServiceCosts:null!=this.serviceCosts?JSON.stringify((0,y.nA)(this.serviceCosts)):null,ServiceMeters:this.serviceDistance,ServiceMinutes:this.serviceDuration,Status:null!=this.status?f.$r.toJSON(this.status):null,TimeWindowEnd:null!=this.timeWindowEnd?this.timeWindowEnd.getTime():null,TimeWindowEndUTCOffset:this.timeWindowEndOffset??this.arriveTimeOffset,TimeWindowStart:null!=this.timeWindowStart?this.timeWindowStart.getTime():null,TimeWindowStartUTCOffset:this.timeWindowStartOffset??this.arriveTimeOffset,WaitMinutes:this.waitDuration};return new s.A({geometry:this.geometry,attributes:e,symbol:this.symbol,popupTemplate:this.popupTemplate})}};g.fields=[{name:"ObjectID",alias:"ObjectID",type:"esriFieldTypeOID"},{name:"ArrivalCurbApproach",alias:"Arrival Curb Approach",type:"esriFieldTypeInteger"},{name:"ArrivalTime",alias:"Arrival Time",type:"esriFieldTypeDate"},{name:"ArrivalUTCOffset",alias:"Arrival Time",type:"esriFieldTypeInteger"},{name:"CumulativeCosts",alias:"Cumulative Costs",type:"esriFieldTypeString"},{name:"CumulativeMeters",alias:"Cumulative Meters",type:"esriFieldTypeDouble"},{name:"CumulativeMinutes",alias:"Cumulative Minutes",type:"esriFieldTypeDouble"},{name:"CurbApproach",alias:"Curb Approach",type:"esriFieldTypeInteger"},{name:"DepartureCurbApproach",alias:"Departure Curb Approach",type:"esriFieldTypeInteger"},{name:"DepartureTime",alias:"Departure Time",type:"esriFieldTypeDate"},{name:"DepartureUTCOffset",alias:"Departure Time",type:"esriFieldTypeInteger"},{name:"LateMinutes",alias:"Minutes Late",type:"esriFieldTypeDouble"},{name:"LocationType",alias:"Location Type",type:"esriFieldTypeInteger"},{name:"Name",alias:"Name",type:"esriFieldTypeString"},{name:"RouteName",alias:"Route Name",type:"esriFieldTypeString"},{name:"Sequence",alias:"Sequence",type:"esriFieldTypeInteger"},{name:"ServiceCosts",alias:"Service Costs",type:"esriFieldTypeString"},{name:"ServiceMeters",alias:"Service Meters",type:"esriFieldTypeDouble"},{name:"ServiceMinutes",alias:"Service Minutes",type:"esriFieldTypeDouble"},{name:"Status",alias:"Status",type:"esriFieldTypeInteger"},{name:"TimeWindowEnd",alias:"Time Window End",type:"esriFieldTypeDate"},{name:"TimeWindowEndUTCOffset",alias:"Time Window End Offset",type:"esriFieldTypeInteger"},{name:"TimeWindowStart",alias:"Time Window Start",type:"esriFieldTypeDate"},{name:"TimeWindowStartUTCOffset",alias:"Time Window Start Offset",type:"esriFieldTypeInteger"},{name:"WaitMinutes",alias:"Minutes Wait",type:"esriFieldTypeDouble"}],(0,n._)([(0,c.MZ)({type:f.JJ.apiValues,json:{read:{source:"attributes.ArrivalCurbApproach",reader:f.JJ.read}}})],g.prototype,"arriveCurbApproach",void 0),(0,n._)([(0,c.MZ)({type:Date,json:{read:{source:"attributes.ArriveTimeUTC"}}})],g.prototype,"arriveTime",void 0),(0,n._)([(0,c.MZ)()],g.prototype,"arriveTimeOffset",void 0),(0,n._)([(0,p.w)("arriveTimeOffset",["attributes.ArriveTime","attributes.ArriveTimeUTC"])],g.prototype,"readArriveTimeOffset",null),(0,n._)([(0,c.MZ)({json:{name:"attributes.Bearing",read:!1,write:!0}})],g.prototype,"bearing",void 0),(0,n._)([(0,c.MZ)({json:{name:"attributes.BearingTol",read:!1,write:!0}})],g.prototype,"bearingTol",void 0),(0,n._)([(0,c.MZ)()],g.prototype,"cumulativeCosts",void 0),(0,n._)([(0,p.w)("cumulativeCosts",["attributes"])],g.prototype,"readCumulativeCosts",null),(0,n._)([(0,c.MZ)()],g.prototype,"cumulativeDistance",void 0),(0,n._)([(0,c.MZ)()],g.prototype,"cumulativeDuration",void 0),(0,n._)([(0,c.MZ)({type:f.JJ.apiValues,json:{name:"attributes.CurbApproach",read:{reader:f.JJ.read},write:{writer:f.JJ.write}}})],g.prototype,"curbApproach",void 0),(0,n._)([(0,c.MZ)({type:f.JJ.apiValues,json:{read:{source:"attributes.DepartCurbApproach",reader:f.JJ.read}}})],g.prototype,"departCurbApproach",void 0),(0,n._)([(0,c.MZ)({type:Date,json:{read:{source:"attributes.DepartTimeUTC"}}})],g.prototype,"departTime",void 0),(0,n._)([(0,c.MZ)()],g.prototype,"departTimeOffset",void 0),(0,n._)([(0,p.w)("departTimeOffset",["attributes.DepartTime","attributes.DepartTimeUTC"])],g.prototype,"readDepartTimeOffset",null),(0,n._)([(0,c.MZ)({json:{read:{source:"attributes.DistanceToNetworkInMeters"}}})],g.prototype,"distanceToNetworkInMeters",void 0),(0,n._)([(0,c.MZ)({type:m.A,json:{write:!0}})],g.prototype,"geometry",void 0),(0,n._)([(0,c.MZ)()],g.prototype,"lateDuration",void 0),(0,n._)([(0,c.MZ)({type:f.EM.apiValues,json:{name:"attributes.LocationType",read:{reader:f.EM.read},write:{writer:f.EM.write}}})],g.prototype,"locationType",void 0),(0,n._)([(0,c.MZ)({json:{name:"attributes.Name"}})],g.prototype,"name",void 0),(0,n._)([(0,c.MZ)({json:{name:"attributes.NavLatency",read:!1,write:!0}})],g.prototype,"navLatency",void 0),(0,n._)([(0,c.MZ)({json:{name:"attributes.ObjectID"}})],g.prototype,"objectId",void 0),(0,n._)([(0,c.MZ)({type:o.A})],g.prototype,"popupTemplate",void 0),(0,n._)([(0,c.MZ)({json:{read:{source:"attributes.PosAlong"}}})],g.prototype,"posAlong",void 0),(0,n._)([(0,c.MZ)({json:{name:"attributes.RouteName"}})],g.prototype,"routeName",void 0),(0,n._)([(0,c.MZ)()],g.prototype,"serviceCosts",void 0),(0,n._)([(0,p.w)("serviceCosts",["attributes"])],g.prototype,"readServiceCosts",null),(0,n._)([(0,h.K)("serviceCosts")],g.prototype,"writeServiceCosts",null),(0,n._)([(0,c.MZ)()],g.prototype,"serviceDistance",void 0),(0,n._)([(0,c.MZ)()],g.prototype,"serviceDuration",void 0),(0,n._)([(0,c.MZ)({json:{name:"attributes.Sequence"}})],g.prototype,"sequence",void 0),(0,n._)([(0,c.MZ)({type:f.mt.apiValues,json:{read:{source:"attributes.SideOfEdge",reader:f.mt.read}}})],g.prototype,"sideOfEdge",void 0),(0,n._)([(0,c.MZ)({json:{read:{source:"attributes.SnapX"}}})],g.prototype,"snapX",void 0),(0,n._)([(0,c.MZ)({json:{read:{source:"attributes.SnapY"}}})],g.prototype,"snapY",void 0),(0,n._)([(0,c.MZ)({json:{read:{source:"attributes.SnapZ"}}})],g.prototype,"snapZ",void 0),(0,n._)([(0,c.MZ)({json:{read:{source:"attributes.SourceID"}}})],g.prototype,"sourceId",void 0),(0,n._)([(0,c.MZ)({json:{read:{source:"attributes.SourceOID"}}})],g.prototype,"sourceOid",void 0),(0,n._)([(0,c.MZ)({type:f.$r.apiValues,json:{read:{source:"attributes.Status",reader:f.$r.read}}})],g.prototype,"status",void 0),(0,n._)([(0,c.MZ)({types:a.Es})],g.prototype,"symbol",void 0),(0,n._)([(0,c.MZ)({type:Date,json:{name:"attributes.TimeWindowEnd"}})],g.prototype,"timeWindowEnd",void 0),(0,n._)([(0,h.K)("timeWindowEnd")],g.prototype,"writeTimeWindowEnd",null),(0,n._)([(0,c.MZ)()],g.prototype,"timeWindowEndOffset",void 0),(0,n._)([(0,c.MZ)({type:Date,json:{name:"attributes.TimeWindowStart"}})],g.prototype,"timeWindowStart",void 0),(0,n._)([(0,h.K)("timeWindowStart")],g.prototype,"writeTimeWindowStart",null),(0,n._)([(0,c.MZ)()],g.prototype,"timeWindowStartOffset",void 0),(0,n._)([(0,c.MZ)({readOnly:!0,json:{read:!1}})],g.prototype,"type",void 0),(0,n._)([(0,c.MZ)()],g.prototype,"violations",void 0),(0,n._)([(0,p.w)("violations",["attributes"])],g.prototype,"readViolations",null),(0,n._)([(0,c.MZ)()],g.prototype,"waitDuration",void 0),(0,n._)([(0,c.MZ)()],g.prototype,"wait",void 0),(0,n._)([(0,p.w)("wait",["attributes"])],g.prototype,"readWait",null),g=i=(0,n._)([(0,d.$)("esri.rest.support.Stop")],g);const v=g},36979:(e,t,r)=>{r.d(t,{Zn:()=>l,aZ:()=>o,lh:()=>n,nA:()=>a,p3:()=>s,r9:()=>u});var i=r(93122);function n(e,t){if(null==e)return null;const r={},n=new RegExp(`^${t}`,"i");for(const s of Object.keys(e))if(n.test(s)){const n=s.slice(t.length);r[i.et.fromJSON(n)]=e[s]}return r}function s(e,t,r){if(null!=e){t.attributes||(t.attributes={});for(const n in e){const s=i.et.toJSON(n);t.attributes[`${r}${s}`]=e[n]}}}function o(e){const t={};for(const r of Object.keys(e)){const n=r;t[i.et.fromJSON(n)]=e[r]}return t}function a(e){const t={};for(const r of Object.keys(e)){const n=r;t[i.et.toJSON(n)]=e[r]}return t}function l(e,t){return null==e||null==t?null:Math.round((e-t)/6e4)}function u(e){const t=e.toJSON(),r=t;return r.accumulateAttributeNames&&=t.accumulateAttributeNames?.join(),r.attributeParameterValues&&=JSON.stringify(t.attributeParameterValues),r.barriers&&=JSON.stringify(t.barriers),r.outSR&&=t.outSR?.wkid,r.overrides&&=JSON.stringify(t.overrides),r.polygonBarriers&&=JSON.stringify(t.polygonBarriers),r.polylineBarriers&&=JSON.stringify(t.polylineBarriers),r.restrictionAttributeNames&&=t.restrictionAttributeNames?.join(),r.stops&&=JSON.stringify(t.stops),r.travelMode&&=JSON.stringify(t.travelMode),r}},43672:(e,t,r)=>{r.r(t),r.d(t,{default:()=>i});const i={_decimalSeparator:".",_thousandSeparator:",",_percentPrefix:null,_percentSuffix:"%",_date_millisecond:"mm:ss SSS",_date_millisecond_full:"HH:mm:ss SSS",_date_second:"hh:mm:ss a",_date_second_full:"hh:mm:ss a",_date_minute:"hh:mm a",_date_minute_full:"hh:mm a - MMM dd, yyyy",_date_hour:"hh:mm a",_date_hour_full:"hh:mm a - MMM dd, yyyy",_date_day:"MMM dd",_date_day_full:"MMM dd, yyyy",_date_week:"ww",_date_week_full:"MMM dd, yyyy",_date_month:"MMM",_date_month_full:"MMM, yyyy",_date_year:"yyyy",_duration_millisecond:"SSS",_duration_second:"ss",_duration_minute:"mm",_duration_hour:"hh",_duration_day:"dd",_duration_week:"ww",_duration_month:"MM",_duration_year:"yyyy",_era_ad:"AD",_era_bc:"BC",A:"",P:"",AM:"",PM:"","A.M.":"","P.M.":"",January:"",February:"",March:"",April:"",May:"",June:"",July:"",August:"",September:"",October:"",November:"",December:"",Jan:"",Feb:"",Mar:"",Apr:"","May(short)":"May",Jun:"",Jul:"",Aug:"",Sep:"",Oct:"",Nov:"",Dec:"",Sunday:"",Monday:"",Tuesday:"",Wednesday:"",Thursday:"",Friday:"",Saturday:"",Sun:"",Mon:"",Tue:"",Wed:"",Thu:"",Fri:"",Sat:"",_dateOrd:function(e){let t="th";if(e<11||e>13)switch(e%10){case 1:t="st";break;case 2:t="nd";break;case 3:t="rd"}return t},Play:"",Stop:"","Zoom Out":"",Legend:"","Press ENTER to toggle":"",Loading:"",Home:"",Chart:"","Serial chart":"","X/Y chart":"","Pie chart":"","Gauge chart":"","Radar chart":"","Sankey diagram":"","Chord diagram":"","Flow diagram":"","TreeMap chart":"",Series:"","Candlestick Series":"","Column Series":"","Line Series":"","Pie Slice Series":"","X/Y Series":"",Map:"","Press ENTER to zoom in":"","Press ENTER to zoom out":"","Use arrow keys to zoom in and out":"","Use plus and minus keys on your keyboard to zoom in and out":"",Export:"",Image:"",Data:"",Print:"","Press ENTER to open":"","Press ENTER to print.":"","Press ENTER to export as %1.":"","(Press ESC to close this message)":"","Image Export Complete":"","Export operation took longer than expected. Something might have gone wrong.":"","Saved from":"",PNG:"",JPG:"",GIF:"",SVG:"",PDF:"",JSON:"",CSV:"",XLSX:"",HTML:"","Use TAB to select grip buttons or left and right arrows to change selection":"","Use left and right arrows to move selection":"","Use left and right arrows to move left selection":"","Use left and right arrows to move right selection":"","Use TAB select grip buttons or up and down arrows to change selection":"","Use up and down arrows to move selection":"","Use up and down arrows to move lower selection":"","Use up and down arrows to move upper selection":"","From %1 to %2":"","From %1":"","To %1":"","No parser available for file: %1":"","Error parsing file: %1":"","Unable to load file: %1":"","Invalid date":""}},47280:(e,t,r)=>{r.r(t),r.d(t,{default:()=>p});var i=r(82392),n=r(58842),s=r(48),o=r(81482),a=(r(6273),r(80861),r(67498),r(26325)),l=r(7511),u=r(24775);let c=class extends((0,l.e)(u.A)){constructor(e){super(e),this.layerViews=new n.A}set layerViews(e){this._set("layerViews",(0,s.V)(e,this._get("layerViews")))}get updatingProgress(){return 0===this.layerViews.length?1:this.layerViews.reduce(((e,t)=>e+t.updatingProgress),0)/this.layerViews.length}attach(){this._updateStageChildren(),this.addAttachHandles(this.layerViews.on("after-changes",(()=>this._updateStageChildren())))}detach(){this.container.removeAllChildren()}update(e){}viewChange(){}moveEnd(){}_updateStageChildren(){this.container.removeAllChildren(),this.layerViews.forEach(((e,t)=>this.container.addChildAt(e.container,t)))}};(0,i._)([(0,o.MZ)({cast:s.H})],c.prototype,"layerViews",null),(0,i._)([(0,o.MZ)({readOnly:!0})],c.prototype,"updatingProgress",null),c=(0,i._)([(0,a.$)("esri.views.2d.layers.KnowledgeGraphLayerView2D")],c);const p=c},56760:(e,t,r)=>{r.d(t,{A:()=>d});var i=r(82392),n=r(84977),s=r(81482),o=(r(6273),r(80861),r(67498),r(25376)),a=r(26325),l=r(48524),u=r(93122),c=r(25577);let p=class extends n.oY{constructor(e){super(e),this.accumulateAttributes=null,this.directionsLanguage=null,this.findBestSequence=null,this.preserveFirstStop=null,this.preserveLastStop=null,this.startTimeIsUTC=null,this.timeWindowsAreUTC=null,this.travelMode=null}readAccumulateAttributes(e){return null==e?null:e.map((e=>u.et.fromJSON(e)))}writeAccumulateAttributes(e,t,r){e?.length&&(t[r]=e.map((e=>u.et.toJSON(e))))}};(0,i._)([(0,s.MZ)({type:[String],json:{name:"accumulateAttributeNames",write:!0}})],p.prototype,"accumulateAttributes",void 0),(0,i._)([(0,o.w)("accumulateAttributes")],p.prototype,"readAccumulateAttributes",null),(0,i._)([(0,l.K)("accumulateAttributes")],p.prototype,"writeAccumulateAttributes",null),(0,i._)([(0,s.MZ)({type:String,json:{write:!0}})],p.prototype,"directionsLanguage",void 0),(0,i._)([(0,s.MZ)({type:Boolean,json:{write:!0}})],p.prototype,"findBestSequence",void 0),(0,i._)([(0,s.MZ)({type:Boolean,json:{write:!0}})],p.prototype,"preserveFirstStop",void 0),(0,i._)([(0,s.MZ)({type:Boolean,json:{write:!0}})],p.prototype,"preserveLastStop",void 0),(0,i._)([(0,s.MZ)({type:Boolean,json:{write:!0}})],p.prototype,"startTimeIsUTC",void 0),(0,i._)([(0,s.MZ)({type:Boolean,json:{write:!0}})],p.prototype,"timeWindowsAreUTC",void 0),(0,i._)([(0,s.MZ)({type:c.A,json:{write:!0}})],p.prototype,"travelMode",void 0),p=(0,i._)([(0,a.$)("esri.rest.support.RouteSettings")],p);const d=p},58881:(e,t,r)=>{r.d(t,{A:()=>g});var i,n=r(82392),s=r(20857),o=r(20879),a=r(3438),l=r(14755),u=r(84977),c=r(81482),p=(r(6273),r(80861),r(67498),r(25376)),d=r(26325),h=r(38648),m=r(36979),y=r(56760);let f=i=class extends((0,l.O)(u.oY)){constructor(e){super(e),this.analysisSettings=null,this.endTime=null,this.endTimeOffset=null,this.firstStopId=null,this.geometry=null,this.lastStopId=null,this.messages=null,this.name=null,this.objectId=null,this.popupTemplate=null,this.startTime=null,this.startTimeOffset=null,this.stopCount=null,this.symbol=null,this.totalCosts=null,this.totalDistance=null,this.totalDuration=null,this.totalLateDuration=null,this.totalViolations=null,this.totalWait=null,this.totalWaitDuration=null,this.type="route-info",this.version="1.0.0"}readEndTime(e,t){return null!=t.attributes.EndTimeUTC?new Date(t.attributes.EndTimeUTC):null}readEndTimeOffset(e,t){return(0,m.Zn)(t.attributes.EndTime,t.attributes.EndTimeUTC)}readStartTime(e,t){return null!=t.attributes.StartTimeUTC?new Date(t.attributes.StartTimeUTC):null}readStartTimeOffset(e,t){return(0,m.Zn)(t.attributes.StartTime,t.attributes.StartTimeUTC)}readTotalCosts(e,t){return(0,m.lh)(t.attributes,"Total_")}readTotalViolations(e,t){return(0,m.lh)(t.attributes,"TotalViolation_")}readTotalWait(e,t){return(0,m.lh)(t.attributes,"TotalWait_")}static fromGraphic(e){return new i({analysisSettings:null!=e.attributes.AnalysisSettings?y.A.fromJSON(JSON.parse(e.attributes.AnalysisSettings)):null,endTime:null!=e.attributes.EndTime?new Date(e.attributes.EndTime):null,endTimeOffset:e.attributes.EndUTCOffset??null,geometry:e.geometry,messages:null!=e.attributes.Messages?JSON.parse(e.attributes.Messages):null,name:e.attributes.RouteName,objectId:e.attributes.ObjectID??e.attributes.__OBJECTID,popupTemplate:e.popupTemplate,startTime:null!=e.attributes.StartTime?new Date(e.attributes.StartTime):null,startTimeOffset:e.attributes.StartUTCOffset??null,symbol:e.symbol,totalCosts:null!=e.attributes.TotalCosts?(0,m.aZ)(JSON.parse(e.attributes.TotalCosts)):null,totalDistance:e.attributes.TotalMeters??null,totalDuration:e.attributes.TotalMinutes??null,totalLateDuration:e.attributes.TotalLateMinutes??null,totalWaitDuration:e.attributes.TotalWaitMinutes??null,version:e.attributes.Version})}toGraphic(){const e={ObjectID:this.objectId,AnalysisSettings:null!=this.analysisSettings?JSON.stringify(this.analysisSettings.toJSON()):null,EndTime:null!=this.endTime?this.endTime.getTime():null,EndUTCOffset:this.endTimeOffset,Messages:null!=this.messages?JSON.stringify(this.messages):null,RouteName:this.name,StartTime:null!=this.startTime?this.startTime.getTime():null,StartUTCOffset:this.startTimeOffset,TotalCosts:null!=this.totalCosts?JSON.stringify((0,m.nA)(this.totalCosts)):null,TotalLateMinutes:this.totalLateDuration,TotalMeters:this.totalDistance,TotalMinutes:this.totalDuration,TotalWaitMinutes:this.totalWaitDuration,Version:this.version};return new s.A({geometry:this.geometry,attributes:e,symbol:this.symbol,popupTemplate:this.popupTemplate})}};f.fields=[{name:"ObjectID",alias:"ObjectID",type:"esriFieldTypeOID"},{name:"AnalysisSettings",alias:"Analysis Settings",type:"esriFieldTypeString"},{name:"EndTime",alias:"End Time",type:"esriFieldTypeDate"},{name:"EndUTCOffset",alias:"End Time Offset",type:"esriFieldTypeInteger"},{name:"Messages",alias:"Messages",type:"esriFieldTypeString"},{name:"RouteName",alias:"Route Name",type:"esriFieldTypeString"},{name:"StartTime",alias:"Start Time",type:"esriFieldTypeDate"},{name:"StartUTCOffset",alias:"Start Time Offset",type:"esriFieldTypeInteger"},{name:"TotalCosts",alias:"Total Costs",type:"esriFieldTypeString"},{name:"TotalLateMinutes",alias:"Total Late Minutes",type:"esriFieldTypeDouble"},{name:"TotalMeters",alias:"Total Meters",type:"esriFieldTypeDouble"},{name:"TotalMinutes",alias:"Total Minutes",type:"esriFieldTypeDouble"},{name:"TotalWaitMinutes",alias:"Total Wait Minutes",type:"esriFieldTypeDouble"},{name:"Version",alias:"Version",type:"esriFieldTypeString"}],(0,n._)([(0,c.MZ)()],f.prototype,"analysisSettings",void 0),(0,n._)([(0,c.MZ)()],f.prototype,"endTime",void 0),(0,n._)([(0,p.w)("endTime",["attributes.EndTimeUTC"])],f.prototype,"readEndTime",null),(0,n._)([(0,c.MZ)()],f.prototype,"endTimeOffset",void 0),(0,n._)([(0,p.w)("endTimeOffset",["attributes.EndTime","attributes.EndTimeUTC"])],f.prototype,"readEndTimeOffset",null),(0,n._)([(0,c.MZ)({json:{read:{source:"attributes.FirstStopID"}}})],f.prototype,"firstStopId",void 0),(0,n._)([(0,c.MZ)({type:h.A})],f.prototype,"geometry",void 0),(0,n._)([(0,c.MZ)({json:{read:{source:"attributes.LastStopID"}}})],f.prototype,"lastStopId",void 0),(0,n._)([(0,c.MZ)()],f.prototype,"messages",void 0),(0,n._)([(0,c.MZ)({json:{read:{source:"attributes.Name"}}})],f.prototype,"name",void 0),(0,n._)([(0,c.MZ)({json:{read:{source:"attributes.ObjectID"}}})],f.prototype,"objectId",void 0),(0,n._)([(0,c.MZ)({type:o.A})],f.prototype,"popupTemplate",void 0),(0,n._)([(0,c.MZ)()],f.prototype,"startTime",void 0),(0,n._)([(0,p.w)("startTime",["attributes.StartTimeUTC"])],f.prototype,"readStartTime",null),(0,n._)([(0,c.MZ)()],f.prototype,"startTimeOffset",void 0),(0,n._)([(0,p.w)("startTimeOffset",["attributes.StartTime","attributes.StartTimeUTC"])],f.prototype,"readStartTimeOffset",null),(0,n._)([(0,c.MZ)({json:{read:{source:"attributes.StopCount"}}})],f.prototype,"stopCount",void 0),(0,n._)([(0,c.MZ)({types:a.Es})],f.prototype,"symbol",void 0),(0,n._)([(0,c.MZ)()],f.prototype,"totalCosts",void 0),(0,n._)([(0,p.w)("totalCosts",["attributes"])],f.prototype,"readTotalCosts",null),(0,n._)([(0,c.MZ)()],f.prototype,"totalDistance",void 0),(0,n._)([(0,c.MZ)()],f.prototype,"totalDuration",void 0),(0,n._)([(0,c.MZ)()],f.prototype,"totalLateDuration",void 0),(0,n._)([(0,c.MZ)()],f.prototype,"totalViolations",void 0),(0,n._)([(0,p.w)("totalViolations",["attributes"])],f.prototype,"readTotalViolations",null),(0,n._)([(0,c.MZ)()],f.prototype,"totalWait",void 0),(0,n._)([(0,p.w)("totalWait",["attributes"])],f.prototype,"readTotalWait",null),(0,n._)([(0,c.MZ)()],f.prototype,"totalWaitDuration",void 0),(0,n._)([(0,c.MZ)({readOnly:!0,json:{read:!1}})],f.prototype,"type",void 0),(0,n._)([(0,c.MZ)()],f.prototype,"version",void 0),f=i=(0,n._)([(0,d.$)("esri.rest.support.RouteInfo")],f);const g=f},59251:(e,t,r)=>{r.r(t),r.d(t,{default:()=>i});const i={_decimalSeparator:",",_thousandSeparator:".",_percentPrefix:null,_percentSuffix:"%",_big_number_suffix_3:"k",_big_number_suffix_6:"M",_big_number_suffix_9:"G",_big_number_suffix_12:"T",_big_number_suffix_15:"P",_big_number_suffix_18:"E",_big_number_suffix_21:"Z",_big_number_suffix_24:"Y",_small_number_suffix_3:"m",_small_number_suffix_6:"",_small_number_suffix_9:"n",_small_number_suffix_12:"p",_small_number_suffix_15:"f",_small_number_suffix_18:"a",_small_number_suffix_21:"z",_small_number_suffix_24:"y",_byte_suffix_B:"B",_byte_suffix_KB:"KB",_byte_suffix_MB:"MB",_byte_suffix_GB:"GB",_byte_suffix_TB:"TB",_byte_suffix_PB:"PB",_date_millisecond:"mm:ss SSS",_date_millisecond_full:"HH:mm:ss SSS",_date_second:"HH:mm:ss",_date_second_full:"HH:mm:ss",_date_minute:"HH:mm",_date_minute_full:"HH:mm - MMM dd, yyyy",_date_hour:"HH:mm",_date_hour_full:"HH:mm - MMM dd, yyyy",_date_day:"MMM dd",_date_day_full:"MMM dd, yyyy",_date_week:"ww",_date_week_full:"MMM dd, yyyy",_date_month:"MMM",_date_month_full:"MMM, yyyy",_date_year:"yyyy",_duration_millisecond:"SSS",_duration_millisecond_second:"ss.SSS",_duration_millisecond_minute:"mm:ss SSS",_duration_millisecond_hour:"hh:mm:ss SSS",_duration_millisecond_day:"d'd' mm:ss SSS",_duration_millisecond_week:"d'd' mm:ss SSS",_duration_millisecond_month:"M'm' dd'd' mm:ss SSS",_duration_millisecond_year:"y'y' MM'm' dd'd' mm:ss SSS",_duration_second:"ss",_duration_second_minute:"mm:ss",_duration_second_hour:"hh:mm:ss",_duration_second_day:"d'd' hh:mm:ss",_duration_second_week:"d'd' hh:mm:ss",_duration_second_month:"M'm' dd'd' hh:mm:ss",_duration_second_year:"y'y' MM'm' dd'd' hh:mm:ss",_duration_minute:"mm",_duration_minute_hour:"hh:mm",_duration_minute_day:"d'd' hh:mm",_duration_minute_week:"d'd' hh:mm",_duration_minute_month:"M'm' dd'd' hh:mm",_duration_minute_year:"y'y' MM'm' dd'd' hh:mm",_duration_hour:"hh'h'",_duration_hour_day:"d'd' hh'h'",_duration_hour_week:"d'd' hh'h'",_duration_hour_month:"M'm' dd'd' hh'h'",_duration_hour_year:"y'y' MM'm' dd'd' hh'h'",_duration_day:"d'd'",_duration_day_week:"d'd'",_duration_day_month:"M'm' dd'd'",_duration_day_year:"y'y' MM'm' dd'd'",_duration_week:"w'w'",_duration_week_month:"w'w'",_duration_week_year:"w'w'",_duration_month:"M'm'",_duration_month_year:"y'y' MM'm'",_duration_year:"y'y'",_era_ad:"n. t.",_era_bc:"pr. n. t.",A:"A",P:"P",AM:"AM",PM:"PM","A.M.":"A.M.","P.M.":"P.M.",January:"Januar",February:"Februar",March:"Marec",April:"April",May:"Maj",June:"Junij",July:"Julij",August:"Avgust",September:"September",October:"Oktober",November:"November",December:"December",Jan:"Jan",Feb:"Feb",Mar:"Mar",Apr:"Apr","May(short)":"Maj",Jun:"Jun",Jul:"Jul",Aug:"Avg",Sep:"Sep",Oct:"Okt",Nov:"Nov",Dec:"Dec",Sunday:"Nedelja",Monday:"Ponedeljek",Tuesday:"Torek",Wednesday:"Sreda",Thursday:"etrtek",Friday:"Petek",Saturday:"Sobota",Sun:"Ned",Mon:"Pon",Tue:"Tor",Wed:"Sre",Thu:"et",Fri:"Pet",Sat:"Sob",_dateOrd:function(e){return"."},"Zoom Out":"Oddalji pogled",Play:"Zaeni",Stop:"Ustavi",Legend:"Legenda","Press ENTER to toggle":"Klikni, tapni ali pritisni ENTER za preklop",Loading:"Nalagam",Home:"Domov",Chart:"Graf","Serial chart":"Serijski graf","X/Y chart":"X/Y graf","Pie chart":"Tortni graf","Gauge chart":"Stevni graf","Radar chart":"Radar graf","Sankey diagram":"Sankey diagram","Flow diagram":"Prikaz poteka","Chord diagram":"Kolobarni diagram","TreeMap chart":"Drevesi graf","Sliced chart":"Sliced graf",Series:"Serija","Candlestick Series":"Svena serija","OHLC Series":"OHLC serija","Column Series":"Stolpiasta serija","Line Series":"rtna serija","Pie Slice Series":"Tortna serija","Funnel Series":"Lijak serija","Pyramid Series":"Piramidna serija","X/Y Series":"X/Y serija",Map:"Mapa","Press ENTER to zoom in":"Pritisni ENTER za priblievanje","Press ENTER to zoom out":"Pritisni ENTER za oddaljevanje","Use arrow keys to zoom in and out":"Uporabi smerne tiple za priblievanje in oddaljevanje","Use plus and minus keys on your keyboard to zoom in and out":"Uporabi plus in minus tipke na tipkovnici za priblievanje in oddaljevanje",Export:"Izvozi",Image:"Slika",Data:"Podatki",Print:"Natisni","Press ENTER to open":"Klikni, tapni ali pritisni ENTER da odpre.","Press ENTER to print.":"Klikni, tapni ali pritisni ENTER za tiskanje.","Press ENTER to export as %1.":"Klikni, tapni ali pritisni ENTER da izvozi kot %1.","(Press ESC to close this message)":"(Pritisni ESC da zapre to sporoilo)","Image Export Complete":"Izvoz slike konan","Export operation took longer than expected. Something might have gone wrong.":"Operacija izvoza je trajala dlje kot priakovano. Nekaj je lo narobe.","Saved from":"Shranjeno od",PNG:"PNG",JPG:"JPG",GIF:"GIF",SVG:"SVG",PDF:"PDF",JSON:"JSON",CSV:"CSV",XLSX:"XLSX",HTML:"","Use TAB to select grip buttons or left and right arrows to change selection":"Uporabi TAB za izbiro drsnih gumbov ali levo in desno smerno tipko da spremeni izbiro","Use left and right arrows to move selection":"Uporabi levo in desno smerno tipko za premik izbranega","Use left and right arrows to move left selection":"Uporabi levo in desno smerno tipko za premik leve izbire","Use left and right arrows to move right selection":"Uporabi levo in desno smerno tipko za premik desne izbire","Use TAB select grip buttons or up and down arrows to change selection":"Uporabi TAB za izbiro drsnih gumbov ali gor in dol smerno tipko da spremeni izbiro","Use up and down arrows to move selection":"Uporabi gor in dol smerne tipke za premik izbire","Use up and down arrows to move lower selection":"Uporabi gor in dol smerne tipke za premik spodnje izbire","Use up and down arrows to move upper selection":"Uporabi gor in dol smerne tipke za premik zgornje izbire","From %1 to %2":"Od %1 do %2","From %1":"Od %1","To %1":"Do %1","No parser available for file: %1":"Nobenega parserja ni na voljo za datoteko: %1","Error parsing file: %1":"Napaka pri parsanju datoteke: %1","Unable to load file: %1":"Ni mogoe naloiti datoteke: %1","Invalid date":"Neveljaven datum"}},64060:(e,t,r)=>{r.r(t),r.d(t,{scopeCss:()=>k});var i="-shadowcsshost",n="-shadowcssslotted",s="-shadowcsscontext",o=")(?:\\(((?:\\([^)(]*\\)|[^)(]*)+?)\\))?([^,{]*)",a=new RegExp("("+i+o,"gim"),l=new RegExp("("+s+o,"gim"),u=new RegExp("("+n+o,"gim"),c=i+"-no-combinator",p=/-shadowcsshost-no-combinator([^\s]*)/,d=[/::shadow/g,/::content/g],h=/-shadowcsshost/gim,m=e=>new RegExp(`((?<!(^@supports(.*)))|(?<={.*))(${e}\\b)`,"gim"),y=m("::slotted"),f=m(":host"),g=m(":host-context"),v=/\/\*\s*[\s\S]*?\*\//g,_=/\/\*\s*#\s*source(Mapping)?URL=[\s\S]+?\*\//g,w=/(\s*)([^;\{\}]+?)(\s*)((?:{%BLOCK%}?\s*;?)|(?:\s*;))/g,b=/([{}])/g,T=/(^.*?[^\\])??((:+)(.*)|$)/,S="%BLOCK%",A=(e,t,r)=>e.replace(t,((...e)=>{if(e[2]){const t=e[2].split(","),i=[];for(let n=0;n<t.length;n++){const s=t[n].trim();if(!s)break;i.push(r(c,s,e[3]))}return i.join(",")}return c+e[3]})),I=(e,t,r)=>e+t.replace(i,"")+r,M=(e,t,r)=>t.indexOf(i)>-1?I(e,t,r):e+t+r+", "+t+" "+e+r,O=(e,t)=>e.replace(T,((e,r="",i,n="",s="")=>r+t+n+s)),D=(e,t,r,i)=>(e=>{const n=(e=>{const t=e.split(b),r=[],i=[];let n=0,s=[];for(let e=0;e<t.length;e++){const o=t[e];"}"===o&&n--,n>0?s.push(o):(s.length>0&&(i.push(s.join("")),r.push(S),s=[]),r.push(o)),"{"===o&&n++}return s.length>0&&(i.push(s.join("")),r.push(S)),{escapedString:r.join(""),blocks:i}})(e);let s=0;return n.escapedString.replace(w,((...e)=>{const o=e[2];let a="",l=e[4],u="";l&&l.startsWith("{"+S)&&(a=n.blocks[s++],l=l.substring(8),u="{");const d=(e=>{let n=e.selector,s=e.content;return"@"!==e.selector[0]?n=((e,t,r,i)=>e.split(",").map((e=>i&&e.indexOf("."+i)>-1?e.trim():((e,t)=>!(e=>(e=e.replace(/\[/g,"\\[").replace(/\]/g,"\\]"),new RegExp("^("+e+")([>\\s~+[.,{:][\\s\\S]*)?$","m")))(t).test(e))(e,t)?((e,t,r)=>{const i="."+(t=t.replace(/\[is=([^\]]*)\]/g,((e,...t)=>t[0]))),n=e=>{let n=e.trim();if(!n)return"";if(e.indexOf(c)>-1)n=((e,t,r)=>{if(h.lastIndex=0,h.test(e)){const t=`.${r}`;return e.replace(p,((e,r)=>O(r,t))).replace(h,t+" ")}return t+" "+e})(e,t,r);else{const t=e.replace(h,"");t.length>0&&(n=O(t,i))}return n},s=(e=>{const t=[];let r=0;return{content:(e=e.replace(/(\[[^\]]*\])/g,((e,i)=>{const n=`__ph-${r}__`;return t.push(i),r++,n}))).replace(/(:nth-[-\w]+)(\([^)]+\))/g,((e,i,n)=>{const s=`__ph-${r}__`;return t.push(n),r++,i+s})),placeholders:t}})(e);let o,a="",l=0;const u=/( |>|\+|~(?!=))\s*/g;let d=!((e=s.content).indexOf(c)>-1);for(;null!==(o=u.exec(e));){const t=o[1],r=e.slice(l,o.index).trim();d=d||r.indexOf(c)>-1,a+=`${d?n(r):r} ${t} `,l=u.lastIndex}const m=e.substring(l);return d=d||m.indexOf(c)>-1,a+=d?n(m):m,y=s.placeholders,a.replace(/__ph-(\d+)__/g,((e,t)=>y[+t]));var y})(e,t,r).trim():e.trim())).join(", "))(e.selector,t,r,i):(e.selector.startsWith("@media")||e.selector.startsWith("@supports")||e.selector.startsWith("@page")||e.selector.startsWith("@document"))&&(s=D(e.content,t,r,i)),{selector:n.replace(/\s{2,}/g," ").trim(),content:s}})({selector:o,content:a});return`${e[1]}${d.selector}${e[3]}${u}${d.content}${l}`}))})(e),C=(e,t)=>e.replace(/-shadowcsshost-no-combinator/g,`.${t}`),k=(e,t)=>{const r=t+"-h",o=t+"-s",p=e.match(_)||[];const h=((e,t,r,o)=>{const p=((e,t)=>{const r="."+t+" > ",i=[];return e=e.replace(u,((...e)=>{if(e[2]){const t=e[2].trim(),n=e[3],s=r+t+n;let o="";for(let t=e[4]-1;t>=0;t--){const r=e[5][t];if("}"===r||","===r)break;o=r+o}const a=(o+s).trim(),l=`${o.trimEnd()}${s.trim()}`.trim();if(a!==l){const e=`${l}, ${a}`;i.push({orgSelector:a,updatedSelector:e})}return s}return c+e[3]})),{selectors:i,cssText:e}})(e=(e=>A(e,l,M))(e=(e=>A(e,a,I))(e=(e=>e.replace(g,`$1${s}`).replace(f,`$1${i}`).replace(y,`$1${n}`))(e))),o);return e=(e=>d.reduce(((e,t)=>e.replace(t," ")),e))(e=p.cssText),t&&(e=D(e,t,r,o)),{cssText:(e=(e=C(e,r)).replace(/>\s*\*\s+([^{, ]+)/gm," $1 ")).trim(),slottedSelectors:p.selectors.map((e=>({orgSelector:C(e.orgSelector,r),updatedSelector:C(e.updatedSelector,r)})))}})(e=e.replace(v,""),t,r,o);return e=[h.cssText,...p].join("\n"),h.slottedSelectors.forEach((t=>{const r=new RegExp(t.orgSelector.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g");e=e.replace(r,t.updatedSelector)})),e}},64212:(e,t,r)=>{r.r(t),r.d(t,{build:()=>i.b}),r(47635),r(77788),r(29592),r(31790),r(38587),r(15479),r(44118),r(40574),r(60769),r(35212),r(88251),r(85807),r(60733),r(63149),r(83660),r(69952),r(92121),r(19635),r(41014),r(92624),r(33763),r(288);var i=r(9684)},66439:(e,t,r)=>{r.d(t,{A:()=>y});var i,n=r(82392),s=r(20857),o=r(20879),a=r(3438),l=r(14755),u=r(84977),c=r(81482),p=(r(6273),r(80861),r(67498),r(26325)),d=r(38648),h=r(93122);let m=i=class extends((0,l.O)(u.oY)){constructor(e){super(e),this.directionLineType=null,this.directionPointId=null,this.distance=null,this.duration=null,this.fromLevel=null,this.geometry=null,this.objectId=null,this.popupTemplate=null,this.symbol=null,this.toLevel=null,this.type="direction-line"}static fromGraphic(e){return new i({directionLineType:h.gD.fromJSON(e.attributes.DirectionLineType),directionPointId:e.attributes.DirectionPointID,distance:e.attributes.Meters,duration:e.attributes.Minutes,fromLevel:e.attributes.FromLevel??null,geometry:e.geometry,objectId:e.attributes.ObjectID??e.attributes.__OBJECTID,popupTemplate:e.popupTemplate,symbol:e.symbol,toLevel:e.attributes.ToLevel??null})}toGraphic(){const e={ObjectID:this.objectId,DirectionLineType:null!=this.directionLineType?h.gD.toJSON(this.directionLineType):null,DirectionPointID:this.directionPointId,Meters:this.distance,Minutes:this.duration};return null!=this.fromLevel&&(e.FromLevel=this.fromLevel),null!=this.toLevel&&(e.ToLevel=this.toLevel),new s.A({geometry:this.geometry,attributes:e,symbol:this.symbol,popupTemplate:this.popupTemplate})}};m.fields=[{name:"ObjectID",alias:"ObjectID",type:"esriFieldTypeOID"},{name:"DirectionLineType",alias:"Line Type",type:"esriFieldTypeInteger"},{name:"DirectionPointID",alias:"Direction Point ID",type:"esriFieldTypeInteger"},{name:"FromLevel",alias:"From Level",type:"esriFieldTypeInteger"},{name:"Meters",alias:"Meters",type:"esriFieldTypeDouble"},{name:"Minutes",alias:"Minutes",type:"esriFieldTypeDouble"},{name:"ToLevel",alias:"To Level",type:"esriFieldTypeInteger"}],(0,n._)([(0,c.MZ)({type:h.gD.apiValues,json:{read:{source:"attributes.DirectionLineType",reader:h.gD.read}}})],m.prototype,"directionLineType",void 0),(0,n._)([(0,c.MZ)({json:{read:{source:"attributes.DirectionPointID"}}})],m.prototype,"directionPointId",void 0),(0,n._)([(0,c.MZ)({json:{read:{source:"attributes.Meters"}}})],m.prototype,"distance",void 0),(0,n._)([(0,c.MZ)({json:{read:{source:"attributes.Minutes"}}})],m.prototype,"duration",void 0),(0,n._)([(0,c.MZ)({json:{read:{source:"attributes.FromLevel"}}})],m.prototype,"fromLevel",void 0),(0,n._)([(0,c.MZ)({type:d.A})],m.prototype,"geometry",void 0),(0,n._)([(0,c.MZ)({json:{read:{source:"attributes.ObjectID"}}})],m.prototype,"objectId",void 0),(0,n._)([(0,c.MZ)({type:o.A})],m.prototype,"popupTemplate",void 0),(0,n._)([(0,c.MZ)({types:a.Es})],m.prototype,"symbol",void 0),(0,n._)([(0,c.MZ)({json:{read:{source:"attributes.ToLevel"}}})],m.prototype,"toLevel",void 0),(0,n._)([(0,c.MZ)({readOnly:!0,json:{read:!1}})],m.prototype,"type",void 0),m=i=(0,n._)([(0,p.$)("esri.rest.support.DirectionLine")],m);const y=m},70091:(e,t,r)=>{r.d(t,{A:()=>v});var i,n=r(82392),s=r(20857),o=r(20879),a=r(3438),l=r(14755),u=r(84977),c=r(81482),p=(r(6273),r(80861),r(67498),r(25376)),d=r(26325),h=r(48524),m=r(1912),y=r(36979),f=r(93122);let g=i=class extends((0,l.O)(u.oY)){constructor(e){super(e),this.addedCost=null,this.barrierType=null,this.costs=null,this.curbApproach=null,this.fullEdge=null,this.geometry=null,this.name=null,this.objectId=null,this.popupTemplate=null,this.sideOfEdge=null,this.sourceId=null,this.sourceOid=null,this.status=null,this.symbol=null,this.type="point-barrier"}readCosts(e,t){return(0,y.lh)(t.attributes,"Attr_")}writeCosts(e,t){(0,y.p3)(e,t,"Attr_")}static fromGraphic(e){return new i({addedCost:e.attributes.AddedCost??null,barrierType:null!=e.attributes.BarrierType?f.iM.fromJSON(e.attributes.BarrierType):null,costs:null!=e.attributes.Costs?(0,y.aZ)(JSON.parse(e.attributes.Costs)):null,curbApproach:null!=e.attributes.CurbApproach?f.JJ.fromJSON(e.attributes.CurbApproach):null,fullEdge:null!=e.attributes.FullEdge?f.fe.fromJSON(e.attributes.FullEdge):null,geometry:e.geometry,name:e.attributes.Name??null,objectId:e.attributes.ObjectID??e.attributes.__OBJECTID,popupTemplate:e.popupTemplate,status:null!=e.attributes.Status?f.$r.fromJSON(e.attributes.Status):null,symbol:e.symbol})}toGraphic(){const e={ObjectID:this.objectId,AddedCost:this.addedCost,BarrierType:null!=this.barrierType?f.iM.toJSON(this.barrierType):null,Costs:null!=this.costs?JSON.stringify((0,y.nA)(this.costs)):null,CurbApproach:null!=this.curbApproach?f.JJ.toJSON(this.curbApproach):null,FullEdge:null!=this.fullEdge?f.fe.toJSON(this.fullEdge):null,Name:this.name,Status:null!=this.status?f.$r.toJSON(this.status):null};return new s.A({geometry:this.geometry,attributes:e,symbol:this.symbol,popupTemplate:this.popupTemplate})}};g.fields=[{name:"ObjectID",alias:"ObjectID",type:"esriFieldTypeOID"},{name:"AddedCost",alias:"Added Cost",type:"esriFieldTypeDouble"},{name:"BarrierType",alias:"Barrier Type",type:"esriFieldTypeInteger"},{name:"Costs",alias:"Costs",type:"esriFieldTypeString"},{name:"CurbApproach",alias:"Curb Approach",type:"esriFieldTypeInteger"},{name:"FullEdge",alias:"Full Edge",type:"esriFieldTypeInteger"},{name:"Name",alias:"Name",type:"esriFieldTypeString"},{name:"Status",alias:"Status",type:"esriFieldTypeInteger"}],(0,n._)([(0,c.MZ)()],g.prototype,"addedCost",void 0),(0,n._)([(0,c.MZ)({type:f.iM.apiValues,json:{name:"attributes.BarrierType",read:{reader:f.iM.read},write:{writer:f.iM.write}}})],g.prototype,"barrierType",void 0),(0,n._)([(0,c.MZ)()],g.prototype,"costs",void 0),(0,n._)([(0,p.w)("costs",["attributes"])],g.prototype,"readCosts",null),(0,n._)([(0,h.K)("costs")],g.prototype,"writeCosts",null),(0,n._)([(0,c.MZ)({constructOnly:!0,type:f.JJ.apiValues,json:{read:{source:"attributes.CurbApproach",reader:f.JJ.read}}})],g.prototype,"curbApproach",void 0),(0,n._)([(0,c.MZ)({type:f.fe.apiValues,json:{name:"attributes.FullEdge",read:{reader:f.fe.read},write:{writer:f.fe.write}}})],g.prototype,"fullEdge",void 0),(0,n._)([(0,c.MZ)({type:m.A,json:{write:!0}})],g.prototype,"geometry",void 0),(0,n._)([(0,c.MZ)({json:{name:"attributes.Name"}})],g.prototype,"name",void 0),(0,n._)([(0,c.MZ)({json:{name:"attributes.ObjectID"}})],g.prototype,"objectId",void 0),(0,n._)([(0,c.MZ)({type:o.A})],g.prototype,"popupTemplate",void 0),(0,n._)([(0,c.MZ)({type:f.mt.apiValues,json:{read:{source:"attributes.SideOfEdge",reader:f.mt.read}}})],g.prototype,"sideOfEdge",void 0),(0,n._)([(0,c.MZ)({json:{read:{source:"attributes.SourceID"}}})],g.prototype,"sourceId",void 0),(0,n._)([(0,c.MZ)({json:{read:{source:"attributes.SourceOID"}}})],g.prototype,"sourceOid",void 0),(0,n._)([(0,c.MZ)({type:f.$r.apiValues,json:{read:{source:"attributes.Status",reader:f.$r.read}}})],g.prototype,"status",void 0),(0,n._)([(0,c.MZ)({types:a.Es})],g.prototype,"symbol",void 0),(0,n._)([(0,c.MZ)({readOnly:!0,json:{read:!1}})],g.prototype,"type",void 0),g=i=(0,n._)([(0,d.$)("esri.rest.support.PointBarrier")],g);const v=g},78505:(e,t,r)=>{r.r(t),r.d(t,{l:()=>a});var i,n=r(90618),s={exports:{}};const o=(0,n.g)(function(){return i||(i=1,e=s,t="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0,r=function(e={}){var r,i,n=e;n.ready=new Promise(((e,t)=>{r=e,i=t}));var s=Object.assign({},n),o="./this.program",a="";"undefined"!=typeof document&&document.currentScript&&(a=document.currentScript.src),t&&(a=t),a=0!==a.indexOf("blob:")?a.substr(0,a.replace(/[?#].*/,"").lastIndexOf("/")+1):"",n.print||console.log.bind(console);var l,u,c=n.printErr||console.error.bind(console);Object.assign(n,s),s=null,n.arguments&&n.arguments,n.thisProgram&&(o=n.thisProgram),n.quit&&n.quit,n.wasmBinary&&(l=n.wasmBinary),"object"!=typeof WebAssembly&&D("no native wasm support detected");var p,d,h,m,y,f,g,v,_=!1;function w(){var e=u.buffer;n.HEAP8=p=new Int8Array(e),n.HEAP16=h=new Int16Array(e),n.HEAPU8=d=new Uint8Array(e),n.HEAPU16=m=new Uint16Array(e),n.HEAP32=y=new Int32Array(e),n.HEAPU32=f=new Uint32Array(e),n.HEAPF32=g=new Float32Array(e),n.HEAPF64=v=new Float64Array(e)}var b=[],T=[],S=[];function A(e){b.unshift(e)}function I(e){S.unshift(e)}var M=0,O=null;function D(e){n.onAbort&&n.onAbort(e),c(e="Aborted("+e+")"),_=!0,e+=". Build with -sASSERTIONS for more info.";var t=new WebAssembly.RuntimeError(e);throw i(t),t}var C,k=e=>e.startsWith("data:application/octet-stream;base64,");function x(e){if(e==C&&l)return new Uint8Array(l);throw"both async and sync fetching of the wasm failed"}function j(e,t,r){return function(e){return l||"function"!=typeof fetch?Promise.resolve().then((()=>x(e))):fetch(e,{credentials:"same-origin"}).then((t=>{if(!t.ok)throw"failed to load wasm binary file at '"+e+"'";return t.arrayBuffer()})).catch((()=>x(e)))}(e).then((e=>WebAssembly.instantiate(e,t))).then((e=>e)).then(r,(e=>{c(`failed to asynchronously prepare wasm: ${e}`),D(e)}))}k(C="lyr3DMain.wasm")||(C=function(e){return n.locateFile?n.locateFile(e,a):a+e}(C));var U=e=>{for(;e.length>0;)e.shift()(n)};function P(e){this.excPtr=e,this.ptr=e-24,this.set_type=function(e){f[this.ptr+4>>2]=e},this.get_type=function(){return f[this.ptr+4>>2]},this.set_destructor=function(e){f[this.ptr+8>>2]=e},this.get_destructor=function(){return f[this.ptr+8>>2]},this.set_caught=function(e){e=e?1:0,p[this.ptr+12|0]=e},this.get_caught=function(){return 0!=p[this.ptr+12|0]},this.set_rethrown=function(e){e=e?1:0,p[this.ptr+13|0]=e},this.get_rethrown=function(){return 0!=p[this.ptr+13|0]},this.init=function(e,t){this.set_adjusted_ptr(0),this.set_type(e),this.set_destructor(t)},this.set_adjusted_ptr=function(e){f[this.ptr+16>>2]=e},this.get_adjusted_ptr=function(){return f[this.ptr+16>>2]},this.get_exception_ptr=function(){if(Je(this.get_type()))return f[this.excPtr>>2];var e=this.get_adjusted_ptr();return 0!==e?e:this.excPtr}}n.noExitRuntime;var N={},F=e=>{for(;e.length;){var t=e.pop();e.pop()(t)}};function R(e){return this.fromWireType(y[e>>2])}var E,Z,$,W={},J={},L={},B=e=>{throw new E(e)},z=(e,t,r)=>{function i(t){var i=r(t);i.length!==e.length&&B("Mismatched type converter count");for(var n=0;n<e.length;++n)G(e[n],i[n])}e.forEach((function(e){L[e]=t}));var n=new Array(t.length),s=[],o=0;t.forEach(((e,t)=>{J.hasOwnProperty(e)?n[t]=J[e]:(s.push(e),W.hasOwnProperty(e)||(W[e]=[]),W[e].push((()=>{n[t]=J[e],++o===s.length&&i(n)})))})),0===s.length&&i(n)},V={},X=e=>{for(var t="",r=e;d[r];)t+=Z[d[r++]];return t},q=e=>{throw new $(e)};function G(e,t,r={}){if(!("argPackAdvance"in t))throw new TypeError("registerType registeredInstance requires argPackAdvance");return function(e,t,r={}){var i=t.name;if(e||q(`type "${i}" must have a positive integer typeid pointer`),J.hasOwnProperty(e)){if(r.ignoreDuplicateRegistrations)return;q(`Cannot register type '${i}' twice`)}if(J[e]=t,delete L[e],W.hasOwnProperty(e)){var n=W[e];delete W[e],n.forEach((e=>e()))}}(e,t,r)}function H(){this.allocated=[void 0],this.freelist=[]}var K,Y,Q=new H,ee=e=>{e>=Q.reserved&&0==--Q.get(e).refcount&&Q.free(e)},te=e=>(e||q("Cannot use deleted val. handle = "+e),Q.get(e).value),re=e=>{switch(e){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:return Q.allocate({refcount:1,value:e})}},ie=(e,t)=>{switch(t){case 4:return function(e){return this.fromWireType(g[e>>2])};case 8:return function(e){return this.fromWireType(v[e>>3])};default:throw new TypeError(`invalid float width (${t}): ${e}`)}},ne=(e,t,r)=>{if(void 0===e[t].overloadTable){var i=e[t];e[t]=function(){return e[t].overloadTable.hasOwnProperty(arguments.length)||q(`Function '${r}' called with an invalid number of arguments (${arguments.length}) - expects one of (${e[t].overloadTable})!`),e[t].overloadTable[arguments.length].apply(this,arguments)},e[t].overloadTable=[],e[t].overloadTable[i.argCount]=i}},se=(e,t,r)=>{n.hasOwnProperty(e)?((void 0===r||void 0!==n[e].overloadTable&&void 0!==n[e].overloadTable[r])&&q(`Cannot register public name '${e}' twice`),ne(n,e,e),n.hasOwnProperty(r)&&q(`Cannot register multiple overloads of a function with the same number of arguments (${r})!`),n[e].overloadTable[r]=t):(n[e]=t,void 0!==r&&(n[e].numArguments=r))},oe=(e,t,r)=>{n.hasOwnProperty(e)||B("Replacing nonexistant public symbol"),void 0!==n[e].overloadTable&&void 0!==r?n[e].overloadTable[r]=t:(n[e]=t,n[e].argCount=r)},ae=[],le=e=>{var t=ae[e];return t||(e>=ae.length&&(ae.length=e+1),ae[e]=t=K.get(e)),t},ue=(e,t)=>{var r=(e=X(e)).includes("j")?((e,t)=>{var r=[];return function(){return r.length=0,Object.assign(r,arguments),((e,t,r)=>e.includes("j")?((e,t,r)=>{var i=n["dynCall_"+e];return r&&r.length?i.apply(null,[t].concat(r)):i.call(null,t)})(e,t,r):le(t).apply(null,r))(e,t,r)}})(e,t):le(t);return"function"!=typeof r&&q(`unknown function pointer with signature ${e}: ${t}`),r},ce=e=>{var t=$e(e),r=X(t);return Ee(t),r},pe=(e,t,r)=>{switch(t){case 1:return r?e=>p[0|e]:e=>d[0|e];case 2:return r?e=>h[e>>1]:e=>m[e>>1];case 4:return r?e=>y[e>>2]:e=>f[e>>2];default:throw new TypeError(`invalid integer width (${t}): ${e}`)}};function de(e){return this.fromWireType(f[e>>2])}var he,me=(e,t,r,i)=>{if(!(i>0))return 0;for(var n=r,s=r+i-1,o=0;o<e.length;++o){var a=e.charCodeAt(o);if(a>=55296&&a<=57343&&(a=65536+((1023&a)<<10)|1023&e.charCodeAt(++o)),a<=127){if(r>=s)break;t[r++]=a}else if(a<=2047){if(r+1>=s)break;t[r++]=192|a>>6,t[r++]=128|63&a}else if(a<=65535){if(r+2>=s)break;t[r++]=224|a>>12,t[r++]=128|a>>6&63,t[r++]=128|63&a}else{if(r+3>=s)break;t[r++]=240|a>>18,t[r++]=128|a>>12&63,t[r++]=128|a>>6&63,t[r++]=128|63&a}}return t[r]=0,r-n},ye=e=>{for(var t=0,r=0;r<e.length;++r){var i=e.charCodeAt(r);i<=127?t++:i<=2047?t+=2:i>=55296&&i<=57343?(t+=4,++r):t+=3}return t},fe="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0,ge=(e,t)=>e?((e,t,r)=>{for(var i=t+r,n=t;e[n]&&!(n>=i);)++n;if(n-t>16&&e.buffer&&fe)return fe.decode(e.subarray(t,n));for(var s="";t<n;){var o=e[t++];if(128&o){var a=63&e[t++];if(192!=(224&o)){var l=63&e[t++];if((o=224==(240&o)?(15&o)<<12|a<<6|l:(7&o)<<18|a<<12|l<<6|63&e[t++])<65536)s+=String.fromCharCode(o);else{var u=o-65536;s+=String.fromCharCode(55296|u>>10,56320|1023&u)}}else s+=String.fromCharCode((31&o)<<6|a)}else s+=String.fromCharCode(o)}return s})(d,e,t):"",ve="undefined"!=typeof TextDecoder?new TextDecoder("utf-16le"):void 0,_e=(e,t)=>{for(var r=e,i=r>>1,n=i+t/2;!(i>=n)&&m[i];)++i;if((r=i<<1)-e>32&&ve)return ve.decode(d.subarray(e,r));for(var s="",o=0;!(o>=t/2);++o){var a=h[e+2*o>>1];if(0==a)break;s+=String.fromCharCode(a)}return s},we=(e,t,r)=>{if(void 0===r&&(r=2147483647),r<2)return 0;for(var i=t,n=(r-=2)<2*e.length?r/2:e.length,s=0;s<n;++s){var o=e.charCodeAt(s);h[t>>1]=o,t+=2}return h[t>>1]=0,t-i},be=e=>2*e.length,Te=(e,t)=>{for(var r=0,i="";!(r>=t/4);){var n=y[e+4*r>>2];if(0==n)break;if(++r,n>=65536){var s=n-65536;i+=String.fromCharCode(55296|s>>10,56320|1023&s)}else i+=String.fromCharCode(n)}return i},Se=(e,t,r)=>{if(void 0===r&&(r=2147483647),r<4)return 0;for(var i=t,n=i+r-4,s=0;s<e.length;++s){var o=e.charCodeAt(s);if(o>=55296&&o<=57343&&(o=65536+((1023&o)<<10)|1023&e.charCodeAt(++s)),y[t>>2]=o,(t+=4)+4>n)break}return y[t>>2]=0,t-i},Ae=e=>{for(var t=0,r=0;r<e.length;++r){var i=e.charCodeAt(r);i>=55296&&i<=57343&&++r,t+=4}return t},Ie={},Me=e=>{var t=(e-u.buffer.byteLength+65535)/65536;try{return u.grow(t),w(),1}catch(e){}},Oe={},De=()=>{if(!De.strings){var e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:o||"./this.program"};for(var t in Oe)void 0===Oe[t]?delete e[t]:e[t]=Oe[t];var r=[];for(var t in e)r.push(`${t}=${e[t]}`);De.strings=r}return De.strings},Ce=e=>e%4==0&&(e%100!=0||e%400==0),ke=[31,29,31,30,31,30,31,31,30,31,30,31],xe=[31,28,31,30,31,30,31,31,30,31,30,31],je=(e,t)=>{p.set(e,t)},Ue=(e,t)=>{e<128?t.push(e):t.push(e%128|128,e>>7)},Pe=[],Ne=(e,t)=>{K.set(e,t),ae[e]=K.get(e)};E=n.InternalError=class extends Error{constructor(e){super(e),this.name="InternalError"}},(()=>{for(var e=new Array(256),t=0;t<256;++t)e[t]=String.fromCharCode(t);Z=e})(),$=n.BindingError=class extends Error{constructor(e){super(e),this.name="BindingError"}},Object.assign(H.prototype,{get(e){return this.allocated[e]},has(e){return void 0!==this.allocated[e]},allocate(e){var t=this.freelist.pop()||this.allocated.length;return this.allocated[t]=e,t},free(e){this.allocated[e]=void 0,this.freelist.push(e)}}),Q.allocated.push({value:void 0},{value:null},{value:!0},{value:!1}),Q.reserved=Q.allocated.length,n.count_emval_handles=()=>{for(var e=0,t=Q.reserved;t<Q.allocated.length;++t)void 0!==Q.allocated[t]&&++e;return e},Y=n.UnboundTypeError=((e,t)=>{var r=function(e,t){return e=(e=>{if(void 0===e)return"_unknown";var t=(e=e.replace(/[^a-zA-Z0-9_]/g,"$")).charCodeAt(0);return t>=48&&t<=57?`_${e}`:e})(e),{[e]:function(){return t.apply(this,arguments)}}[e]}(t,(function(e){this.name=t,this.message=e;var r=new Error(e).stack;void 0!==r&&(this.stack=this.toString()+"\n"+r.replace(/^Error(:[^\n]*)?\n/,""))}));return r.prototype=Object.create(e.prototype),r.prototype.constructor=r,r.prototype.toString=function(){return void 0===this.message?this.name:`${this.name}: ${this.message}`},r})(Error,"UnboundTypeError");var Fe={k:(e,t,r)=>{throw new P(e).init(t,r),e},l:e=>{var t=N[e];delete N[e];var r=t.elements,i=r.length,n=r.map((e=>e.getterReturnType)).concat(r.map((e=>e.setterArgumentType))),s=t.rawConstructor,o=t.rawDestructor;z([e],n,(function(e){return r.forEach(((t,r)=>{var n=e[r],s=t.getter,o=t.getterContext,a=e[r+i],l=t.setter,u=t.setterContext;t.read=e=>n.fromWireType(s(o,e)),t.write=(e,t)=>{var r=[];l(u,e,a.toWireType(r,t)),F(r)}})),[{name:t.name,fromWireType:e=>{for(var t=new Array(i),n=0;n<i;++n)t[n]=r[n].read(e);return o(e),t},toWireType:(e,n)=>{if(i!==n.length)throw new TypeError(`Incorrect number of tuple elements for ${t.name}: expected=${i}, actual=${n.length}`);for(var a=s(),l=0;l<i;++l)r[l].write(a,n[l]);return null!==e&&e.push(o,a),a},argPackAdvance:8,readValueFromPointer:R,destructorFunction:o}]}))},s:e=>{var t=V[e];delete V[e];var r=t.rawConstructor,i=t.rawDestructor,n=t.fields,s=n.map((e=>e.getterReturnType)).concat(n.map((e=>e.setterArgumentType)));z([e],s,(e=>{var s={};return n.forEach(((t,r)=>{var i=t.fieldName,o=e[r],a=t.getter,l=t.getterContext,u=e[r+n.length],c=t.setter,p=t.setterContext;s[i]={read:e=>o.fromWireType(a(l,e)),write:(e,t)=>{var r=[];c(p,e,u.toWireType(r,t)),F(r)}}})),[{name:t.name,fromWireType:e=>{var t={};for(var r in s)t[r]=s[r].read(e);return i(e),t},toWireType:(e,t)=>{for(var n in s)if(!(n in t))throw new TypeError(`Missing field: "${n}"`);var o=r();for(n in s)s[n].write(o,t[n]);return null!==e&&e.push(i,o),o},argPackAdvance:8,readValueFromPointer:R,destructorFunction:i}]}))},u:(e,t,r,i,n)=>{},B:(e,t,r,i)=>{G(e,{name:t=X(t),fromWireType:function(e){return!!e},toWireType:function(e,t){return t?r:i},argPackAdvance:8,readValueFromPointer:function(e){return this.fromWireType(d[e])},destructorFunction:null})},A:(e,t)=>{G(e,{name:t=X(t),fromWireType:e=>{var t=te(e);return ee(e),t},toWireType:(e,t)=>re(t),argPackAdvance:8,readValueFromPointer:R,destructorFunction:null})},r:(e,t,r)=>{G(e,{name:t=X(t),fromWireType:e=>e,toWireType:(e,t)=>t,argPackAdvance:8,readValueFromPointer:ie(t,r),destructorFunction:null})},c:(e,t,r,i,n,s,o)=>{var a=((e,t)=>{for(var r=[],i=0;i<e;i++)r.push(f[t+4*i>>2]);return r})(t,r);e=(e=>{const t=(e=e.trim()).indexOf("(");return-1!==t?(function(e){e||D("Parentheses for argument names should match.")}(")"==e[e.length-1]),e.substr(0,t)):e})(e=X(e)),n=ue(i,n),se(e,(function(){((e,t)=>{var r=[],i={};throw t.forEach((function e(t){i[t]||J[t]||(L[t]?L[t].forEach(e):(r.push(t),i[t]=!0))})),new Y(`${e}: `+r.map(ce).join([", "]))})(`Cannot call ${e} due to unbound types`,a)}),t-1),z([],a,(function(r){var i=[r[0],null].concat(r.slice(1));return oe(e,function(e,t,r,i,n){var s=t.length;s<2&&q("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var o=null!==t[1]&&!1,a=!1,l=1;l<t.length;++l)if(null!==t[l]&&void 0===t[l].destructorFunction){a=!0;break}var u="void"!==t[0].name,c=s-2,p=new Array(c),d=[],h=[];return function(){var r;arguments.length!==c&&q(`function ${e} called with ${arguments.length} arguments, expected ${c}`),h.length=0,d.length=o?2:1,d[0]=n,o&&(r=t[1].toWireType(h,this),d[1]=r);for(var s=0;s<c;++s)p[s]=t[s+2].toWireType(h,arguments[s]),d.push(p[s]);return function(e){if(a)F(h);else for(var i=o?1:2;i<t.length;i++){var n=1===i?r:p[i-2];null!==t[i].destructorFunction&&t[i].destructorFunction(n)}if(u)return t[0].fromWireType(e)}(i.apply(null,d))}}(e,i,0,n,s),t-1),[]}))},f:(e,t,r,i,n)=>{t=X(t);var s=e=>e;if(0===i){var o=32-8*r;s=e=>e<<o>>>o}var a=t.includes("unsigned");G(e,{name:t,fromWireType:s,toWireType:a?function(e,t){return this.name,t>>>0}:function(e,t){return this.name,t},argPackAdvance:8,readValueFromPointer:pe(t,r,0!==i),destructorFunction:null})},b:(e,t,r)=>{var i=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array][t];function n(e){var t=f[e>>2],r=f[e+4>>2];return new i(p.buffer,r,t)}G(e,{name:r=X(r),fromWireType:n,argPackAdvance:8,readValueFromPointer:n},{ignoreDuplicateRegistrations:!0})},q:(e,t)=>{var r="std::string"===(t=X(t));G(e,{name:t,fromWireType(e){var t,i=f[e>>2],n=e+4;if(r)for(var s=n,o=0;o<=i;++o){var a=n+o;if(o==i||0==d[a]){var l=ge(s,a-s);void 0===t?t=l:(t+=String.fromCharCode(0),t+=l),s=a+1}}else{var u=new Array(i);for(o=0;o<i;++o)u[o]=String.fromCharCode(d[n+o]);t=u.join("")}return Ee(e),t},toWireType(e,t){var i;t instanceof ArrayBuffer&&(t=new Uint8Array(t));var n="string"==typeof t;n||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Int8Array||q("Cannot pass non-string to std::string"),i=r&&n?ye(t):t.length;var s=Ze(4+i+1),o=s+4;if(f[s>>2]=i,r&&n)((e,t,r)=>{me(e,d,t,r)})(t,o,i+1);else if(n)for(var a=0;a<i;++a){var l=t.charCodeAt(a);l>255&&(Ee(o),q("String has UTF-16 code units that do not fit in 8 bits")),d[o+a]=l}else for(a=0;a<i;++a)d[o+a]=t[a];return null!==e&&e.push(Ee,s),s},argPackAdvance:8,readValueFromPointer:de,destructorFunction(e){Ee(e)}})},o:(e,t,r)=>{var i,n,s,o,a;r=X(r),2===t?(i=_e,n=we,o=be,s=()=>m,a=1):4===t&&(i=Te,n=Se,o=Ae,s=()=>f,a=2),G(e,{name:r,fromWireType:e=>{for(var r,n=f[e>>2],o=s(),l=e+4,u=0;u<=n;++u){var c=e+4+u*t;if(u==n||0==o[c>>a]){var p=i(l,c-l);void 0===r?r=p:(r+=String.fromCharCode(0),r+=p),l=c+t}}return Ee(e),r},toWireType:(e,i)=>{"string"!=typeof i&&q(`Cannot pass non-string to C++ string type ${r}`);var s=o(i),l=Ze(4+s+t);return f[l>>2]=s>>a,n(i,l+4,s+t),null!==e&&e.push(Ee,l),l},argPackAdvance:8,readValueFromPointer:R,destructorFunction(e){Ee(e)}})},m:(e,t,r,i,n,s)=>{N[e]={name:X(t),rawConstructor:ue(r,i),rawDestructor:ue(n,s),elements:[]}},d:(e,t,r,i,n,s,o,a,l)=>{N[e].elements.push({getterReturnType:t,getter:ue(r,i),getterContext:n,setterArgumentType:s,setter:ue(o,a),setterContext:l})},t:(e,t,r,i,n,s)=>{V[e]={name:X(t),rawConstructor:ue(r,i),rawDestructor:ue(n,s),fields:[]}},i:(e,t,r,i,n,s,o,a,l,u)=>{V[e].fields.push({fieldName:X(t),getterReturnType:r,getter:ue(i,n),getterContext:s,setterArgumentType:o,setter:ue(a,l),setterContext:u})},C:(e,t)=>{G(e,{isVoid:!0,name:t=X(t),argPackAdvance:0,fromWireType:()=>{},toWireType:(e,t)=>{}})},a:ee,n:e=>{e>4&&(Q.get(e).refcount+=1)},D:()=>re([]),h:e=>re((e=>{var t=Ie[e];return void 0===t?X(e):t})(e)),j:()=>re({}),e:(e,t,r)=>{e=te(e),t=te(t),r=te(r),e[t]=r},g:(e,t)=>{var r=(e=(e=>{var t=J[e];return void 0===t&&q("_emval_take_value has unknown type "+ce(e)),t})(e)).readValueFromPointer(t);return re(r)},p:()=>{D("")},z:(e,t,r)=>d.copyWithin(e,t,t+r),y:e=>{var t=d.length,r=2147483648;if((e>>>=0)>r)return!1;for(var i=(e,t)=>e+(t-e%t)%t,n=1;n<=4;n*=2){var s=t*(1+.2/n);s=Math.min(s,e+100663296);var o=Math.min(r,i(Math.max(e,s),65536));if(Me(o))return!0}return!1},w:(e,t)=>{var r=0;return De().forEach(((i,n)=>{var s=t+r;f[e+4*n>>2]=s,((e,t)=>{for(var r=0;r<e.length;++r)p[0|t++]=e.charCodeAt(r);p[0|t]=0})(i,s),r+=i.length+1})),0},x:(e,t)=>{var r=De();f[e>>2]=r.length;var i=0;return r.forEach((e=>i+=e.length+1)),f[t>>2]=i,0},v:(e,t,r,i,n)=>((e,t,r,i)=>{var n=f[i+40>>2],s={tm_sec:y[i>>2],tm_min:y[i+4>>2],tm_hour:y[i+8>>2],tm_mday:y[i+12>>2],tm_mon:y[i+16>>2],tm_year:y[i+20>>2],tm_wday:y[i+24>>2],tm_yday:y[i+28>>2],tm_isdst:y[i+32>>2],tm_gmtoff:y[i+36>>2],tm_zone:n?ge(n):""},o=ge(r),a={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var l in a)o=o.replace(new RegExp(l,"g"),a[l]);var u=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],c=["January","February","March","April","May","June","July","August","September","October","November","December"];function p(e,t,r){for(var i="number"==typeof e?e.toString():e||"";i.length<t;)i=r[0]+i;return i}function d(e,t){return p(e,t,"0")}function h(e,t){function r(e){return e<0?-1:e>0?1:0}var i;return 0===(i=r(e.getFullYear()-t.getFullYear()))&&0===(i=r(e.getMonth()-t.getMonth()))&&(i=r(e.getDate()-t.getDate())),i}function m(e){switch(e.getDay()){case 0:return new Date(e.getFullYear()-1,11,29);case 1:return e;case 2:return new Date(e.getFullYear(),0,3);case 3:return new Date(e.getFullYear(),0,2);case 4:return new Date(e.getFullYear(),0,1);case 5:return new Date(e.getFullYear()-1,11,31);case 6:return new Date(e.getFullYear()-1,11,30)}}function g(e){var t=((e,t)=>{for(var r=new Date(e.getTime());t>0;){var i=Ce(r.getFullYear()),n=r.getMonth(),s=(i?ke:xe)[n];if(!(t>s-r.getDate()))return r.setDate(r.getDate()+t),r;t-=s-r.getDate()+1,r.setDate(1),n<11?r.setMonth(n+1):(r.setMonth(0),r.setFullYear(r.getFullYear()+1))}return r})(new Date(e.tm_year+1900,0,1),e.tm_yday),r=new Date(t.getFullYear(),0,4),i=new Date(t.getFullYear()+1,0,4),n=m(r),s=m(i);return h(n,t)<=0?h(s,t)<=0?t.getFullYear()+1:t.getFullYear():t.getFullYear()-1}var v={"%a":e=>u[e.tm_wday].substring(0,3),"%A":e=>u[e.tm_wday],"%b":e=>c[e.tm_mon].substring(0,3),"%B":e=>c[e.tm_mon],"%C":e=>d((e.tm_year+1900)/100|0,2),"%d":e=>d(e.tm_mday,2),"%e":e=>p(e.tm_mday,2," "),"%g":e=>g(e).toString().substring(2),"%G":e=>g(e),"%H":e=>d(e.tm_hour,2),"%I":e=>{var t=e.tm_hour;return 0==t?t=12:t>12&&(t-=12),d(t,2)},"%j":e=>d(e.tm_mday+((e,t)=>{for(var r=0,i=0;i<=t;r+=e[i++]);return r})(Ce(e.tm_year+1900)?ke:xe,e.tm_mon-1),3),"%m":e=>d(e.tm_mon+1,2),"%M":e=>d(e.tm_min,2),"%n":()=>"\n","%p":e=>e.tm_hour>=0&&e.tm_hour<12?"AM":"PM","%S":e=>d(e.tm_sec,2),"%t":()=>"\t","%u":e=>e.tm_wday||7,"%U":e=>{var t=e.tm_yday+7-e.tm_wday;return d(Math.floor(t/7),2)},"%V":e=>{var t=Math.floor((e.tm_yday+7-(e.tm_wday+6)%7)/7);if((e.tm_wday+371-e.tm_yday-2)%7<=2&&t++,t){if(53==t){var r=(e.tm_wday+371-e.tm_yday)%7;4==r||3==r&&Ce(e.tm_year)||(t=1)}}else{t=52;var i=(e.tm_wday+7-e.tm_yday-1)%7;(4==i||5==i&&Ce(e.tm_year%400-1))&&t++}return d(t,2)},"%w":e=>e.tm_wday,"%W":e=>{var t=e.tm_yday+7-(e.tm_wday+6)%7;return d(Math.floor(t/7),2)},"%y":e=>(e.tm_year+1900).toString().substring(2),"%Y":e=>e.tm_year+1900,"%z":e=>{var t=e.tm_gmtoff,r=t>=0;return t=(t=Math.abs(t)/60)/60*100+t%60,(r?"+":"-")+String("0000"+t).slice(-4)},"%Z":e=>e.tm_zone,"%%":()=>"%"};for(var l in o=o.replace(/%%/g,"\0\0"),v)o.includes(l)&&(o=o.replace(new RegExp(l,"g"),v[l](s)));var _=function(e){var t=ye(e)+1,r=new Array(t);return me(e,r,0,r.length),r}(o=o.replace(/\0\0/g,"%"));return _.length>t?0:(je(_,e),_.length-1)})(e,t,r,i)},Re=function(){var e={a:Fe};function t(e,t){return Re=e.exports,u=Re.E,w(),K=Re.G,function(e){T.unshift(e)}(Re.F),function(){if(M--,n.monitorRunDependencies&&n.monitorRunDependencies(M),0==M&&O){var e=O;O=null,e()}}(),Re}if(M++,n.monitorRunDependencies&&n.monitorRunDependencies(M),n.instantiateWasm)try{return n.instantiateWasm(e,t)}catch(e){c(`Module.instantiateWasm callback failed with error: ${e}`),i(e)}return function(e,t,r,i){return e||"function"!=typeof WebAssembly.instantiateStreaming||k(t)||"function"!=typeof fetch?j(t,r,i):fetch(t,{credentials:"same-origin"}).then((e=>WebAssembly.instantiateStreaming(e,r).then(i,(function(e){return c(`wasm streaming compile failed: ${e}`),c("falling back to ArrayBuffer instantiation"),j(t,r,i)}))))}(l,C,e,(function(e){t(e.instance)})).catch(i),{}}(),Ee=n._free=e=>(Ee=n._free=Re.H)(e),Ze=n._malloc=e=>(Ze=n._malloc=Re.I)(e),$e=e=>($e=Re.J)(e);n.__embind_initialize_bindings=()=>(n.__embind_initialize_bindings=Re.K)();var We,Je=e=>(Je=Re.L)(e);function Le(){function e(){We||(We=!0,n.calledRun=!0,_||(U(T),r(n),n.onRuntimeInitialized&&n.onRuntimeInitialized(),function(){if(n.postRun)for("function"==typeof n.postRun&&(n.postRun=[n.postRun]);n.postRun.length;)I(n.postRun.shift());U(S)}()))}M>0||(function(){if(n.preRun)for("function"==typeof n.preRun&&(n.preRun=[n.preRun]);n.preRun.length;)A(n.preRun.shift());U(b)}(),M>0||(n.setStatus?(n.setStatus("Running..."),setTimeout((function(){setTimeout((function(){n.setStatus("")}),1),e()}),1)):e()))}if(n.dynCall_viji=(e,t,r,i,s)=>(n.dynCall_viji=Re.M)(e,t,r,i,s),n.dynCall_ji=(e,t)=>(n.dynCall_ji=Re.N)(e,t),n.dynCall_viijii=(e,t,r,i,s,o,a)=>(n.dynCall_viijii=Re.O)(e,t,r,i,s,o,a),n.dynCall_iiiiij=(e,t,r,i,s,o,a)=>(n.dynCall_iiiiij=Re.P)(e,t,r,i,s,o,a),n.dynCall_iiiiijj=(e,t,r,i,s,o,a,l,u)=>(n.dynCall_iiiiijj=Re.Q)(e,t,r,i,s,o,a,l,u),n.dynCall_iiiiiijj=(e,t,r,i,s,o,a,l,u,c)=>(n.dynCall_iiiiiijj=Re.R)(e,t,r,i,s,o,a,l,u,c),n.addFunction=(e,t)=>{var r=(e=>(he||(he=new WeakMap,((e,t)=>{if(he)for(var r=0;r<0+t;r++){var i=le(r);i&&he.set(i,r)}})(0,K.length)),he.get(e)||0))(e);if(r)return r;var i=(()=>{if(Pe.length)return Pe.pop();try{K.grow(1)}catch(e){if(!(e instanceof RangeError))throw e;throw"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH."}return K.length-1})();try{Ne(i,e)}catch(r){if(!(r instanceof TypeError))throw r;var n=((e,t)=>{if("function"==typeof WebAssembly.Function)return new WebAssembly.Function((e=>{for(var t={i:"i32",j:"i64",f:"f32",d:"f64",e:"externref",p:"i32"},r={parameters:[],results:"v"==e[0]?[]:[t[e[0]]]},i=1;i<e.length;++i)r.parameters.push(t[e[i]]);return r})(t),e);var r=[1];((e,t)=>{var r=e.slice(0,1),i=e.slice(1),n={i:127,p:127,j:126,f:125,d:124,e:111};t.push(96),Ue(i.length,t);for(var s=0;s<i.length;++s)t.push(n[i[s]]);"v"==r?t.push(0):t.push(1,n[r])})(t,r);var i=[0,97,115,109,1,0,0,0,1];Ue(r.length,i),i.push.apply(i,r),i.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0);var n=new WebAssembly.Module(new Uint8Array(i));return new WebAssembly.Instance(n,{e:{f:e}}).exports.f})(e,t);Ne(i,n)}return he.set(e,i),i},n.UTF8ToString=ge,O=function e(){We||Le(),We||(O=e)},n.preInit)for("function"==typeof n.preInit&&(n.preInit=[n.preInit]);n.preInit.length>0;)n.preInit.pop()();return Le(),e.ready},e.exports=r),s.exports;var e,t,r}()),a=Object.freeze(Object.defineProperty({__proto__:null,default:o},Symbol.toStringTag,{value:"Module"}))},79915:(e,t,r)=>{r.d(t,{A:()=>f});var i,n=r(82392),s=r(20857),o=r(20879),a=r(3438),l=r(14755),u=r(84977),c=r(81482),p=(r(6273),r(80861),r(67498),r(25376)),d=r(26325),h=r(1912),m=r(93122);let y=i=class extends((0,l.O)(u.oY)){constructor(e){super(e),this.alternateName=null,this.arrivalTime=null,this.arrivalTimeOffset=null,this.azimuth=null,this.branchName=null,this.directionPointType=null,this.displayText=null,this.exitName=null,this.geometry=null,this.intersectingName=null,this.level=null,this.name=null,this.objectId=null,this.popupTemplate=null,this.sequence=null,this.shortVoiceInstruction=null,this.stopId=null,this.symbol=null,this.towardName=null,this.type="direction-point",this.voiceInstruction=null}readArrivalTime(e,t){return null!=t.attributes.ArrivalTime?new Date(t.attributes.ArrivalTime):null}static fromGraphic(e){return new i({alternateName:e.attributes.AlternateName??null,arrivalTime:null!=e.attributes.ArrivalTime?new Date(e.attributes.ArrivalTime):null,arrivalTimeOffset:e.attributes.ArrivalUTCOffset??null,azimuth:e.attributes.Azimuth??null,branchName:e.attributes.BranchName??null,directionPointType:m._6.fromJSON(e.attributes.DirectionPointType),displayText:e.attributes.DisplayText??null,exitName:e.attributes.ExitName??null,geometry:e.geometry,intersectingName:e.attributes.IntersectingName??null,level:e.attributes.Level??null,name:e.attributes.Name??null,objectId:e.attributes.ObjectID??e.attributes.__OBJECTID,popupTemplate:e.popupTemplate,sequence:e.attributes.Sequence,shortVoiceInstruction:e.attributes.ShortVoiceInstruction??null,stopId:e.attributes.StopID??null,symbol:e.symbol,towardName:e.attributes.TowardName??null,voiceInstruction:e.attributes.VoiceInstruction??null})}toGraphic(){const e={ObjectID:this.objectId,DirectionPointType:null!=this.directionPointType?m._6.toJSON(this.directionPointType):null,Sequence:this.sequence,StopID:this.stopId};return null!=this.alternateName&&(e.AlternateName=this.alternateName),null!=this.arrivalTime&&(e.ArrivalTime=this.arrivalTime.getTime()),null!=this.arrivalTimeOffset&&(e.ArrivalUTCOffset=this.arrivalTimeOffset),null!=this.azimuth&&(e.Azimuth=this.azimuth),null!=this.branchName&&(e.BranchName=this.branchName),null!=this.displayText&&(e.DisplayText=this.displayText),null!=this.exitName&&(e.ExitName=this.exitName),null!=this.intersectingName&&(e.IntersectingName=this.intersectingName),null!=this.level&&(e.Level=this.level),null!=this.name&&(e.Name=this.name),null!=this.shortVoiceInstruction&&(e.ShortVoiceInstruction=this.shortVoiceInstruction),null!=this.towardName&&(e.TowardName=this.towardName),null!=this.voiceInstruction&&(e.VoiceInstruction=this.voiceInstruction),new s.A({geometry:this.geometry,attributes:e,symbol:this.symbol,popupTemplate:this.popupTemplate})}};y.fields=[{name:"ObjectID",alias:"ObjectID",type:"esriFieldTypeOID"},{name:"AlternateName",alias:"Alternative Name",type:"esriFieldTypeString"},{name:"ArrivalTime",alias:"Arrival Time",type:"esriFieldTypeDate"},{name:"ArrivalUTCOffset",alias:"Arrival Time Offset",type:"esriFieldTypeInteger"},{name:"Azimuth",alias:"Azimuth",type:"esriFieldTypeDouble"},{name:"BranchName",alias:"Branch Name",type:"esriFieldTypeString"},{name:"DirectionPointType",alias:"Directions Point Type",type:"esriFieldTypeInteger"},{name:"DisplayText",alias:"Display Text",type:"esriFieldTypeString"},{name:"ExitName",alias:"Exit Name",type:"esriFieldTypeString"},{name:"IntersectingName",alias:"Intersecting Name",type:"esriFieldTypeString"},{name:"Level",alias:"Level",type:"esriFieldTypeInteger"},{name:"Name",alias:"Name",type:"esriFieldTypeString"},{name:"Sequence",alias:"Sequence",type:"esriFieldTypeInteger"},{name:"ShortVoiceInstruction",alias:"Short Voice Instruction",type:"esriFieldTypeString"},{name:"StopID",alias:"Stop ID",type:"esriFieldTypeInteger"},{name:"TowardName",alias:"Toward Name",type:"esriFieldTypeString"},{name:"VoiceInstruction",alias:"Voice Instruction",type:"esriFieldTypeString"}],(0,n._)([(0,c.MZ)({json:{read:{source:"attributes.AlternateName"}}})],y.prototype,"alternateName",void 0),(0,n._)([(0,c.MZ)()],y.prototype,"arrivalTime",void 0),(0,n._)([(0,p.w)("arrivalTime",["attributes.ArrivalTime"])],y.prototype,"readArrivalTime",null),(0,n._)([(0,c.MZ)({json:{read:{source:"attributes.ArrivalUTCOffset"}}})],y.prototype,"arrivalTimeOffset",void 0),(0,n._)([(0,c.MZ)({json:{read:{source:"attributes.Azimuth"}}})],y.prototype,"azimuth",void 0),(0,n._)([(0,c.MZ)({json:{read:{source:"attributes.BranchName"}}})],y.prototype,"branchName",void 0),(0,n._)([(0,c.MZ)({type:m._6.apiValues,json:{read:{source:"attributes.DirectionPointType",reader:m._6.read}}})],y.prototype,"directionPointType",void 0),(0,n._)([(0,c.MZ)({json:{read:{source:"attributes.DisplayText"}}})],y.prototype,"displayText",void 0),(0,n._)([(0,c.MZ)({json:{read:{source:"attributes.ExitName"}}})],y.prototype,"exitName",void 0),(0,n._)([(0,c.MZ)({type:h.A})],y.prototype,"geometry",void 0),(0,n._)([(0,c.MZ)({json:{read:{source:"attributes.IntersectingName"}}})],y.prototype,"intersectingName",void 0),(0,n._)([(0,c.MZ)({json:{read:{source:"attributes.Level"}}})],y.prototype,"level",void 0),(0,n._)([(0,c.MZ)({json:{read:{source:"attributes.Name"}}})],y.prototype,"name",void 0),(0,n._)([(0,c.MZ)({json:{read:{source:"attributes.ObjectID"}}})],y.prototype,"objectId",void 0),(0,n._)([(0,c.MZ)({type:o.A})],y.prototype,"popupTemplate",void 0),(0,n._)([(0,c.MZ)({json:{read:{source:"attributes.Sequence"}}})],y.prototype,"sequence",void 0),(0,n._)([(0,c.MZ)({json:{read:{source:"attributes.ShortVoiceInstruction"}}})],y.prototype,"shortVoiceInstruction",void 0),(0,n._)([(0,c.MZ)({json:{read:{source:"attributes.StopID"}}})],y.prototype,"stopId",void 0),(0,n._)([(0,c.MZ)({types:a.Es})],y.prototype,"symbol",void 0),(0,n._)([(0,c.MZ)({json:{read:{source:"attributes.TowardName"}}})],y.prototype,"towardName",void 0),(0,n._)([(0,c.MZ)({readOnly:!0,json:{read:!1}})],y.prototype,"type",void 0),(0,n._)([(0,c.MZ)({json:{read:{source:"attributes.VoiceInstruction"}}})],y.prototype,"voiceInstruction",void 0),y=i=(0,n._)([(0,d.$)("esri.rest.support.DirectionPoint")],y);const f=y},91508:(e,t,r)=>{r.r(t),r.d(t,{registerFunctions:()=>d});var i=r(90364),n=r(91017),s=r(82951),o=r(52027),a=r(28837),l=r(61064),u=r(48380);function c(e){return e instanceof l.A}function p(e,t,r,p){return p(e,t,(async(p,d,h)=>{if(h.length<2)throw new i.D$(e,i.TX.WrongNumberOfParameters,t);if(null===(h=(0,s.H)(h))[0]&&null===h[1])return!1;if((0,s.u)(h[0])){if(h[1]instanceof l.A)return new o.A({parentfeatureset:h[0],relation:r,relationGeom:h[1]});if(null===h[1])return new a.A({parentfeatureset:h[0]});throw new i.D$(e,i.TX.InvalidParameter,t)}if(c(h[0])){if(c(h[1])){switch(r){case"esriSpatialRelEnvelopeIntersects":return(0,u.intersects)((0,n.Yc)(h[0]),(0,n.Yc)(h[1]));case"esriSpatialRelIntersects":return(0,u.intersects)(h[0],h[1]);case"esriSpatialRelContains":return(0,u.contains)(h[0],h[1]);case"esriSpatialRelOverlaps":return(0,u.overlaps)(h[0],h[1]);case"esriSpatialRelWithin":return(0,u.within)(h[0],h[1]);case"esriSpatialRelTouches":return(0,u.touches)(h[0],h[1]);case"esriSpatialRelCrosses":return(0,u.crosses)(h[0],h[1])}throw new i.D$(e,i.TX.InvalidParameter,t)}if((0,s.u)(h[1]))return new o.A({parentfeatureset:h[1],relation:r,relationGeom:h[0]});if(null===h[1])return!1;throw new i.D$(e,i.TX.InvalidParameter,t)}if(null===h[0]){if((0,s.u)(h[1]))return new a.A({parentfeatureset:h[1]});if(h[1]instanceof l.A||null===h[1])return!1}throw new i.D$(e,i.TX.InvalidParameter,t)}))}function d(e){"async"===e.mode&&(e.functions.intersects=function(t,r){return p(t,r,"esriSpatialRelIntersects",e.standardFunctionAsync)},e.functions.envelopeintersects=function(t,r){return p(t,r,"esriSpatialRelEnvelopeIntersects",e.standardFunctionAsync)},e.signatures.push({name:"envelopeintersects",min:2,max:2}),e.functions.contains=function(t,r){return p(t,r,"esriSpatialRelContains",e.standardFunctionAsync)},e.functions.overlaps=function(t,r){return p(t,r,"esriSpatialRelOverlaps",e.standardFunctionAsync)},e.functions.within=function(t,r){return p(t,r,"esriSpatialRelWithin",e.standardFunctionAsync)},e.functions.touches=function(t,r){return p(t,r,"esriSpatialRelTouches",e.standardFunctionAsync)},e.functions.crosses=function(t,r){return p(t,r,"esriSpatialRelCrosses",e.standardFunctionAsync)},e.functions.relate=function(t,r){return e.standardFunctionAsync(t,r,(async(e,n,o)=>{if(o=(0,s.H)(o),(0,s.G)(o,3,3,t,r),c(o[0])&&c(o[1]))return(0,u.relate)(o[0],o[1],(0,s.j)(o[2]));if(o[0]instanceof l.A&&null===o[1])return!1;if(o[1]instanceof l.A&&null===o[0])return!1;if((0,s.u)(o[0])&&null===o[1])return new a.A({parentfeatureset:o[0]});if((0,s.u)(o[1])&&null===o[0])return new a.A({parentfeatureset:o[1]});if((0,s.u)(o[0])&&o[1]instanceof l.A)return o[0].relate(o[1],(0,s.j)(o[2]));if((0,s.u)(o[1])&&o[0]instanceof l.A)return o[1].relate(o[0],(0,s.j)(o[2]));if(null===o[0]&&null===o[1])return!1;throw new i.D$(t,i.TX.InvalidParameter,r)}))})}},94122:(e,t,r)=>{r.r(t),r.d(t,{default:()=>d});var i=r(82392),n=r(62991),s=r(67214),o=r(9987),a=r(81482),l=(r(6273),r(80861),r(67498),r(26325)),u=r(45449),c=r(60368);let p=class extends((0,c.A)((0,s.P)(u.A))){constructor(e){super(e),this.resourceInfo=null,this.persistenceEnabled=!0,this.type="unsupported"}initialize(){this.addResolvingPromise(new Promise(((e,t)=>{(0,o._)((()=>{const e=this.resourceInfo&&(this.resourceInfo.layerType||this.resourceInfo.type);let r="Unsupported layer type";e&&(r+=" "+e),t(new n.A("layer:unsupported-layer-type",r,{layerType:e}))}))})))}read(e,t){const r={resourceInfo:e};null!=e.id&&(r.id=e.id),null!=e.title&&(r.title=e.title),super.read(r,t)}write(e,t){return Object.assign(e||{},this.resourceInfo,{id:this.id})}};(0,i._)([(0,a.MZ)({readOnly:!0})],p.prototype,"resourceInfo",void 0),(0,i._)([(0,a.MZ)({type:["show","hide"]})],p.prototype,"listMode",void 0),(0,i._)([(0,a.MZ)({type:Boolean,readOnly:!1})],p.prototype,"persistenceEnabled",void 0),(0,i._)([(0,a.MZ)({json:{read:!1},readOnly:!0,value:"unsupported"})],p.prototype,"type",void 0),p=(0,i._)([(0,l.$)("esri.layers.UnsupportedLayer")],p);const d=p},95058:(e,t,r)=>{r.r(t),r.d(t,{default:()=>_});var i=r(82392),n=(r(3313),r(38116)),s=r(62991),o=r(1817),a=r(67214),l=r(81482),u=(r(6273),r(80861),r(67498),r(26325)),c=r(44153),p=r(90822),d=r(20923),h=r(4648),m=r(79083),y=r(26574),f=r(1912);const g=new o.J({BingMapsAerial:"aerial",BingMapsRoad:"road",BingMapsHybrid:"hybrid"});let v=class extends((0,d.dM)((0,h.q)((0,a.P)(p.A)))){constructor(e){super(e),this.type="bing-maps",this.tileInfo=new y.A({size:[256,256],dpi:96,origin:new f.A({x:-20037508.342787,y:20037508.342787,spatialReference:c.A.WebMercator}),spatialReference:c.A.WebMercator,lods:[new m.A({level:1,resolution:78271.5169639999,scale:295828763.795777}),new m.A({level:2,resolution:39135.7584820001,scale:147914381.897889}),new m.A({level:3,resolution:19567.8792409999,scale:73957190.948944}),new m.A({level:4,resolution:9783.93962049996,scale:36978595.474472}),new m.A({level:5,resolution:4891.96981024998,scale:18489297.737236}),new m.A({level:6,resolution:2445.98490512499,scale:9244648.868618}),new m.A({level:7,resolution:1222.99245256249,scale:4622324.434309}),new m.A({level:8,resolution:611.49622628138,scale:2311162.217155}),new m.A({level:9,resolution:305.748113140558,scale:1155581.108577}),new m.A({level:10,resolution:152.874056570411,scale:577790.554289}),new m.A({level:11,resolution:76.4370282850732,scale:288895.277144}),new m.A({level:12,resolution:38.2185141425366,scale:144447.638572}),new m.A({level:13,resolution:19.1092570712683,scale:72223.819286}),new m.A({level:14,resolution:9.55462853563415,scale:36111.909643}),new m.A({level:15,resolution:4.77731426794937,scale:18055.954822}),new m.A({level:16,resolution:2.38865713397468,scale:9027.977411}),new m.A({level:17,resolution:1.19432856685505,scale:4513.988705}),new m.A({level:18,resolution:.597164283559817,scale:2256.994353}),new m.A({level:19,resolution:.298582141647617,scale:1128.497176}),new m.A({level:20,resolution:.1492910708238085,scale:564.248588})]}),this.key=null,this.style="road",this.culture="en-US",this.region=null,this.portalUrl=null,this.hasAttributionData=!0}get bingMetadata(){return this._get("bingMetadata")}set bingMetadata(e){this._set("bingMetadata",e)}get copyright(){return null!=this.bingMetadata?this.bingMetadata.copyright:null}get operationalLayerType(){return g.toJSON(this.style)}get bingLogo(){return null!=this.bingMetadata?this.bingMetadata.brandLogoUri:null}load(e){return this.key?this.addResolvingPromise(this._getMetadata()):this.portalUrl?this.addResolvingPromise(this._getPortalBingKey().then((()=>this._getMetadata()))):this.addResolvingPromise(Promise.reject(new s.A("bingmapslayer:load","Bing layer must have bing key."))),Promise.resolve(this)}getTileUrl(e,t,r){if(!this.loaded||null==this.bingMetadata)return null;const i=this.bingMetadata.resourceSets[0].resources[0],n=i.imageUrlSubdomains[t%i.imageUrlSubdomains.length],s=this._getQuadKey(e,t,r);return i.imageUrl.replace("{subdomain}",n).replace("{quadkey}",s)}async fetchAttributionData(){return this.load().then((()=>null==this.bingMetadata?null:{contributors:this.bingMetadata.resourceSets[0].resources[0].imageryProviders.map((e=>({attribution:e.attribution,coverageAreas:e.coverageAreas.map((e=>({zoomMin:e.zoomMin,zoomMax:e.zoomMax,score:1,bbox:[e.bbox[0],e.bbox[1],e.bbox[2],e.bbox[3]]})))})))}))}_getMetadata(){const e={road:"roadOnDemand",aerial:"aerial",hybrid:"aerialWithLabelsOnDemand"}[this.style];return(0,n.A)(`https://dev.virtualearth.net/REST/v1/Imagery/Metadata/${e}`,{responseType:"json",query:{include:"ImageryProviders",uriScheme:"https",key:this.key,suppressStatus:!0,output:"json",culture:this.culture,userRegion:this.region}}).then((e=>{const t=e.data;if(200!==t.statusCode)throw new s.A("bingmapslayer:getmetadata",t.statusDescription);if(this.bingMetadata=t,0===this.bingMetadata.resourceSets.length)throw new s.A("bingmapslayer:getmetadata","no bing resourcesets");if(0===this.bingMetadata.resourceSets[0].resources.length)throw new s.A("bingmapslayer:getmetadata","no bing resources")})).catch((e=>{throw new s.A("bingmapslayer:getmetadata",e.message)}))}_getPortalBingKey(){return(0,n.A)(this.portalUrl??"",{responseType:"json",authMode:"no-prompt",query:{f:"json"}}).then((e=>{if(!e.data.bingKey)throw new s.A("bingmapslayer:getportalbingkey","The referenced Portal does not contain a valid bing key");this.key=e.data.bingKey})).catch((e=>{throw new s.A("bingmapslayer:getportalbingkey",e.message)}))}_getQuadKey(e,t,r){let i="";for(let n=e;n>0;n--){let e=0;const s=1<<n-1;r&s&&(e+=1),t&s&&(e+=2),i+=e.toString()}return i}};(0,i._)([(0,l.MZ)({json:{read:!1,write:!1},value:null})],v.prototype,"bingMetadata",null),(0,i._)([(0,l.MZ)({json:{read:!1,write:!1},value:"bing-maps",readOnly:!0})],v.prototype,"type",void 0),(0,i._)([(0,l.MZ)({type:y.A})],v.prototype,"tileInfo",void 0),(0,i._)([(0,l.MZ)({type:String,readOnly:!0,json:{read:!1,write:!1}})],v.prototype,"copyright",null),(0,i._)([(0,l.MZ)({type:String,json:{write:!1,read:!1}})],v.prototype,"key",void 0),(0,i._)([(0,l.MZ)({type:g.apiValues,nonNullable:!0,json:{read:{source:"layerType",reader:g.read}}})],v.prototype,"style",void 0),(0,i._)([(0,l.MZ)({type:["BingMapsAerial","BingMapsHybrid","BingMapsRoad"]})],v.prototype,"operationalLayerType",null),(0,i._)([(0,l.MZ)({type:String,json:{write:!1,read:!1}})],v.prototype,"culture",void 0),(0,i._)([(0,l.MZ)({type:String,json:{write:!1,read:!1}})],v.prototype,"region",void 0),(0,i._)([(0,l.MZ)({type:String,json:{write:!0,read:!0}})],v.prototype,"portalUrl",void 0),(0,i._)([(0,l.MZ)({type:Boolean,json:{write:!1,read:!1}})],v.prototype,"hasAttributionData",void 0),(0,i._)([(0,l.MZ)({type:String,readOnly:!0})],v.prototype,"bingLogo",null),v=(0,i._)([(0,u.$)("esri.layers.BingMapsLayer")],v);const _=v},97264:(e,t,r)=>{r.r(t),r.d(t,{executeScript:()=>K,extend:()=>H,functionHelper:()=>G});var i=r(25107),n=r(68796),s=r(78355),o=r(89372),a=r(68476),l=r(90364),u=r(96480),c=r(30225),p=r(82951),d=r(60150),h=r(24653),m=r(72310),y=r(42788),f=r(34686),g=r(94575),v=r(17831),_=r(79257),w=r(61064),b=r(44153);const T=100;async function S(e,t){const r=[];for(let i=0;i<t.arguments.length;i++)r.push(await D(e,t.arguments[i]));return r}async function A(e,t,r){return!0===t.preparsed?r(e,null,t.arguments):r(e,t,await S(e,t))}class I extends c.fF{constructor(e,t){super(),this.definition=null,this.context=null,this.definition=e,this.context=t}createFunction(e){return(...t)=>{const r={spatialReference:this.context.spatialReference,console:this.context.console,lrucache:this.context.lrucache,timeZone:this.context.timeZone??null,exports:this.context.exports,libraryResolver:this.context.libraryResolver,interceptor:this.context.interceptor,localScope:{},depthCounter:{depth:e.depthCounter+1},globalScope:this.context.globalScope};if(r.depthCounter.depth>64)throw new l.D$(e,l.TX.MaximumCallDepth,null);return B(this.definition,r,t,null)}}call(e,t){return O(e,t,((r,i,n)=>{const s={spatialReference:e.spatialReference,services:e.services,console:e.console,libraryResolver:e.libraryResolver,exports:e.exports,lrucache:e.lrucache,timeZone:e.timeZone??null,interceptor:e.interceptor,localScope:{},abortSignal:e.abortSignal,globalScope:e.globalScope,depthCounter:{depth:e.depthCounter.depth+1}};if(s.depthCounter.depth>64)throw new l.D$(e,l.TX.MaximumCallDepth,t);return B(this.definition,s,n,t)}))}marshalledCall(e,t,r,i){return i(e,t,(async(n,s,o)=>{const a={spatialReference:e.spatialReference,globalScope:r.globalScope,depthCounter:{depth:e.depthCounter.depth+1},libraryResolver:e.libraryResolver,exports:e.exports,console:e.console,abortSignal:e.abortSignal,lrucache:e.lrucache,timeZone:e.timeZone??null,interceptor:e.interceptor,localScope:{}};return o=o.map((t=>!(0,p.i)(t)||t instanceof c.CU?t:(0,c.o6)(t,e,i))),(0,c.o6)(await B(this.definition,a,o,t),r,i)}))}}class M extends n.x{constructor(e){super(),this.source=e}async global(e){const t=this.executingContext.globalScope[e.toLowerCase()];if(t.valueset||(t.value=await D(this.executingContext,t.node),t.valueset=!0),(0,p.i)(t.value)&&!(t.value instanceof c.CU)){const e=new c.CU;e.fn=t.value,e.parameterEvaluator=O,e.context=this.executingContext,t.value=e}return t.value}setGlobal(e,t){if((0,p.i)(t))throw new l.D$(null,l.TX.AssignModuleFunction,null);this.executingContext.globalScope[e.toLowerCase()]={value:t,valueset:!0,node:null}}hasGlobal(e){return void 0===this.executingContext.exports[e]&&(e=e.toLowerCase()),void 0!==this.executingContext.exports[e]}async loadModule(e){let t=e.spatialReference;null==t&&(t=new b.A({wkid:102100})),this.moduleScope=X({},e.customfunctions,e.timeZone),this.executingContext={spatialReference:t,services:e.services,libraryResolver:new s.a(e.libraryResolver._moduleSingletons,this.source.syntax.loadedModules),exports:{},abortSignal:void 0===e.abortSignal||null===e.abortSignal?{aborted:!1}:e.abortSignal,globalScope:this.moduleScope,console:e.console??q,lrucache:e.lrucache,timeZone:e.timeZone??null,interceptor:e.interceptor,localScope:null,depthCounter:{depth:1}},await R(this.executingContext,this.source.syntax)}}async function O(e,t,r){return!0===t.preparsed?r(e,null,t.arguments):r(e,t,await S(e,t))}async function D(e,t){t.breakpoint&&await t.breakpoint();try{switch(t.type){case"UpdateExpression":return await async function(e,t){const r=t.argument;if("CallExpression"===r.type)throw new l.D$(e,l.TX.NeverReach,t);if("MemberExpression"===r.type){const i=await D(e,r.object);let n,s;if(!0===r.computed)n=await D(e,r.property);else{if("Identifier"!==r.property.type)throw new l.D$(e,l.TX.Unrecognized,t);n=r.property.name}if((0,p.o)(i)){if(!(0,p.b)(n))throw new l.D$(e,l.TX.ArrayAccessorMustBeNumber,t);if(n<0&&(n=i.length+n),n<0||n>=i.length)throw new l.D$(e,l.TX.OutOfBounds,t);s=(0,p.g)(i[n]),i[n]="++"===t.operator?s+1:s-1}else if(i instanceof a.A){if(!1===(0,p.c)(n))throw new l.D$(e,l.TX.KeyAccessorMustBeString,t);if(!0!==i.hasField(n))throw new l.D$(e,l.TX.FieldNotFound,t,{key:n});s=(0,p.g)(i.field(n)),i.setField(n,"++"===t.operator?s+1:s-1)}else if(i instanceof M){if(!1===(0,p.c)(n))throw new l.D$(e,l.TX.ModuleAccessorMustBeString,t);if(!0!==i.hasGlobal(n))throw new l.D$(e,l.TX.ModuleExportNotFound,t);s=(0,p.g)(await i.global(n)),i.setGlobal(n,"++"===t.operator?s+1:s-1)}else{if(!(0,p.r)(i))throw(0,p.q)(i)?new l.D$(e,l.TX.Immutable,t):new l.D$(e,l.TX.InvalidParameter,t);if(!1===(0,p.c)(n))throw new l.D$(e,l.TX.KeyAccessorMustBeString,t);if(!0!==i.hasField(n))throw new l.D$(e,l.TX.FieldNotFound,t,{key:n});s=(0,p.g)(i.field(n)),i.setField(n,"++"===t.operator?s+1:s-1)}return!1===t.prefix?s:"++"===t.operator?s+1:s-1}const n=(0,i.X)(r);let s;if(null!=e.localScope&&void 0!==e.localScope[n])return s=(0,p.g)(e.localScope[n].value),e.localScope[n]={value:"++"===t.operator?s+1:s-1,valueset:!0,node:t},!1===t.prefix?s:"++"===t.operator?s+1:s-1;if(void 0!==e.globalScope[n])return s=(0,p.g)(e.globalScope[n].value),e.globalScope[n]={value:"++"===t.operator?s+1:s-1,valueset:!0,node:t},!1===t.prefix?s:"++"===t.operator?s+1:s-1;throw new l.D$(e,l.TX.InvalidIdentifier,t)}(e,t);case"AssignmentExpression":return await async function(e,t){const r=t.left;if("MemberExpression"===r.type){const i=await D(e,r.object);let n;if(!0===r.computed)n=await D(e,r.property);else{if("Identifier"!==r.property.type)throw new l.D$(e,l.TX.InvalidIdentifier,t);n=r.property.name}const s=await D(e,t.right);if((0,p.o)(i)){if(!(0,p.b)(n))throw new l.D$(e,l.TX.ArrayAccessorMustBeNumber,t);if(n<0&&(n=i.length+n),n<0||n>i.length)throw new l.D$(e,l.TX.OutOfBounds,t);if(n===i.length){if("="!==t.operator)throw new l.D$(e,l.TX.OutOfBounds,t);i[n]=F(s,t.operator,i[n],t,e)}else i[n]=F(s,t.operator,i[n],t,e)}else if(i instanceof a.A){if(!1===(0,p.c)(n))throw new l.D$(e,l.TX.KeyAccessorMustBeString,t);if(!0===i.hasField(n))i.setField(n,F(s,t.operator,i.field(n),t,e));else{if("="!==t.operator)throw new l.D$(e,l.TX.FieldNotFound,t,{key:n});i.setField(n,F(s,t.operator,null,t,e))}}else if(i instanceof M){if(!1===(0,p.c)(n))throw new l.D$(e,l.TX.KeyAccessorMustBeString,t);if(!0!==i.hasGlobal(n))throw new l.D$(e,l.TX.ModuleExportNotFound,t);i.setGlobal(n,F(s,t.operator,await i.global(n),t,e))}else{if(!(0,p.r)(i))throw(0,p.q)(i)?new l.D$(e,l.TX.Immutable,t):new l.D$(e,l.TX.InvalidParameter,t);if(!1===(0,p.c)(n))throw new l.D$(e,l.TX.KeyAccessorMustBeString,t);if(!0===i.hasField(n))i.setField(n,F(s,t.operator,i.field(n),t,e));else{if("="!==t.operator)throw new l.D$(e,l.TX.FieldNotFound,t,{key:n});i.setField(n,F(s,t.operator,null,t,e))}}return p.z}const n=(0,i.X)(r);if(null!=e.localScope&&void 0!==e.localScope[n]){const r=await D(e,t.right);return e.localScope[n]={value:F(r,t.operator,e.localScope[n].value,t,e),valueset:!0,node:t.right},p.z}if(void 0!==e.globalScope[n]){const r=await D(e,t.right);return e.globalScope[n]={value:F(r,t.operator,e.globalScope[n].value,t,e),valueset:!0,node:t.right},p.z}throw new l.D$(e,l.TX.InvalidIdentifier,t)}(e,t);case"TemplateLiteral":return await async function(e,t){let r="",i=0;for(const n of t.quasis)if(r+=n.value?n.value.cooked:"",!1===n.tail){if(t.expressions[i]){const n=await D(e,t.expressions[i]);if((0,p.i)(n))throw new l.D$(e,l.TX.NoFunctionInTemplateLiteral,t);r+=(0,p.j)(n)}i++}return r}(e,t);case"Identifier":return await $(e,t);case"MemberExpression":return await async function(e,t){const r=await D(e,t.object);if(null===r)throw new l.D$(e,l.TX.MemberOfNull,t);if(!1===t.computed){if("Identifier"===t.property.type){if(r instanceof a.A||(0,p.r)(r))return r.field(t.property.name);if(r instanceof w.A)return(0,o.B)(r,t.property.name,e,t);if(r instanceof M){if(!r.hasGlobal(t.property.name))throw new l.D$(e,l.TX.InvalidIdentifier,t);return r.global(t.property.name)}throw new l.D$(e,l.TX.InvalidMemberAccessKey,t)}throw new l.D$(e,l.TX.InvalidMemberAccessKey,t)}let i=await D(e,t.property);if(r instanceof a.A||(0,p.r)(r)){if((0,p.c)(i))return r.field(i);throw new l.D$(e,l.TX.InvalidMemberAccessKey,t)}if(r instanceof M){if((0,p.c)(i))return r.global(i);throw new l.D$(e,l.TX.InvalidMemberAccessKey,t)}if(r instanceof w.A){if((0,p.c)(i))return(0,o.B)(r,i,e,t);throw new l.D$(e,l.TX.InvalidMemberAccessKey,t)}if((0,p.o)(r)){if((0,p.b)(i)&&isFinite(i)&&Math.floor(i)===i){if(i<0&&(i=r.length+i),i>=r.length||i<0)throw new l.D$(e,l.TX.OutOfBounds,t);return r[i]}throw new l.D$(e,l.TX.InvalidMemberAccessKey,t)}if((0,p.q)(r)){if((0,p.b)(i)&&isFinite(i)&&Math.floor(i)===i){if(i<0&&(i=r.length()+i),i>=r.length()||i<0)throw new l.D$(e,l.TX.OutOfBounds,t);return r.get(i)}throw new l.D$(e,l.TX.InvalidMemberAccessKey,t)}if((0,p.c)(r)){if((0,p.b)(i)&&isFinite(i)&&Math.floor(i)===i){if(i<0&&(i=r.length+i),i>=r.length||i<0)throw new l.D$(e,l.TX.OutOfBounds,t);return r[i]}throw new l.D$(e,l.TX.InvalidMemberAccessKey,t)}throw new l.D$(e,l.TX.InvalidMemberAccessKey,t)}(e,t);case"Literal":return t.value;case"CallExpression":return await async function(e,t){if("MemberExpression"===t.callee.type){const r=await D(e,t.callee.object);if(!(r instanceof M))throw new l.D$(e,l.TX.FunctionNotFound,t);const i=!1===t.callee.computed?t.callee.property.name:await D(e,t.callee.property);if(!r.hasGlobal(i))throw new l.D$(e,l.TX.FunctionNotFound,t);const n=await r.global(i);if(!(0,p.i)(n))throw new l.D$(e,l.TX.CallNonFunction,t);return n.call(e,t)}if("Identifier"!==t.callee.type)throw new l.D$(e,l.TX.FunctionNotFound,t);const r=(0,i.X)(t.callee);if(null!=e.localScope&&void 0!==e.localScope[r]){const i=e.localScope[r];if((0,p.i)(i.value))return i.value.call(e,t);throw new l.D$(e,l.TX.CallNonFunction,t)}if(void 0!==e.globalScope[r]){const i=e.globalScope[r];if((0,p.i)(i.value))return i.value.call(e,t);throw new l.D$(e,l.TX.CallNonFunction,t)}throw new l.D$(e,l.TX.FunctionNotFound,t)}(e,t);case"UnaryExpression":return await async function(e,t){const r=await D(e,t.argument);if((0,p.a)(r)){if("!"===t.operator)return!r;if("-"===t.operator)return-1*(0,p.g)(r);if("+"===t.operator)return 1*(0,p.g)(r);if("~"===t.operator)return~(0,p.g)(r);throw new l.D$(e,l.TX.UnsupportedUnaryOperator,t)}if("-"===t.operator)return-1*(0,p.g)(r);if("+"===t.operator)return 1*(0,p.g)(r);if("~"===t.operator)return~(0,p.g)(r);throw new l.D$(e,l.TX.UnsupportedUnaryOperator,t)}(e,t);case"BinaryExpression":return await async function(e,t){const r=await D(e,t.left),i=await D(e,t.right);switch(t.operator){case"|":case"<<":case">>":case">>>":case"^":case"&":return(0,p.F)((0,p.g)(r),(0,p.g)(i),t.operator);case"==":return(0,p.E)(r,i);case"!=":return!(0,p.E)(r,i);case"<":case">":case"<=":case">=":return(0,p.D)(r,i,t.operator);case"+":return(0,p.c)(r)||(0,p.c)(i)?(0,p.j)(r)+(0,p.j)(i):(0,p.g)(r)+(0,p.g)(i);case"-":return(0,p.g)(r)-(0,p.g)(i);case"*":return(0,p.g)(r)*(0,p.g)(i);case"/":return(0,p.g)(r)/(0,p.g)(i);case"%":return(0,p.g)(r)%(0,p.g)(i);default:throw new l.D$(e,l.TX.UnsupportedOperator,t)}}(e,t);case"LogicalExpression":return await async function(e,t){const r=await D(e,t.left);if(!(0,p.a)(r))throw new l.D$(e,l.TX.LogicalExpressionOnlyBoolean,t);switch(t.operator){case"||":{if(!0===r)return r;const i=await D(e,t.right);if((0,p.a)(i))return i;throw new l.D$(e,l.TX.LogicExpressionOrAnd,t)}case"&&":{if(!1===r)return r;const i=await D(e,t.right);if((0,p.a)(i))return i;throw new l.D$(e,l.TX.LogicExpressionOrAnd,t)}default:throw new l.D$(e,l.TX.LogicExpressionOrAnd,t)}}(e,t);case"ArrayExpression":return await async function(e,t){const r=[];for(let i=0;i<t.elements.length;i++)r.push(await D(e,t.elements[i]));for(let i=0;i<r.length;i++){if((0,p.i)(r[i]))throw new l.D$(e,l.TX.NoFunctionInArray,t);r[i]===p.z&&(r[i]=null)}return r}(e,t);case"ObjectExpression":return await async function(e,t){const r=[];for(let i=0;i<t.properties.length;i++){const n=t.properties[i],s=await D(e,n.value),o="Identifier"===n.key.type?n.key.name:await D(e,n.key);r[i]={key:o,value:s}}const i={},n=new Map;for(let s=0;s<r.length;s++){const o=r[s];if((0,p.i)(o.value))throw new l.D$(e,l.TX.NoFunctionInDictionary,t);if(!1===(0,p.c)(o.key))throw new l.D$(e,l.TX.KeyMustBeString,t);let a=o.key.toString();const u=a.toLowerCase();n.has(u)?a=n.get(u):n.set(u,a),o.value===p.z?i[a]=null:i[a]=o.value}const s=new a.A(i);return s.immutable=!1,s}(e,t);default:throw new l.D$(e,l.TX.Unrecognized,t)}}catch(r){throw(0,l.Nh)(e,t,r)}}async function C(e,t){t.breakpoint&&await t.breakpoint();try{switch(t.type){case"ImportDeclaration":return await async function(e,t){const r=(0,i.X)(t.specifiers[0].local),n=e.libraryResolver.loadLibrary(r);let s;return e.libraryResolver._moduleSingletons?.has(n.uri)?s=e.libraryResolver._moduleSingletons.get(n.uri):(s=new M(n),await s.loadModule(e),e.libraryResolver._moduleSingletons?.set(n.uri,s)),e.globalScope[r]={value:s,valueset:!0,node:t},p.z}(e,t);case"ExportNamedDeclaration":return await async function(e,t){if(await C(e,t.declaration),"FunctionDeclaration"===t.declaration.type)e.exports[(0,i.X)(t.declaration.id)]="function";else if("VariableDeclaration"===t.declaration.type)for(const r of t.declaration.declarations)e.exports[(0,i.X)(r.id)]="variable";return p.z}(e,t);case"VariableDeclaration":return await Z(e,t,0);case"BlockStatement":return await R(e,t);case"FunctionDeclaration":return await async function(e,t){const r=(0,i.X)(t.id);return e.globalScope[r]={valueset:!0,node:null,value:new I(t,e)},p.z}(e,t);case"ReturnStatement":return await async function(e,t){if(null===t.argument)return new p.R(p.z);const r=await D(e,t.argument);return new p.R(r)}(e,t);case"IfStatement":return await async function(e,t){const r=await D(e,t.test);if(!0===r)return C(e,t.consequent);if(!1===r)return null!==t.alternate?C(e,t.alternate):p.z;throw new l.D$(e,l.TX.BooleanConditionRequired,t)}(e,t);case"ExpressionStatement":return await async function(e,t){const r=await D(e,t.expression);return r===p.z?p.z:new p.I(r)}(e,t);case"ForStatement":return await async function(e,t){try{return null!==t.init&&("VariableDeclaration"===t.init.type?await C(e,t.init):await D(e,t.init)),await new Promise(((r,i)=>{x(e,t,{testResult:!0,lastAction:p.z},(e=>{r(e)}),(e=>{i(e)}),0)}))}catch(e){throw e}}(e,t);case"WhileStatement":return await async function(e,t){const r={testResult:!0,lastAction:p.z};if(r.testResult=await D(e,t.test),!1===r.testResult)return p.z;if(!0!==r.testResult)throw new l.D$(e,l.TX.BooleanConditionRequired,t);for(;!0===r.testResult&&(r.lastAction=await C(e,t.body),r.lastAction!==p.A)&&!(r.lastAction instanceof p.R);)if(r.testResult=await D(e,t.test),!0!==r.testResult&&!1!==r.testResult)throw new l.D$(e,l.TX.BooleanConditionRequired,t);return r.lastAction instanceof p.R?r.lastAction:p.z}(e,t);case"ForInStatement":return await async function(e,t){return new Promise(((r,n)=>{D(e,t.right).then((s=>{try{let o;o="VariableDeclaration"===t.left.type?C(e,t.left):Promise.resolve(),o.then((()=>{try{const o=(0,i.X)("VariableDeclaration"===t.left.type?t.left.declarations[0].id:t.left);let u=null;if(null!=e.localScope&&void 0!==e.localScope[o]&&(u=e.localScope[o]),null===u&&void 0!==e.globalScope[o]&&(u=e.globalScope[o]),null===u)return void n(new l.D$(e,l.TX.InvalidIdentifier,t));(0,p.o)(s)||(0,p.c)(s)?P(e,t,s,{reject:n,resolve:r},u):(0,p.q)(s)?function(e,t,r,i,n,s){try{if(void 0===s&&(s="i"),0===r.length())return void i.resolve(p.z);U(e,t,r,n,0,s,(e=>{i.resolve(e)}),(e=>{i.reject(e)}),0)}catch(e){i.reject(e)}}(e,t,s,{reject:n,resolve:r},u):s instanceof a.A||(0,p.r)(s)?function(e,t,r,i,n){try{P(e,t,r.keys(),i,n,"k")}catch(e){i.reject(e)}}(e,t,s,{reject:n,resolve:r},u):(0,p.u)(s)?N(s.iterator(e.abortSignal),e,t,s,u,(e=>{r(e)}),(e=>{n(e)}),0):P(e,t,[],{reject:n,resolve:r},u)}catch(e){n(e)}}),n)}catch(e){n(e)}}),n)}))}(e,t);case"BreakStatement":return p.A;case"EmptyStatement":return p.z;case"ContinueStatement":return p.B;default:throw new l.D$(e,l.TX.Unrecognized,t)}}catch(r){throw(0,l.Nh)(e,t,r)}}async function k(e,t,r){const i=await C(e,t.body);return r.lastAction=i,r.lastAction===p.A||r.lastAction instanceof p.R?(r.testResult=!1,r):null!==t.update?(await D(e,t.update),r):r}function x(e,t,r,i,n,s){try{(async function(e,t,r){if(null!==t.test){const i=await D(e,t.test);if(!0===e.abortSignal?.aborted)throw new l.D$(e,l.TX.Cancelled,t);if(r.testResult=i,!1===r.testResult)return r;if(!0!==r.testResult)throw new l.D$(e,l.TX.BooleanConditionRequired,t);return k(e,t,r)}return k(e,t,r)})(e,t,r).then((()=>{try{!0===r.testResult?++s>T?(s=0,setTimeout((()=>{x(e,t,r,i,n,s)}),0)):x(e,t,r,i,n,s):r.lastAction instanceof p.R?i(r.lastAction):i(p.z)}catch(e){n(e)}}),(e=>{n(e)}))}catch(e){n(e)}}function j(e,t,r,i,n,s,o,a,l,u){try{if(i<=s)return void a(p.z);n.value="k"===o?r[s]:s,C(e,t.body).then((c=>{try{c instanceof p.R?a(c):c===p.A?a(p.z):++u>T?(u=0,setTimeout((()=>{j(e,t,r,i,n,s+1,o,a,l,u)}),0)):j(e,t,r,i,n,s+1,o,a,l,u)}catch(e){l(e)}}),(e=>{l(e)}))}catch(e){l(e)}}function U(e,t,r,i,n,s,o,a,l){try{if(r.length()<=n)return void o(p.z);i.value="k"===s?r.get(n):n,C(e,t.body).then((u=>{u instanceof p.R?o(u):u===p.A?o(p.z):++l>T?(l=0,setTimeout((()=>{U(e,t,r,i,n+1,s,o,a,l)}),0)):U(e,t,r,i,n+1,s,o,a,l)}),(e=>{a(e)}))}catch(e){a(e)}}function P(e,t,r,i,n,s){try{if(void 0===s&&(s="i"),0===r.length)return void i.resolve(p.z);j(e,t,r,r.length,n,0,s,(e=>{i.resolve(e)}),(e=>{i.reject(e)}),0)}catch(e){i.reject(e)}}function N(e,t,r,i,n,s,o,a){try{e.next().then((l=>{try{if(null===l)s(p.z);else{const c=u.A.createFromGraphicLikeObject(l.geometry,l.attributes,i,t.timeZone);c._underlyingGraphic=l,n.value=c,C(t,r.body).then((l=>{try{l===p.A?s(p.z):l instanceof p.R?s(l):++a>T?(a=0,setTimeout((()=>{N(e,t,r,i,n,s,o,a)}),0)):N(e,t,r,i,n,s,o,a)}catch(e){o(e)}}),(e=>{o(e)}))}}catch(e){o(e)}}),(e=>{o(e)}))}catch(e){o(e)}}function F(e,t,r,i,n){switch(t){case"=":return e===p.z?null:e;case"/=":return(0,p.g)(r)/(0,p.g)(e);case"*=":return(0,p.g)(r)*(0,p.g)(e);case"-=":return(0,p.g)(r)-(0,p.g)(e);case"+=":return(0,p.c)(r)||(0,p.c)(e)?(0,p.j)(r)+(0,p.j)(e):(0,p.g)(r)+(0,p.g)(e);case"%=":return(0,p.g)(r)%(0,p.g)(e);default:throw new l.D$(n,l.TX.UnsupportedOperator,i)}}async function R(e,t){return E(e,t,0)}async function E(e,t,r){if(r>=t.body.length)return p.z;const i=await C(e,t.body[r]);return i instanceof p.R||i===p.A||i===p.B||r===t.body.length-1?i:E(e,t,r+1)}async function Z(e,t,r){return r>=t.declarations.length||(await async function(e,t){let r=null;if(r=null===t.init?null:await D(e,t.init),null!==e.localScope){if(r===p.z&&(r=null),"Identifier"!==t.id.type)throw new l.D$(e,l.TX.InvalidIdentifier,t);const n=(0,i.X)(t.id);return void(null!=e.localScope&&(e.localScope[n]={value:r,valueset:!0,node:t.init}))}if("Identifier"!==t.id.type)throw new l.D$(e,l.TX.InvalidIdentifier,t);const n=(0,i.X)(t.id);r===p.z&&(r=null),e.globalScope[n]={value:r,valueset:!0,node:t.init}}(e,t.declarations[r]),r===t.declarations.length-1||await Z(e,t,r+1)),p.z}async function $(e,t){const r=(0,i.X)(t);if(null!=e.localScope&&void 0!==e.localScope[r]){const t=e.localScope[r];if(!0===t.valueset)return t.value;if(null!==t.d)return t.d;t.d=D(e,t.node);const i=await t.d;return t.value=i,t.valueset=!0,i}if(void 0!==e.globalScope[r]){const t=e.globalScope[r];if(!0===t.valueset)return t.value;if(null!==t.d)return t.d;t.d=D(e,t.node);const i=await t.d;return t.value=i,t.valueset=!0,i}throw new l.D$(e,l.TX.InvalidIdentifier,t)}const W={};async function J(e,t,r,i){const n=await D(e,t.arguments[r]);if((0,p.E)(n,i))return D(e,t.arguments[r+1]);const s=t.arguments.length-r;return 1===s?D(e,t.arguments[r]):2===s?null:3===s?D(e,t.arguments[r+2]):J(e,t,r+2,i)}async function L(e,t,r,i){if(!0===i)return D(e,t.arguments[r+1]);if(3==t.arguments.length-r)return D(e,t.arguments[r+2]);const n=await D(e,t.arguments[r+2]);if(!1===(0,p.a)(n))throw new l.D$(e,l.TX.ModuleExportNotFound,t.arguments[r+2]);return L(e,t,r+2,n)}async function B(e,t,r,n){const s=e.body;if(r.length!==e.params.length)throw new l.D$(t,l.TX.WrongNumberOfParameters,null);for(let n=0;n<r.length;n++){const s=e.params[n];"Identifier"===s.type&&null!=t.localScope&&(t.localScope[(0,i.X)(s)]={d:null,value:r[n],valueset:!0,node:null})}const o=await C(t,s);if(o instanceof p.R)return o.value;if(o===p.A)throw new l.D$(t,l.TX.UnexpectedToken,n);if(o===p.B)throw new l.D$(t,l.TX.UnexpectedToken,n);return o instanceof p.I?o.value:o}(0,m.d)(W,A),(0,_.d)(W,A),(0,g.d)(W,A),(0,f.d)(W,A),(0,v.d)(W,A),(0,y.registerFunctions)({functions:W,compiled:!1,signatures:null,evaluateIdentifier:null,mode:"async",standardFunction:A,standardFunctionAsync:O}),W.iif=async function(e,t){(0,p.G)(null===t.arguments?[]:t.arguments,3,3,e,t);const r=await D(e,t.arguments[0]);if(!1===(0,p.a)(r))throw new l.D$(e,l.TX.BooleanConditionRequired,t);return D(e,r?t.arguments[1]:t.arguments[2])},W.defaultvalue=async function(e,t){(0,p.G)(null===t.arguments?[]:t.arguments,2,3,e,t);const r=await D(e,t.arguments[0]);if(3===t.arguments.length){const i=await D(e,t.arguments[1]),n=(0,o.j)(r,i);return null!=n&&""!==n?n:D(e,t.arguments[2])}return null==r||""===r?D(e,t.arguments[1]):r},W.decode=async function(e,t){if(t.arguments.length<2)throw new l.D$(e,l.TX.WrongNumberOfParameters,t);if(2===t.arguments.length)return D(e,t.arguments[1]);if((t.arguments.length-1)%2==0)throw new l.D$(e,l.TX.WrongNumberOfParameters,t);return J(e,t,1,await D(e,t.arguments[0]))},W.when=async function(e,t){if(t.arguments.length<3)throw new l.D$(e,l.TX.WrongNumberOfParameters,t);if(t.arguments.length%2==0)throw new l.D$(e,l.TX.WrongNumberOfParameters,t);const r=await D(e,t.arguments[0]);if(!1===(0,p.a)(r))throw new l.D$(e,l.TX.BooleanConditionRequired,t.arguments[0]);return L(e,t,0,r)};const z={fixSpatialReference:p.x,parseArguments:S,standardFunction:A,standardFunctionAsync:O,evaluateIdentifier:$};for(const e in W)W[e]={value:new c.UQ(W[e]),valueset:!0,node:null};const V=function(){};function X(e,t,r){const i=new V;null==e&&(e={}),null==t&&(t={});const n=new a.A({newline:"\n",tab:"\t",singlequote:"'",doublequote:'"',forwardslash:"/",backwardslash:"\\"});n.immutable=!1,i.textformatting={value:n,valueset:!0,node:null};for(const e in t)i[e]={value:new c.UQ(t[e]),native:!0,valueset:!0,node:null};for(const t in e)i[t]={value:(0,p.C)(e[t])?u.A.createFromGraphic(e[t],r):e[t],valueset:!0,node:null};return i}function q(e){console.log(e)}V.prototype=W,V.prototype.infinity={value:Number.POSITIVE_INFINITY,valueset:!0,node:null},V.prototype.pi={value:Math.PI,valueset:!0,node:null};const G=z;function H(e){const t={mode:"async",compiled:!1,functions:{},signatures:[],standardFunction:A,standardFunctionAsync:O,evaluateIdentifier:$};for(let r=0;r<e.length;r++)e[r].registerFunctions(t);for(const e in t.functions)W[e]={value:new c.UQ(t.functions[e]),valueset:!0,node:null},V.prototype[e]=W[e];for(let e=0;e<t.signatures.length;e++)(0,d.WC)(t.signatures[e],"async")}async function K(e,t){let r=t.spatialReference;null==r&&(r=new b.A({wkid:102100}));let i=null;e.usesModules&&(i=new s.a(new Map,e.loadedModules));const n=X(t.vars,t.customfunctions,t.timeZone),o={spatialReference:r,services:t.services,exports:{},libraryResolver:i,abortSignal:void 0===t.abortSignal||null===t.abortSignal?{aborted:!1}:t.abortSignal,globalScope:n,console:t.console??q,timeZone:t.timeZone??null,lrucache:t.lrucache,interceptor:t.interceptor,localScope:null,depthCounter:{depth:1}},a=await R(o,e);if(a instanceof p.R||a instanceof p.I){const e=a.value;if(e===p.z)return null;if((0,p.i)(e))throw new l.D$(o,l.TX.IllegalResult,null);return e}if(a===p.z)return null;if(a===p.A)throw new l.D$(o,l.TX.IllegalResult,null);if(a===p.B)throw new l.D$(o,l.TX.IllegalResult,null);throw new l.D$(o,l.TX.NeverReach,null)}H([h.A])},97975:(e,t,r)=>{r.r(t),r.d(t,{build:()=>i.b}),r(47635),r(77788),r(29592),r(31790),r(38587),r(40198),r(23932),r(15479),r(87646),r(31434),r(40574),r(23605),r(60769),r(35212),r(88251),r(85807),r(83660),r(69952),r(64802),r(19635),r(41014),r(92624),r(288);var i=r(43575)}}]);